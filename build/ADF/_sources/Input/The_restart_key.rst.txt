
.. _keyscheme RESTART: 

The restart key
***************

The name of the restart file must be provided via the ``EngineRestart`` key in the AMS driver part of the input (see below). A list of data items is read from the file (if present on the file and only as far as significant for the new run) and used unless their usage is explicitly suppressed by the user. 

Simple usage:

.. code-block:: bash

  $AMSBIN/ams << eor
    ...

    EngineRestart restartfile

    Engine ADF
      ...
    EndEngine
  eor



``restartfile``
   The name of a file with restart data. The path (absolute or relative) to the file must be included if the file is not local to the directory where the calculation executes. In most cases it will be a adf.rkf file from an ADF calculation, but this is not necessary. It may be any file - constructed by the user for instance - provided it has the right structure. It must be a kf file and the data to be used must be stored in sections and under variable names, exactly how such data are generated by a normal ADF run on adf.rkf or on the checkpoint file TAPE13. Note: the filename must not be one of the standard filenames used internally by the program, such as adf.rkf, TAPE13 etc. Generally: don't use a name like TAPEnn where nn is a two-digit number. 

One can also specify a list of restart options in the ``ADF`` part of the input::

    Engine ADF
      ...
      ... 
      Restart 
        optionlist
        optionlist
        ...
      End
   EndEngine

This is the list of possible options:

``noSCF``
   Do not use any fit coefficients from the restart file as a first approximation to the (fitted) SCF density for the new calculation. Instead, the sum-of-fragments density will be used, as in a non-restart run. Note, typically noSCF should be used in combination with noORB. 

``noORB``
   Do not use orbitals from the restart file. 

``SPINFLIP atomnumbers``
   See the separate  :ref:`section about the spin-flip method<spin flip broken symmetry>` for converging broken-symmetry systems. 

Note: In ADF2020 AMS is handling tasks related to exploring the PES.
For restarts related to, for example, a Linear Transit, IRC or IR Frequencies run, one should look in the `AMS manual <../../AMS/index.html>`__.
