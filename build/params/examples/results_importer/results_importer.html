

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
<META name="ROBOTS" content="NOINDEX, NOFOLLOW">
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.7. Create training sets with a ResultsImporter &mdash; ParAMS 2021.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme_tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/panels-bootstrap.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ParAMS 2021.1 documentation" href="../../index.html"/>
        <link rel="up" title="3. Tutorials" href="../examples.html"/>
        <link rel="next" title="3.8. SCC-DFTB repulsive potential for ZnO" href="../dftb_zno/dftb_zno.html"/>
        <link rel="prev" title="3.6. The params Python library" href="../lj_ar/lj_ar_python.html"/> 

  
  <script src="../../_static/js/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/app.js"></script>
<script type="text/javascript">
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NCRWHZZ');</script>
<!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav" role="document">
  <!--STARTNOSOLR-->
  <header class="site-header navbar-fixed-top compact">
      <nav class="main navbar navbar-default">
        <div class="headerbar_container">
          <a role="button" href="/free-trial/" class="btn btn-sm btn-primary">Free trial</a>
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
              <a class="logo" href="https://www.scm.com">
                <img class="logo-small" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="Software for Chemistry &amp; Materials" />
                <img class="logo-full" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo.svg" alt="Software for Chemistry &amp; Materials" />
              </a>
            </div>
          </div>
          <div class="nav-wrapper">
            <div class="collapse navbar-collapse">
              <ul id="menu-primary-navigation" class="nav navbar-nav"><li id="menu-item-40077" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-40077"><a title="Applications" href="https://www.scm.com/applications/">Applications</a></li>
<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a title="Products" href="https://www.scm.com/amsterdam-modeling-suite/">Products</a></li>
<li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a title="Support" href="https://www.scm.com/support/">Support</a></li>
<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a title="About us" href="https://www.scm.com/about-us/">About us</a></li>
</ul>                           <span class="search"><a class="menu_search_link" href="https://www.scm.com/search.php"></a><span class="sr-only">Search</span></span>
            </div>
          </div>
        </div>
      </nav>
 </header>
    

   
  <div id="doc-wrapper">
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/params_logo_compact.svg" class="logo" />
          
          </a>

          
          
  <ul>
      <li class="wy-breadcrumbs-aside">
        
           
           
        
      </li>
  </ul>
 
<!--ENDNOSOLR-->
             <!--STARTNOSOLR-->
<div role="search">
  <form id="rtd-search-form" class="wy-form search-docs-form" action="https://www.scm.com/search.php" method="get">
  <div class="input-group">
    <input type="text" name="search" placeholder="Search ParAMS" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <input type="hidden" name="root" value="doctrunk" />


    <input type="hidden" name="cat" value="doc-ParAMS" />


    <span class="input-group-btn">
			<button type="submit" class="btn btn-primary"><span class="sr-only">Search</span><span class="fa fa-search"></span></button>
		</span>
	</div>
  </form>
</div>
<!--ENDNOSOLR-->
          

          
        </div>
<!--STARTNOSOLR-->
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#parameter-fitting-a-lennard-jones-example">1.1. Parameter Fitting: A Lennard-Jones Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#general-application">1.2. General Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">2. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#first-steps-with-params">2.1. First Steps with ParAMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#unit-tests">2.2. Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">3. Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro_to_params.html">3.1. Introduction to parametrization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro_to_params.html#training-data">3.1.1. Training data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lj_ar/lj_ar.html">3.2. Lennard-Jones Potential for Argon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#lennard-jones-parameters-engine-and-interface">3.2.1. Lennard-Jones Parameters, Engine, and Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#files">3.2.2. Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#run-the-example">3.2.3. Run the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#the-best-parameter-values">3.2.4. The best parameter values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#input-files">3.2.5. Input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#the-parameter-interface-yaml-file">3.2.5.1. The parameter_interface.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#the-job-collection-yaml-file">3.2.5.2. The job_collection.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#the-training-set-yaml-file">3.2.5.3. The training_set.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#the-params-conf-py-file">3.2.5.4. The params.conf.py file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#creation-of-the-input-files">3.2.5.5. Creation of the input files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar.html#output-files">3.2.6. Output files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#summary-txt">3.2.6.1. summary.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar.html#detailed-results-correlation-plots-summary-statistics">3.2.6.2. Detailed results: correlation plots, summary statistics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html">3.3. Calculate reference values in training_set.yaml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#prerequisites">3.3.1. Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#the-input-files">3.3.2. The input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#training-set-yaml">3.3.2.1. training_set.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#reference-engines-yaml">3.3.2.2. reference_engines.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#job-collection-yaml">3.3.2.3. job_collection.yaml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#calculate-reference-values-with-params-genref">3.3.3. Calculate reference values with <code class="docutils literal notranslate"><span class="pre">params</span> <span class="pre">genref</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#the-reference-cache-folder">3.3.3.1. The reference.cache folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_no_reference_data.html#the-training-set-ref-yaml-file">3.3.3.2. The training_set.ref.yaml file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lj_ar/lj_ar_validation_set.html">3.4. Training and validation sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_validation_set.html#an-explicit-validation-set-validation-set-yaml">3.4.1. An explicit validation set: <code class="docutils literal notranslate"><span class="pre">validation_set.yaml</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_validation_set.html#run-the-optimization">3.4.1.1. Run the optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_validation_set.html#training-and-validation-set-results">3.4.1.2. Training and validation set results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_validation_set.html#random-split-of-a-data-set-into-training-and-validation-sets">3.4.2. Random split of a data_set into training and validation sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lj_ar/lj_ar_restart.html">3.5. Restarting (continuing) an optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_restart.html#restarting-with-the-cmaoptimizer">3.5.1. Restarting with the CMAOptimizer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_restart.html#run-the-first-100-iterations">3.5.1.1. Run the first 100 iterations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lj_ar/lj_ar_restart.html#continue-for-another-100-iterations-with-a-restart-file">3.5.1.2. Continue for another 100 iterations with a restart file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_restart.html#restart-with-other-optimizers-e-g-nelder-mead-from-scipy">3.5.2. Restart with other optimizers (e.g. Nelder-Mead from Scipy)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lj_ar/lj_ar_python.html">3.6. The params Python library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_python.html#run-an-optimization-with-the-python-library">3.6.1. Run an optimization with the Python library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_python.html#calculate-reference-values">3.6.2. Calculate reference values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lj_ar/lj_ar_python.html#training-and-validation-sets-with-the-python-library">3.6.3. Training and validation sets with the Python library</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.7. Create training sets with a ResultsImporter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-a-reference-job">3.7.1. Run a reference job</a></li>
<li class="toctree-l3"><a class="reference internal" href="#water-molecule-reference-data">3.7.2. Water molecule reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialize-the-resultsimporter">3.7.3. Initialize the ResultsImporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-singlepoint-calculation-on-the-optimized-geometry">3.7.4. Add a singlepoint calculation on the optimized geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle">3.7.5. Add a geometry optimization job extracting the bond length and bond angle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-trajectory">3.7.6. Add a trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-reaction-energy">3.7.7. Add a reaction energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#training-set-validation-set-and-other-data-sets">3.7.8. Training set, validation set, and other data sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exit-plams">3.7.9. Exit PLAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-to-disk">3.7.10. Save to disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-resultsimporters">3.7.11. More ResultsImporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dftb_zno/dftb_zno.html">3.8. SCC-DFTB repulsive potential for ZnO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#job-collection-yaml-and-training-set-yaml">3.8.1. job_collection.yaml and training_set.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#background-znorg-0-1">3.8.2. Background: znorg-0-1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#parameter-interface">3.8.3. Parameter interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#run-the-parametrization">3.8.4. Run the parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#results">3.8.5. Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dftb_zno/dftb_zno.html#modify-the-analytical-repulsive-potential">3.8.6. Modify the analytical repulsive potential</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reaxff_water.html">3.9. Parameterization of a Water Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reaxff_water.html#complete-example-script">3.9.1. Complete Example Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reaxff_water.html#changing-the-example-script">3.9.2. Changing the Example Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html">3.10. Parameterization of a Simple Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html#calculate-the-reference-data">3.10.1. Calculate the reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html#import-the-reference-data-into-params">3.10.2. Import the reference data into ParAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html#set-the-parameters-to-optimize">3.10.3. Set the parameters to optimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html#run-the-reaxff-parametrization">3.10.4. Run the ReaxFF parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../new_reaxff_water/new_reaxff_water.html#visualize-the-results">3.10.5. Visualize the results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hf_acks2.html">3.11. Refitting HF Charges with the ACKS2 Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hf_acks2.html#the-config-file">3.11.1. The Config File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hf_acks2.html#preparing-the-yaml-files-from-input">3.11.2. Preparing the YAML Files from Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hf_acks2.html#running-the-optimization">3.11.3. Running the Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hf_acks2.html#comparing-the-new-parameters">3.11.4. Comparing the new parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hf_acks2.html#playing-with-the-example">3.11.5. Playing with the example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../convert_old_reaxff_format.html">3.12. Convert old ReaxFF training sets to ParAMS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../convert_old_reaxff_format.html#convert-geo-to-job-collection-yaml">3.12.1. Convert <code class="docutils literal notranslate"><span class="pre">geo</span></code> to <code class="docutils literal notranslate"><span class="pre">job_collection.yaml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../convert_old_reaxff_format.html#convert-trainset-in">3.12.2. Convert <code class="docutils literal notranslate"><span class="pre">trainset.in</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../convert_old_reaxff_format.html#convert-the-old-params-file">3.12.3. Convert the old <code class="docutils literal notranslate"><span class="pre">params</span></code> file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mainscript/mainscript.html">4. ParAMS Main Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mainscript/mainscript.html#the-configuration-file">4.1. The Configuration File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#generate-a-template-config-file">4.1.1. Generate a template config file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#list-of-variables-in-params-conf-py">4.1.2. List of variables in <code class="docutils literal notranslate"><span class="pre">params.conf.py</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">5. Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../components/architecture/architecture.html">5.1. Architecture Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/collections/collections.html">5.2. Job and Engine Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/collections/collections.html#job-collection">5.2.1. Job Collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#adding-jobs">5.2.1.1. Adding Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#lookup">5.2.1.2. Lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#removing-entries">5.2.1.3. Removing Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#renaming-entries">5.2.1.4. Renaming Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#comparison">5.2.1.5. Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#saving-and-loading">5.2.1.6. Saving and loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#generating-amsjobs">5.2.1.7. Generating AMSJobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#running-collection-jobs">5.2.1.8. Running Collection Jobs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/collections/collections.html#engine-collection">5.2.2. Engine Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/collections/collections.html#collections-api">5.2.3. Collections API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#jcentry">5.2.3.1. JCEntry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#jobcollection">5.2.3.2. JobCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#engine">5.2.3.3. Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#enginecollection">5.2.3.4. EngineCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/collections/collections.html#collection-base-class">5.2.3.5. Collection Base Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/data_set/data_set.html">5.3. Data Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#an-example-dataset">5.3.1. An example DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#load-or-store-dataset">5.3.2. Load or store DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#adding-entries">5.3.3. Adding entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#demonstration-working-with-a-dataset">5.3.4. Demonstration: Working with a DataSet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#add-an-entry">5.3.4.1. Add an entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#datasetentry-attributes">5.3.4.2. DataSetEntry attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#accessing-the-dataset-entries">5.3.4.3. Accessing the DataSet entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#delete-a-dataset-entry">5.3.4.4. Delete a DataSet entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#split-a-dataset-into-subsets">5.3.4.5. Split a DataSet into subsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#dataset-header">5.3.4.6. DataSet header</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set.html#save-the-data-set">5.3.4.7. Save the data set</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#calculating-and-adding-reference-data-with-ams">5.3.5. Calculating and Adding Reference Data with AMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#calculating-the-loss-function-value">5.3.6. Calculating the Loss Function Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#checking-for-consistency-with-a-given-job-collection">5.3.7. Checking for Consistency with a given Job Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#sigma-vs-weight-what-is-the-difference">5.3.8. Sigma vs. weight: What is the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#data-set-entry-api">5.3.9. Data Set Entry API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set.html#data-set-api">5.3.10. Data Set API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/data_set/extractors.html">5.4. Extractors and Comparators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/extractors.html#available-extractors">5.4.1. Available Extractors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#angle">5.4.1.1. Angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#average-distance">5.4.1.2. Average distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#bulk-modulus">5.4.1.3. Bulk modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#cell-angles">5.4.1.4. Cell angles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#cell-lengths">5.4.1.5. Cell lengths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#cell-volume">5.4.1.6. Cell volume</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#charges">5.4.1.7. Charges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#dihedral">5.4.1.8. Dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#distance">5.4.1.9. Distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#distance-vector">5.4.1.10. Distance vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#energy">5.4.1.11. Energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#forces">5.4.1.12. Forces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#hessian">5.4.1.13. Hessian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#pes">5.4.1.14. PES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#pes-compared">5.4.1.15. PES compared</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#pesscan-angle">5.4.1.16. PESScan angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#pesscan-dihedral">5.4.1.17. PESScan dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#pesscan-distance">5.4.1.18. PESScan distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#rmsd">5.4.1.19. RMSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#shear-modulus">5.4.1.20. Shear modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor">5.4.1.21. Stress tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-1d">5.4.1.22. Stress tensor 1D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-2d">5.4.1.23. Stress tensor 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-3d">5.4.1.24. Stress tensor 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-diagonal-2d">5.4.1.25. Stress tensor diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-diagonal-3d">5.4.1.26. Stress tensor diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-off-diagonal-2d">5.4.1.27. Stress tensor off-diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#stress-tensor-off-diagonal-3d">5.4.1.28. Stress tensor off-diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#vibrational-frequencies">5.4.1.29. Vibrational frequencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/extractors.html#young-modulus">5.4.1.30. Young modulus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/extractors.html#custom-extractors">5.4.2. Custom Extractors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/extractors.html#supported-data-structures">5.4.3. Supported Data Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/extractors.html#custom-comparators">5.4.4. Custom Comparators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html">5.5. Data Set Evaluator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html#datasetevaluator-class">5.5.1. DataSetEvaluator class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html#example-datasetevaluator-calculate-reference">5.5.1.1. Example: DataSetEvaluator.calculate_reference()</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html#example-datasetevaluator-run">5.5.1.2. Example: DataSetEvaluator.run()</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html#example-load-a-saved-datasetevaluator">5.5.1.3. Example: Load a saved DataSetEvaluator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/data_set/data_set_evaluator.html#datasetevaluator-api">5.5.2. DataSetEvaluator API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/results_importer/results_importer.html">5.6. Results Importer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/results_importer/overview.html">5.6.1. ResultsImporter overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#resultsimporter-summary">5.6.1.1. ResultsImporter summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#resultsimporter-settings">5.6.1.2. ResultsImporter settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#training-set-validation-set-etc">5.6.1.3. Training set, validation set, etc.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#save-and-load-from-disk">5.6.1.4. Save and load from disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-singlejob">5.6.1.5. add_singlejob</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-trajectory-singlepoints">5.6.1.6. add_trajectory_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-reaction-energy">5.6.1.7. add_reaction_energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-pesscan-singlepoints">5.6.1.8. add_pesscan_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-neb-singlepoints">5.6.1.9. add_neb_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/overview.html#add-pesexploration-singlepoints">5.6.1.10. add_pesexploration_singlepoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/results_importer/reference_codes.html">5.6.2. AMS, VASP and Quantum ESPRESSO reference data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/reference_codes.html#ams">5.6.2.1. AMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/reference_codes.html#vasp">5.6.2.2. VASP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/results_importer/reference_codes.html#quantum-espresso">5.6.2.3. Quantum ESPRESSO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/results_importer/api.html">5.6.3. ResultsImporters API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/interfaces/interfaces.html">5.7. Parameter Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#available-parameter-interfaces">5.7.1. Available Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/interfaces/xtb.html">5.7.1.1. xTB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/interfaces/reaxff.html">5.7.1.2. ReaxFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/interfaces/dftbsplinerep.html">5.7.1.3. SCC-DFTB repulsive potential</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/interfaces/lennardjones.html">5.7.1.4. Lennard Jones</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#parameter-interface-basics">5.7.2. Parameter Interface Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#working-with-parameters">5.7.3. Working with Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#the-active-parameters-subset">5.7.4. The Active Parameters Subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#storage">5.7.5. Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/interfaces/interfaces.html#lossless-storage">5.7.5.1. Lossless Storage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#relation-to-plams-settings">5.7.6. Relation to PLAMS Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#parameter-api">5.7.7. Parameter API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/interfaces/interfaces.html#interface-base-class-api">5.7.8. Interface Base Class API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/optimizers/optimizers.html">5.8. Optimizers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/cmaes.html">5.8.1. CMA-ES</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/optimizers/cmaes.html#list-of-valid-cmasettings">5.8.1.1. List of valid <cite>cmasettings</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/optimizers/cmaes.html#references">5.8.1.2. References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/scipy.html">5.8.2. Scipy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/nevergrad.html">5.8.3. Nevergrad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/armc.html">5.8.4. Adaptive Rate MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/grid.html">5.8.5. Simple Grid Optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/optimizers/base.html">5.8.6. Optimizer Base Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/optimizers/base.html#baseoptimizer-api">5.8.6.1. BaseOptimizer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/optimizers/base.html#minimizeresult-api">5.8.6.2. MinimizeResult API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/runner/runner.html">5.9. Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/runner/runner.html#optimization-setup">5.9.1. Optimization Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/runner/runner.html#optimization-api">5.9.2. Optimization API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/runner/parallellevels.html">5.10. Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/constraints/constraints.html">5.11. Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/callbacks/callbacks.html">5.12. Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#default-callbacks">5.12.1. Default callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#logger">5.12.2. Logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#timeout">5.12.3. Timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#target-value">5.12.4. Target Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#maximum-iterations">5.12.5. Maximum Iterations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#early-stopping">5.12.6. Early Stopping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#stopfile">5.12.7. Stopfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#time-per-evaluation">5.12.8. Time per Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#load-average">5.12.9. Load Average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#user-defined-callbacks">5.12.10. User-Defined Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/callbacks/callbacks.html#callback-api">5.12.11. Callback API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html">5.13. Loss Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#specifying-the-loss-function">5.13.1. Specifying the loss function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#technical-information">5.13.2. Technical information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#sum-of-squares-error">5.13.3. Sum of Squares Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#sum-of-absolute-errors">5.13.4. Sum of Absolute Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#mean-absolute-error">5.13.5. Mean Absolute Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#root-mean-square-error">5.13.6. Root-Mean-Square Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/lossfunctions/lossfunctions.html#loss-function-api">5.13.7. Loss Function API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/utilities/utilities.html">5.14. Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/utilities/converters.html">5.14.1. ParAMS Converters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/utilities/converters.html#ams-job-to-settings">5.14.1.1. AMS Job to Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/utilities/converters.html#ams-job-to-engine">5.14.1.2. AMS Job to Engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/utilities/history.html">5.14.2. Optimization History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/utilities/plotting.html">5.14.3. Plotting Funcitons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/utilities/public_helpers.html">5.14.4. Helper functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../components/utilities/weights_schemes.html">5.14.5. Weights schemes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/utilities/weights_schemes.html#types-of-weights-schemes">5.14.5.1. Types of weights schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/utilities/weights_schemes.html#examples-of-weight-schemes">5.14.5.2. Examples of weight schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/utilities/weights_schemes.html#weights-schemes-api">5.14.5.3. Weights schemes API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../components/experimental/experimental.html">5.15. Experimental Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../components/experimental/parameter_interfaces.html">5.15.1. Working with Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/experimental/parameter_interfaces.html#active-parameter-search">5.15.1.1. Active Parameter Search</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../components/experimental/data_set.html">5.15.2. Working with Data Sets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../components/experimental/data_set.html#data-set-sensitivity">5.15.2.1. Data Set Sensitivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../components/experimental/data_set.html#normalization-of-data-set-weights">5.15.2.2. Normalization of Data Set Weights</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cite.html">6. Required Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">7. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">8. Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ParAMS</a>
      </nav>
<!--ENDNOSOLR-->

      
      <div class="wy-nav-content">
        <div class="rst-content">
        <!--STARTNOSOLR-->
<div class="header" role="navigation" aria-label="breadcrumbs navigation">
 
  <ul class="wy-breadcrumbs">
    <li><a href="../../ParAMS.html/../../Documentation/index.html">Documentation</a>/</li>
    <li><a href="../../index.html">ParAMS</a>/</li>
      
          <li><a href="../examples.html">3. Tutorials</a>/</li>
      
    <li class="orange-text">3.7. Create training sets with a ResultsImporter</li>
  </ul>
  <p>
 
</div>
<!--ENDNOSOLR-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-training-sets-with-a-resultsimporter">
<span id="resultsimporterdemonstration"></span><h1>3.7. Create training sets with a ResultsImporter<a class="headerlink" href="#create-training-sets-with-a-resultsimporter" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will show you how to use a <a class="reference internal" href="../../components/results_importer/results_importer.html#resultsimporters"><span class="std std-ref">ResultsImporter</span></a> to add the following training data for a water molecule:</p>
<ul class="simple">
<li><a class="reference internal" href="#add-a-singlepoint-calculation-on-the-optimized-geometry"><span class="std std-ref">atomic charges and forces</span></a></li>
<li><a class="reference internal" href="#add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle"><span class="std std-ref">O-H bond length and H-O-H bond angle</span></a></li>
<li><a class="reference internal" href="#add-a-trajectory"><span class="std std-ref">relative energies and forces</span></a> from snapshots in a trajectory</li>
<li><a class="reference internal" href="#add-a-reaction-energy"><span class="std std-ref">reaction energies</span></a> (propene combustion)</li>
</ul>
<p>The training data comes from a UFF force field geometry optimization. The figure below shows some of the properties:
the O atomic charge -0.834, the H atomic charge +0.417, the O-H bond length 0.990 Å, and the H-O-H angle
104.5°.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/water_UFF.png"><img alt="../../_images/water_UFF.png" src="../../_images/water_UFF.png" style="width: 30%;" /></a>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Before starting the tutorial, get familiar with the <a class="reference internal" href="../../components/data_set/data_set.html#data-set"><span class="std std-ref">Data Set</span></a> class, in particular the <a class="reference internal" href="../../components/data_set/data_set.html#datasetdemonstration"><span class="std std-ref">Demonstration: Working with a DataSet</span></a>.</p>
</div>
<p>To follow along with the tutorial, download</p>
<ul class="simple">
<li><a class="reference download internal" download="" href="../../_downloads/7173a3e2dc1061f525a06864639880d3/results_importer_demo.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">results_importer_demo.ipynb</span></code></a> (Jupyter notebook), or</li>
<li><a class="reference download internal" download="" href="../../_downloads/7c6e147b2ae1e97f67649561830059ae/results_importer_demo.py"><code class="xref download docutils literal notranslate"><span class="pre">results_importer_demo.py</span></code></a> (python script).</li>
</ul>
<div class="section" id="run-a-reference-job">
<h2>3.7.1. Run a reference job<a class="headerlink" href="#run-a-reference-job" title="Permalink to this headline">¶</a></h2>
<p>ResultsImporters work on finished reference job. Here, we run a geometry
optimization on a water molecule with the UFF force field. The
calculation is run from python with
<a class="reference external" href="../../../Tutorials/WorkflowsAndAutomation/PythonScriptingWithPLAMS.html">PLAMS</a>,
but you can also run it with the <a class="reference external" href="../../../Tutorials/GettingStarted/GeometryOptimizationOfEthanol.html">graphical user
interface</a>
and skip to <a class="reference external" href="#water-molecule-reference-data">Water molecule reference
data</a>.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scm.params</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">scm.plams</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">init</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;/tmp&#39;</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="s1">&#39;demo_results_importer&#39;</span><span class="p">)</span> <span class="c1"># set path=None to use the current working directory, for example if you do not have /tmp on your system</span>

<span class="c1"># set up a water molecule, can also be set up as mol = Molecule(&#39;water.yz&#39;) or mol = from_smiles(&#39;O&#39;)</span>
<span class="n">mol</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">()</span>
<span class="n">mol</span><span class="o">.</span><span class="n">add_atom</span><span class="p">(</span><span class="n">Atom</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
<span class="n">mol</span><span class="o">.</span><span class="n">add_atom</span><span class="p">(</span><span class="n">Atom</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
<span class="n">mol</span><span class="o">.</span><span class="n">add_atom</span><span class="p">(</span><span class="n">Atom</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>

<span class="n">ref_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">ref_settings</span><span class="o">.</span><span class="n">runscript</span><span class="o">.</span><span class="n">nproc</span> <span class="o">=</span> <span class="mi">1</span>   <span class="c1"># run jobs in serial</span>
<span class="n">ref_settings</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">ams</span><span class="o">.</span><span class="n">task</span> <span class="o">=</span> <span class="s1">&#39;GeometryOptimization&#39;</span>
<span class="n">ref_settings</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">forcefield</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;UFF&#39;</span>        <span class="c1"># run UFF reference calculation</span>
<span class="c1">#ref_settings.input.adf.xc.gga = &#39;PBE&#39;            # run DFT reference calculation with ADF</span>
<span class="c1">#ref_settings.input.band.xc.gga = &#39;PBE&#39;           # run DFT reference calculation with BAND</span>
<span class="c1">#ref_settings.input.dftb.model = &#39;GFN1-xTB&#39;       # run DFTB reference calculation</span>
<span class="c1">#ref_settings.input.reaxff.forcefield = &#39;CHO.ff&#39;  # run ReaxFF reference calculation</span>

<span class="n">water_ams_results_file</span> <span class="o">=</span> <span class="n">AMSJob</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">ref_settings</span><span class="p">,</span>
                                <span class="n">molecule</span><span class="o">=</span><span class="n">mol</span><span class="p">,</span>
                                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;water_ref_geo_opt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">.</span><span class="n">rkfpath</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AMS results file located in &quot;</span> <span class="o">+</span> <span class="n">water_ams_results_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">06</span><span class="p">]</span> <span class="n">PLAMS</span> <span class="n">working</span> <span class="n">folder</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">demo_results_importer</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">06</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">water_ref_geo_opt</span> <span class="n">STARTED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">06</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">water_ref_geo_opt</span> <span class="n">RUNNING</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">06</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">water_ref_geo_opt</span> <span class="n">FINISHED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">06</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">water_ref_geo_opt</span> <span class="n">SUCCESSFUL</span>
<span class="n">AMS</span> <span class="n">results</span> <span class="n">file</span> <span class="n">located</span> <span class="ow">in</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">demo_results_importer</span><span class="o">/</span><span class="n">water_ref_geo_opt</span><span class="o">/</span><span class="n">ams</span><span class="o">.</span><span class="n">rkf</span>
</pre></div>
</div>
<p>This creates directory containing the <strong>ams.rkf</strong> result file. You can
open it in AMSmovie to visualize the trajectory.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/water_UFF_AMSmovie.png"><img alt="../../_images/water_UFF_AMSmovie.png" src="../../_images/water_UFF_AMSmovie.png" style="width: 60%;" /></a>
</div>
</div>
<div class="section" id="water-molecule-reference-data">
<h2>3.7.2. Water molecule reference data<a class="headerlink" href="#water-molecule-reference-data" title="Permalink to this headline">¶</a></h2>
<p>The goal of a ParAMS parametrization is to <strong>as closely as possible
reproduce results from reference calculations</strong>. Four types of results
will be demonstrated for the water molecule reference calculation:</p>
<ul class="simple">
<li>The calculated <strong>charges</strong> and <strong>forces</strong> at the final geometry. The
corresponding job during the parametrization is a <strong>SinglePoint</strong> on
the optimized geometry from the reference calculation</li>
<li>The optimized O-H <strong>bond length</strong> and H-O-H <strong>angle</strong> with the
parametrized engine. The corresponding job during the parametrization
is a <strong>GeometryOptimization</strong> starting from the optimized geometry
from the reference calculation</li>
<li><strong>Relative energies</strong> between multiple snapshots from the geometry
optimization trajectory, and <strong>forces</strong> from those same snapshots</li>
<li>A <strong>reaction energy</strong>, in this case the <strong>propene combustion energy</strong>
for the reaction C<span class="math notranslate nohighlight">\(_3\)</span>H<span class="math notranslate nohighlight">\(_6\)</span>(g) + (9/2)
O<span class="math notranslate nohighlight">\(_2\)</span>(g) → 3 CO<span class="math notranslate nohighlight">\(_2\)</span>(g) + 3 H<span class="math notranslate nohighlight">\(_2\)</span>O(g)</li>
</ul>
</div>
<div class="section" id="initialize-the-resultsimporter">
<h2>3.7.3. Initialize the ResultsImporter<a class="headerlink" href="#initialize-the-resultsimporter" title="Permalink to this headline">¶</a></h2>
<p>You can <strong>set the preferred units</strong> that you like to work in when initializing the ResultsImporter. Here, we set the energy unit to <strong>kcal/mol</strong>, and the force unit to <strong>kcal/mol/angstrom</strong>. If no units are set, some <a class="reference internal" href="../../components/data_set/extractors.html#availableextractors"><span class="std std-ref">default units</span></a> will be used.</p>
<p>You can also specify the default <strong>maximum number of iterations</strong> for geometry optimization jobs. During the parametrization, it is often convenient to limit the maximum number of steps for individual geometry optimization jobs, so that the job is guaranteed to finish in a reasonable amount of time, even for unreasonable parameter combinations.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">results_importer_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">results_importer_settings</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">energy</span> <span class="o">=</span> <span class="s1">&#39;kcal/mol&#39;</span>
<span class="n">results_importer_settings</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">forces</span> <span class="o">=</span> <span class="s1">&#39;kcal/mol/angstrom&#39;</span>
<span class="n">results_importer_settings</span><span class="o">.</span><span class="n">default_go_settings</span><span class="o">.</span><span class="n">MaxIterations</span> <span class="o">=</span> <span class="mi">20</span>   <span class="c1"># set to False to have unlimited iterations</span>
<span class="n">ri</span> <span class="o">=</span> <span class="n">ResultsImporter</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">results_importer_settings</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ri</span></code> variable has a <a class="reference internal" href="../../components/collections/collections.html#job-collection"><span class="std std-ref">Job Collection</span></a>, <a class="reference internal" href="../../components/collections/collections.html#engine-collection"><span class="std std-ref">Engine Collection</span></a>, and <a class="reference internal" href="../../components/data_set/data_set.html#dataset"><span class="std std-ref">Data Set</span></a> (training set):</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">job_collection</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">engine_collection</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;scm.params.core.job_collection.JobCollection&#39;&gt;
&lt;class &#39;scm.params.core.engines.EngineCollection&#39;&gt;
&lt;class &#39;scm.params.core.data_set.DataSet&#39;&gt;
</pre></div>
</div>
</div>
<div class="section" id="add-a-singlepoint-calculation-on-the-optimized-geometry">
<span id="resultsimporterdemonstrationaddsinglejobsinglepoint"></span><h2>3.7.4. Add a singlepoint calculation on the optimized geometry<a class="headerlink" href="#add-a-singlepoint-calculation-on-the-optimized-geometry" title="Permalink to this headline">¶</a></h2>
<p>The jobs in the job collection are run repeatedly during the ParAMS
optimization. They can have any task, for example <code class="docutils literal notranslate"><span class="pre">SinglePoint</span></code> or
<code class="docutils literal notranslate"><span class="pre">GeometryOptimization</span></code>.</p>
<p>ResultsImporters add jobs to the job collection. The <strong>molecular
structure is taken from the reference job</strong>, but the Task is not. <strong>The
Task for jobs added via a results importer defaults to</strong>
<code class="docutils literal notranslate"><span class="pre">SinglePoint</span></code>, even if the reference job was a
<code class="docutils literal notranslate"><span class="pre">GeometryOptimization</span></code>!</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">add_singlejob</span><span class="p">(</span><span class="n">water_ams_results_file</span><span class="p">,</span>   <span class="c1"># path to ams.rkf or to the jobname.results folder</span>
                 <span class="n">properties</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;charges&#39;</span><span class="p">,</span> <span class="s1">&#39;forces&#39;</span><span class="p">],</span>
                 <span class="n">name</span><span class="o">=</span><span class="s1">&#39;water_singlepoint&#39;</span><span class="p">)</span> <span class="c1"># custom name for this job</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;charges(&#39;water_singlepoint&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;forces(&#39;water_singlepoint&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_singlejob</span></code> results importer has affected the JobCollection,
DataSet, and EngineCollection inside <code class="docutils literal notranslate"><span class="pre">ri</span></code> variable. It returns the
expressions added to the DataSet (see more below).</p>
<p>The job ‘water_singlepoint’ has been added to the job collection:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">job_collection</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">JobCollection</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;water_singlepoint&#39;</span>
<span class="n">ReferenceEngineID</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">AMSInput</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">properties</span>
     <span class="n">gradients</span> <span class="n">Yes</span>
   <span class="n">End</span>
   <span class="n">system</span>
     <span class="n">Atoms</span>
                 <span class="n">O</span>      <span class="o">-</span><span class="mf">0.0546774806</span>      <span class="o">-</span><span class="mf">0.1402484791</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>       <span class="mf">0.9005794476</span>       <span class="mf">0.1209122488</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>      <span class="o">-</span><span class="mf">0.5459019670</span>       <span class="mf">0.7193362302</span>       <span class="mf">0.0000000000</span>
     <span class="n">End</span>
   <span class="n">End</span>
   <span class="n">task</span> <span class="n">singlepoint</span>
<span class="n">Origin</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">demo_results_importer</span><span class="o">/</span><span class="n">water_ref_geo_opt</span><span class="o">/</span><span class="n">ams</span><span class="o">.</span><span class="n">rkf</span>
<span class="n">OriginalEnergyHartree</span><span class="p">:</span> <span class="mf">1.280587231661792e-07</span>
<span class="n">_Hash_1</span><span class="p">:</span> <span class="mi">2</span><span class="n">f7e7abbc8b0b00713beb419d3a5d8cd3b7bb2dbfa536f87b345ec8715d450d6</span>
<span class="n">_Hash_2</span><span class="p">:</span> <span class="mf">23176273e7</span><span class="n">d0a59e60f2ebb9b58b048d608e41d0cfd6b50bda3c427fc6876475</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Above, the <strong>AMSInput</strong> block contains input to the <em>AMS Driver</em>,
defining a job that will be repeatedly run during the parametrization.
The <strong>Atoms</strong> block contains the optimized water molecule from the
reference UFF calculation, and the <strong>task</strong> is set to <strong>SinglePoint</strong>.
Because we requested the forces, <strong>properties gradients yes</strong> is set.
This guarantees that we will be able to extract the forces during the
parametrization.</p>
<p>The <strong>Origin</strong>, <strong>OriginalEnergyHartree</strong>, <strong>Hash_1</strong> and <strong>Hash_2</strong>
are only used internally by the ResultsImporter. For example, the hashes
help to prevent adding the same job twice to the job collection.</p>
<p>The <strong>ReferenceEngineID</strong> contains a reference to an engine in the
<strong>EngineCollection</strong>. This entry in the engine collection contains the
settings for the reference job that was run in the beginning. It is not
strictly needed for the parametrization.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">engine_collection</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">EngineCollection</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;forcefield;;type;UFF;&#39;</span>
<span class="n">AMSInput</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">Engine</span> <span class="n">forcefield</span>
     <span class="nb">type</span> <span class="n">UFF</span>
   <span class="n">EndEngine</span>
<span class="o">...</span>
</pre></div>
</div>
<p><strong>The data_set (training set)</strong> contains two entries</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">DataSet</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">charges</span><span class="p">(</span><span class="s1">&#39;water_singlepoint&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.83399999</span><span class="p">,</span>  <span class="mf">0.417</span>     <span class="p">,</span>  <span class="mf">0.417</span>     <span class="p">])</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">au</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">Charges</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_singlepoint</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">forces</span><span class="p">(</span><span class="s1">&#39;water_singlepoint&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">3.557463138142747</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">array</span><span class="p">([[</span> <span class="mf">0.25021751</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01895832</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.03370832</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.12831032</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.21650919</span><span class="p">,</span>  <span class="mf">0.14726863</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]])</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kcal</span><span class="o">/</span><span class="n">mol</span><span class="o">/</span><span class="n">angstrom</span><span class="p">,</span> <span class="mf">1185.8210460475823</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">Forces</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_singlepoint</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The two data_set entries have <em>ReferenceValues</em> taken from the
reference job. The <em>Unit</em> for the forces is kcal/mol/angstrom, which was
specified as the preferred unit when initializing the ResultsImporter.
The <em>Sigma</em> values correspond to the default sigma values for the
<code class="docutils literal notranslate"><span class="pre">charges</span></code> and <code class="docutils literal notranslate"><span class="pre">forces</span></code> extractors. The <em>Weight</em> default value is 1.0</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../../components/data_set/data_set.html#data-set"><span class="std std-ref">Dataset documentation</span></a></li>
<li><a class="reference internal" href="../../components/data_set/data_set.html#sigmavsweight"><span class="std std-ref">Sigma vs. weight: What is the difference?</span></a></li>
<li><a class="reference internal" href="../../components/data_set/extractors.html#availableextractors"><span class="std std-ref">Available Extractors</span></a> with default units and sigma values</li>
</ul>
</div>
<p>The results importer has added three pieces of metadata: <strong>Group,
SubGroup, and INFO_ReferenceEngineIDs</strong>. The <strong>Group</strong> specifies the
type of quantity, and the <strong>SubGroup</strong> from which job the reference data
comes. The <strong>Group</strong> and <strong>SubGroup</strong> can be used to help with
postprocessing results. The <strong>INFO_ReferenceEngineIDs</strong> contains all
the reference engines that were used in the calculation of the reference
value.</p>
<p>You can change the <em>Weight</em> or <em>Sigma</em> just like in a standalone
DataSet:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="mf">3.14</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">charges</span><span class="p">(</span><span class="s1">&#39;water_singlepoint&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">3.14</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">0.2</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.83399999</span><span class="p">,</span>  <span class="mf">0.417</span>     <span class="p">,</span>  <span class="mf">0.417</span>     <span class="p">])</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">au</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">Charges</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_singlepoint</span>
</pre></div>
</div>
<p>Alternatively, you can also specify the weight and sigma values when
calling the <code class="docutils literal notranslate"><span class="pre">add_singlejob</span></code> results importer (see next section).</p>
</div>
<div class="section" id="add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle">
<span id="resultsimporterdemonstrationaddsinglejobgeometryoptimization"></span><h2>3.7.5. Add a geometry optimization job extracting the bond length and bond angle<a class="headerlink" href="#add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle" title="Permalink to this headline">¶</a></h2>
<p>To fit structural results like bond lengths or bond angles, it is
necessary to run <code class="docutils literal notranslate"><span class="pre">GeometryOptimization</span></code> jobs during the
parametrization. Use the <code class="docutils literal notranslate"><span class="pre">task</span></code> keyword in <code class="docutils literal notranslate"><span class="pre">add_singlejob()</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">properties</span></code> can either be given in a list as before, or a
<code class="docutils literal notranslate"><span class="pre">dict</span></code> with more details (set <em>weight</em>, <em>sigma</em>, and <em>unit</em>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">distance</span></code> and <code class="docutils literal notranslate"><span class="pre">angle</span></code> extractors accept the atom ids of the
atoms. The atom ids start with 0, so atom 0 is the first atom (the O
atom), atom 1 is the second atom (one of the H atoms), and atom 2 is the
the third atom (the other H atom).</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">add_singlejob</span><span class="p">(</span><span class="n">water_ams_results_file</span><span class="p">,</span>         <span class="c1"># path to ams.rkf</span>
                 <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                     <span class="s1">&#39;distance(0,1)&#39;</span><span class="p">:</span> <span class="p">{</span>  <span class="c1"># extract O-H bond length</span>
                         <span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
                         <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                      <span class="p">},</span>
                      <span class="s1">&#39;angle(1,0,2)&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="c1">#  H-O-H angle, use default weight and sigma</span>
                 <span class="p">},</span>
                 <span class="n">task</span><span class="o">=</span><span class="s1">&#39;GeometryOptimization&#39;</span><span class="p">,</span>    <span class="c1"># set task to GeometryOptimization</span>
                 <span class="n">name</span><span class="o">=</span><span class="s1">&#39;water_geo_opt&#39;</span><span class="p">)</span>           <span class="c1"># set a custom name</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;distance(&#39;water_geo_opt&#39;,0,1)&quot;</span><span class="p">,</span> <span class="s2">&quot;angle(&#39;water_geo_opt&#39;,1,0,2)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">job_collection</span><span class="p">[</span><span class="s1">&#39;water_geo_opt&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ReferenceEngineID</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">AMSInput</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">geometryoptimization</span>
     <span class="n">MaxIterations</span> <span class="mi">20</span>
     <span class="n">PretendConverged</span> <span class="n">Yes</span>
   <span class="n">End</span>
   <span class="n">system</span>
     <span class="n">Atoms</span>
                 <span class="n">O</span>      <span class="o">-</span><span class="mf">0.0546774806</span>      <span class="o">-</span><span class="mf">0.1402484791</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>       <span class="mf">0.9005794476</span>       <span class="mf">0.1209122488</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>      <span class="o">-</span><span class="mf">0.5459019670</span>       <span class="mf">0.7193362302</span>       <span class="mf">0.0000000000</span>
     <span class="n">End</span>
   <span class="n">End</span>
   <span class="n">task</span> <span class="n">geometryoptimization</span>
<span class="n">Origin</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">demo_results_importer</span><span class="o">/</span><span class="n">water_ref_geo_opt</span><span class="o">/</span><span class="n">ams</span><span class="o">.</span><span class="n">rkf</span>
<span class="n">OriginalEnergyHartree</span><span class="p">:</span> <span class="mf">1.280587231661792e-07</span>
<span class="n">_Hash_1</span><span class="p">:</span> <span class="mi">5</span><span class="n">d9741178ce4d1ce13e4797af21815ab3346dfca206c2da9a934f72b091ec656</span>
<span class="n">_Hash_2</span><span class="p">:</span> <span class="mi">12</span><span class="n">ae5bc2c4266f8eda52b423d2d8a74b409d2fc573992d30ba7b4745d2fdf764</span>
</pre></div>
</div>
<p>Above, the <strong>task</strong> is set to <strong>GeometryOptimization</strong> as requested.
There’s also a <strong>geometryoptimization</strong> block setting the maximum number
of iterations to 20, as was specified in the <a class="reference external" href="#initialize-the-resultsimporter">ResultsImporter
initialization</a>.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>   <span class="c1"># the two last added entries</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">distance</span><span class="p">(</span><span class="s1">&#39;water_geo_opt&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="mf">0.9903134477739629</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">angstrom</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">Distances</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_geo_opt</span>
<span class="p">,</span> <span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">angle</span><span class="p">(</span><span class="s1">&#39;water_geo_opt&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="mf">104.45592580880005</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">degree</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">Angles</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_geo_opt</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The UFF-optimized water molecule has an O-H bond length of 0.99
angstrom, and an H-O-H angle of 104.46 degrees.</p>
</div>
<div class="section" id="add-a-trajectory">
<span id="resultsimporterdemonstrationaddtrajectory"></span><h2>3.7.6. Add a trajectory<a class="headerlink" href="#add-a-trajectory" title="Permalink to this headline">¶</a></h2>
<p>If you have a trajectory file, for example from a geometry optimization
or molecular dynamics simulation, you can extract reference results from
N equally spaced frames in the trajectory with the
<code class="docutils literal notranslate"><span class="pre">add_trajectory_singlepoints()</span></code> results importer. The following
properties are supported:</p>
<ul class="simple">
<li>energy</li>
<li>relative_energies</li>
<li>forces</li>
<li>stresstensor</li>
</ul>
<p>The properties can only be extracted if they are stored on the
trajectory file. For example, forces are not stored by default in AMS MD
simulations, but must be enabled before running the simulation.</p>
<p>Below the relative_energies and forces from the UFF geometry
optimization on the water molecule are extracted. The
<code class="docutils literal notranslate"><span class="pre">relative_to:</span> <span class="pre">min_global</span></code> ensures that the global minimum is included,
and that energies are relative to that one. Setting N = 4 will give 3
relative energies and 4 forces added to the data_set.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_expr</span> <span class="o">=</span> <span class="n">ri</span><span class="o">.</span><span class="n">add_trajectory_singlepoints</span><span class="p">(</span><span class="n">water_ams_results_file</span><span class="p">,</span>
                             <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                                <span class="s1">&#39;relative_energies&#39;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="s1">&#39;relative_to&#39;</span><span class="p">:</span> <span class="s1">&#39;min_global&#39;</span><span class="p">,</span>
                                <span class="p">},</span>
                                <span class="s1">&#39;forces&#39;</span><span class="p">:</span> <span class="p">{},</span>
                             <span class="p">},</span>
                             <span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># get 4 frames</span>

<span class="c1"># print only expression and reference value, the full data_set entry can also be printed: print(ri.data_set[expression])</span>
<span class="k">for</span> <span class="n">expression</span> <span class="ow">in</span> <span class="n">new_expr</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">reference</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame001&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame041&#39;</span><span class="p">)</span>
<span class="mf">13.453134044851744</span>

<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame014&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame041&#39;</span><span class="p">)</span>
<span class="mf">0.33548696220146945</span>

<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame027&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame041&#39;</span><span class="p">)</span>
<span class="mf">0.00018039405874830625</span>

<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame001&#39;</span><span class="p">)</span>
<span class="p">[[</span><span class="o">-</span><span class="mf">19.33638687</span> <span class="o">-</span><span class="mf">71.03436494</span>  <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">11.76011501</span>  <span class="mf">38.24820485</span>  <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span> <span class="mf">31.09650188</span>  <span class="mf">32.7861601</span>   <span class="o">-</span><span class="mf">0.</span>        <span class="p">]]</span>

<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame014&#39;</span><span class="p">)</span>
<span class="p">[[</span> <span class="mf">10.06061762</span>  <span class="mf">17.4865047</span>   <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">20.90983167</span>  <span class="o">-</span><span class="mf">5.01172288</span>  <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span> <span class="mf">10.84921405</span> <span class="o">-</span><span class="mf">12.47478182</span>  <span class="o">-</span><span class="mf">0.</span>        <span class="p">]]</span>

<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame027&#39;</span><span class="p">)</span>
<span class="p">[[</span><span class="o">-</span><span class="mf">0.01951492</span> <span class="o">-</span><span class="mf">0.66275872</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span> <span class="mf">0.28632304</span> <span class="o">-</span><span class="mf">0.04589373</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">0.26680812</span>  <span class="mf">0.70865244</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]]</span>

<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;water_ref_geo_opt_frame041&#39;</span><span class="p">)</span>
<span class="p">[[</span> <span class="mf">0.20235591</span>  <span class="mf">0.00085826</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">0.0481112</span>  <span class="o">-</span><span class="mf">0.2308769</span>  <span class="o">-</span><span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">0.15424472</span>  <span class="mf">0.23001864</span> <span class="o">-</span><span class="mf">0.</span>        <span class="p">]]</span>
</pre></div>
</div>
<p>The job collection contains single point calculations with molecules
taken from the respective frames in the reference trajectory. Above we
didn’t specify a <code class="docutils literal notranslate"><span class="pre">name</span></code> when calling <code class="docutils literal notranslate"><span class="pre">add_trajectory_singlepoints</span></code>,
so the name is guessed from the reference job.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">water_ref_geo_opt_frame001</span></code> corresponds to the input
molecule defined at the beginning of this demonstration:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">job_collection</span><span class="p">[</span><span class="s1">&#39;water_ref_geo_opt_frame001&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ReferenceEngineID</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">AMSInput</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">properties</span>
     <span class="n">gradients</span> <span class="n">Yes</span>
   <span class="n">End</span>
   <span class="n">system</span>
     <span class="n">Atoms</span>
                 <span class="n">O</span>       <span class="mf">0.0000000000</span>       <span class="mf">0.0000000000</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>       <span class="mf">1.0000000000</span>       <span class="mf">0.0000000000</span>       <span class="mf">0.0000000000</span>
                 <span class="n">H</span>      <span class="o">-</span><span class="mf">0.7000000000</span>       <span class="mf">0.7000000000</span>       <span class="mf">0.0000000000</span>
     <span class="n">End</span>
     <span class="n">BondOrders</span>
        <span class="mi">1</span> <span class="mi">2</span> <span class="mf">1.0</span>
        <span class="mi">1</span> <span class="mi">3</span> <span class="mf">1.0</span>
     <span class="n">End</span>
   <span class="n">End</span>
   <span class="n">task</span> <span class="n">singlepoint</span>
<span class="n">Frame</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">Origin</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">demo_results_importer</span><span class="o">/</span><span class="n">water_ref_geo_opt</span><span class="o">/</span><span class="n">ams</span><span class="o">.</span><span class="n">rkf</span>
<span class="n">OriginalEnergyHartree</span><span class="p">:</span> <span class="mf">0.02143906182312575</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_trajectory_singlepoints</span></code> results importer adds another
metadata to the job_collection: <code class="docutils literal notranslate"><span class="pre">Frame</span></code>, corresponding to the frame
in the <code class="docutils literal notranslate"><span class="pre">Origin</span></code> file from which the input molecule was taken.</p>
<p>The frames to extract can also be specified with</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">add_trajectory_singlepoints(...,</span> <span class="pre">start=0,</span> <span class="pre">end=40,</span> <span class="pre">step=10)</span></code> to extract every 10th frame between steps 0 (inclusive) and 40 (exclusive), or</li>
<li><code class="docutils literal notranslate"><span class="pre">add_trajectory_singlepoints(...,</span> <span class="pre">indices=[0,4,5])</span></code> to extract the first, fifth, and sixth frames.</li>
</ul>
<p>For more details, see <a class="reference internal" href="../../components/results_importer/api.html#scm.params.core.results_importer.ResultsImporter.add_trajectory_singlepoints" title="scm.params.core.results_importer.ResultsImporter.add_trajectory_singlepoints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_trajectory_singlepoints()</span></code></a>.</p>
</div>
<div class="section" id="add-a-reaction-energy">
<span id="resultsimporterdemonstrationaddreactionenergy"></span><h2>3.7.7. Add a reaction energy<a class="headerlink" href="#add-a-reaction-energy" title="Permalink to this headline">¶</a></h2>
<p>Add a reaction energy with the <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddreactionenergy"><span class="std std-ref">add_reaction_energy</span></a> results importer. The chemical reaction will be <strong>automatically balanced</strong>.</p>
<p>Here we demonstrate <strong>propene combustion</strong>:
C<span class="math notranslate nohighlight">\(_3\)</span>H<span class="math notranslate nohighlight">\(_6\)</span>(g) + (9/2) O<span class="math notranslate nohighlight">\(_2\)</span>(g) → 3
CO<span class="math notranslate nohighlight">\(_2\)</span>(g) + 3 H<span class="math notranslate nohighlight">\(_2\)</span>O(g). We will first need to
calculate three more reference jobs for C<span class="math notranslate nohighlight">\(_3\)</span>H<span class="math notranslate nohighlight">\(_6\)</span>
(propene), O<span class="math notranslate nohighlight">\(_2\)</span> and CO<span class="math notranslate nohighlight">\(_2\)</span>. <strong>Note that this reaction
energy is described very poorly with UFF</strong> (ΔH⁰ = -1.4 kcal/mol,
experimental value: -491.8 kcal/mol). To get a more realistic energy,
use a different reference engine.</p>
<p>Below, the <code class="docutils literal notranslate"><span class="pre">from_smiles</span></code> function from PLAMS converts a SMILES string
to a <code class="docutils literal notranslate"><span class="pre">Molecule</span></code>. Before running the jobs, <code class="docutils literal notranslate"><span class="pre">init()</span></code> needs to have
been called (that was done in <a class="reference external" href="#run-a-reference-job">Run a reference
job</a>).</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">results_files</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">smiles</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">,</span> <span class="s1">&#39;O=O&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;propene&#39;</span><span class="p">,</span> <span class="s1">&#39;CC=C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;CO2&#39;</span><span class="p">,</span> <span class="s1">&#39;O=C=O&#39;</span><span class="p">):</span>
    <span class="n">results_files</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">AMSJob</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">ref_settings</span><span class="p">,</span> <span class="n">molecule</span><span class="o">=</span><span class="n">from_smiles</span><span class="p">(</span><span class="n">smiles</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">.</span><span class="n">rkfpath</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_files</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">O2</span> <span class="n">STARTED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">O2</span> <span class="n">RUNNING</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">O2</span> <span class="n">FINISHED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">O2</span> <span class="n">SUCCESSFUL</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">propene</span> <span class="n">STARTED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">propene</span> <span class="n">RUNNING</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">propene</span> <span class="n">FINISHED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">propene</span> <span class="n">SUCCESSFUL</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">CO2</span> <span class="n">STARTED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">CO2</span> <span class="n">RUNNING</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">CO2</span> <span class="n">FINISHED</span>
<span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">JOB</span> <span class="n">CO2</span> <span class="n">SUCCESSFUL</span>
<span class="p">{</span><span class="s1">&#39;O2&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/demo_results_importer/O2/ams.rkf&#39;</span><span class="p">,</span> <span class="s1">&#39;propene&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/demo_results_importer/propene/ams.rkf&#39;</span><span class="p">,</span> <span class="s1">&#39;CO2&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/demo_results_importer/CO2/ams.rkf&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">add_reaction_energy</span><span class="p">(</span><span class="n">reactants</span><span class="o">=</span><span class="p">(</span><span class="n">results_files</span><span class="p">[</span><span class="s1">&#39;propene&#39;</span><span class="p">],</span> <span class="n">results_files</span><span class="p">[</span><span class="s1">&#39;O2&#39;</span><span class="p">]),</span>
                       <span class="n">products</span><span class="o">=</span><span class="p">(</span><span class="n">results_files</span><span class="p">[</span><span class="s1">&#39;CO2&#39;</span><span class="p">],</span> <span class="n">water_ams_results_file</span><span class="p">),</span>
                       <span class="n">normalization</span><span class="o">=</span><span class="s1">&#39;r0&#39;</span><span class="p">,</span>   <span class="c1"># make the coefficient for the first reactant (propene)</span>
                       <span class="n">normalization_value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="c1">#  == 1.0</span>
                       <span class="n">task</span><span class="o">=</span><span class="s1">&#39;GeometryOptimization&#39;</span><span class="p">,</span>
                       <span class="n">sigma</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="o">+</span><span class="mf">3.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;CO2&#39;</span><span class="p">)</span><span class="o">+</span><span class="mf">3.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_geo_opt&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;propene&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">4.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">5.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.399510907986646</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kcal</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">627.5094737775374</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">ReactionEnergy</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_reaction_energy</span></code> results importer also works for reactions
<strong>without reference jobs</strong>. If you know the reaction energy, for example
from experimental data or from computational codes not supported by
ParAMS, it is enough to simply pass in <code class="docutils literal notranslate"><span class="pre">Molecule</span></code>s instead of
ams.rkf files. This is demonstrated below for the reaction
C<span class="math notranslate nohighlight">\(_2\)</span>H<span class="math notranslate nohighlight">\(_4\)</span>(g) + HCl(g) →
C<span class="math notranslate nohighlight">\(_2\)</span>H<span class="math notranslate nohighlight">\(_5\)</span>Cl(g)</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">add_reaction_energy</span><span class="p">(</span><span class="n">reactants</span><span class="o">=</span><span class="p">[</span><span class="n">from_smiles</span><span class="p">(</span><span class="s1">&#39;C=C&#39;</span><span class="p">),</span> <span class="n">from_smiles</span><span class="p">(</span><span class="s1">&#39;Cl&#39;</span><span class="p">)],</span>
                       <span class="n">products</span><span class="o">=</span><span class="p">[</span><span class="n">from_smiles</span><span class="p">(</span><span class="s1">&#39;CCCl&#39;</span><span class="p">)],</span>
                       <span class="n">reactants_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ethylene&#39;</span><span class="p">,</span> <span class="s1">&#39;HCl&#39;</span><span class="p">],</span>
                       <span class="n">products_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chloroethane&#39;</span><span class="p">],</span>
                       <span class="n">task</span><span class="o">=</span><span class="s1">&#39;GeometryOptimization&#39;</span><span class="p">,</span>
                       <span class="n">normalization</span><span class="o">=</span><span class="s1">&#39;r0&#39;</span><span class="p">,</span>
                       <span class="n">reference</span><span class="o">=-</span><span class="mf">17.1</span><span class="p">,</span>
                       <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;kcal/mol&#39;</span><span class="p">,</span>
                       <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
                           <span class="s1">&#39;Source&#39;</span><span class="p">:</span> <span class="s1">&#39;J. Appl. Chem. USSR, 1979, 52, 1439-1442&#39;</span><span class="p">,</span>
                       <span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="o">+</span><span class="mf">1.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;chloroethane&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;ethylene&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;HCl&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">1.2550189475550748</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">-</span><span class="mf">17.1</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kcal</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">627.5094737775374</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">ReactionEnergy</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">J</span><span class="o">.</span> <span class="n">Appl</span><span class="o">.</span> <span class="n">Chem</span><span class="o">.</span> <span class="n">USSR</span><span class="p">,</span> <span class="mi">1979</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">1439</span><span class="o">-</span><span class="mi">1442</span>
</pre></div>
</div>
<p>The jobs added to the job collection will be run during the
parametrization. The <strong>ReferenceEngineID</strong> is set to None, since the
molecule did not come from a reference calculation but simply as a set
of XYZ coordinates. For example, the job <code class="docutils literal notranslate"><span class="pre">'chloroethane'</span></code> looks like
this:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">job_collection</span><span class="p">[</span><span class="s1">&#39;chloroethane&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ReferenceEngineID</span><span class="p">:</span> <span class="kc">None</span>
<span class="n">AMSInput</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">geometryoptimization</span>
     <span class="n">MaxIterations</span> <span class="mi">20</span>
     <span class="n">PretendConverged</span> <span class="n">Yes</span>
   <span class="n">End</span>
   <span class="n">system</span>
     <span class="n">Atoms</span>
                 <span class="n">C</span>       <span class="mf">0.7764540253</span>      <span class="o">-</span><span class="mf">0.0718094540</span>       <span class="mf">0.0077352022</span>
                 <span class="n">C</span>      <span class="o">-</span><span class="mf">0.7405504503</span>      <span class="o">-</span><span class="mf">0.0784441089</span>      <span class="o">-</span><span class="mf">0.0210560326</span>
                <span class="n">Cl</span>      <span class="o">-</span><span class="mf">1.2082117678</span>       <span class="mf">1.6413909680</span>      <span class="o">-</span><span class="mf">0.1197007086</span>
                 <span class="n">H</span>       <span class="mf">1.1086665750</span>       <span class="mf">0.3584893732</span>       <span class="mf">0.9692166602</span>
                 <span class="n">H</span>       <span class="mf">1.2119761077</span>       <span class="mf">0.4960752072</span>      <span class="o">-</span><span class="mf">0.8245467312</span>
                 <span class="n">H</span>       <span class="mf">1.0858003363</span>      <span class="o">-</span><span class="mf">1.1282582526</span>      <span class="o">-</span><span class="mf">0.1074755487</span>
                 <span class="n">H</span>      <span class="o">-</span><span class="mf">1.0878268370</span>      <span class="o">-</span><span class="mf">0.5387769551</span>       <span class="mf">0.9353459698</span>
                 <span class="n">H</span>      <span class="o">-</span><span class="mf">1.1463079893</span>      <span class="o">-</span><span class="mf">0.6786667777</span>      <span class="o">-</span><span class="mf">0.8395188111</span>
     <span class="n">End</span>
     <span class="n">BondOrders</span>
        <span class="mi">1</span> <span class="mi">2</span> <span class="mf">1.0</span>
        <span class="mi">2</span> <span class="mi">3</span> <span class="mf">1.0</span>
        <span class="mi">1</span> <span class="mi">4</span> <span class="mf">1.0</span>
        <span class="mi">1</span> <span class="mi">5</span> <span class="mf">1.0</span>
        <span class="mi">1</span> <span class="mi">6</span> <span class="mf">1.0</span>
        <span class="mi">2</span> <span class="mi">7</span> <span class="mf">1.0</span>
        <span class="mi">2</span> <span class="mi">8</span> <span class="mf">1.0</span>
     <span class="n">End</span>
   <span class="n">End</span>
   <span class="n">task</span> <span class="n">geometryoptimization</span>
</pre></div>
</div>
</div>
<div class="section" id="training-set-validation-set-and-other-data-sets">
<span id="resultsimporterdemonstrationdatasets"></span><h2>3.7.8. Training set, validation set, and other data sets<a class="headerlink" href="#training-set-validation-set-and-other-data-sets" title="Permalink to this headline">¶</a></h2>
<p>ParAMS can handle an arbitrary number of data sets. Often during
parametrization, it is a good idea to have a validation set. During the
parameter fitting, the loss function for the training set is minimized,
and the loss function for the validation set is monitored to make sure
that there is no overfitting.</p>
<p>By default, the data set entries added with a results importer are added
to the <strong>training set</strong>. To specify a different data set, simply add for
example <code class="docutils literal notranslate"><span class="pre">data_set='validation_set'</span></code> to the results importer. For
example:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">add_singlejob</span><span class="p">(</span><span class="n">water_ams_results_file</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;energy&#39;</span><span class="p">],</span> <span class="n">data_set</span><span class="o">=</span><span class="s1">&#39;validation_set&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;energy(&#39;water_singlepoint&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The training set can be accessed with either <code class="docutils literal notranslate"><span class="pre">ri.data_set</span></code> or
<code class="docutils literal notranslate"><span class="pre">ri.get_data_set('training_set')</span></code>. The validation set is accessed with
<code class="docutils literal notranslate"><span class="pre">ri.get_data_set('validation_set')</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ri</span><span class="o">.</span><span class="n">get_data_set</span><span class="p">(</span><span class="s1">&#39;validation_set&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">DataSet</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">energy</span><span class="p">(</span><span class="s1">&#39;water_singlepoint&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">1.2550189475550748</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="mf">8.035806198663245e-05</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kcal</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">627.5094737775374</span>
<span class="n">Group</span><span class="p">:</span> <span class="n">TotalEnergy</span>
<span class="n">INFO_ReferenceEngineIDs</span><span class="p">:</span> <span class="n">forcefield</span><span class="p">;;</span><span class="nb">type</span><span class="p">;</span><span class="n">UFF</span><span class="p">;</span>
<span class="n">SubGroup</span><span class="p">:</span> <span class="n">water_singlepoint</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="exit-plams">
<h2>3.7.9. Exit PLAMS<a class="headerlink" href="#exit-plams" title="Permalink to this headline">¶</a></h2>
<p>If you used PLAMS to run the reference jobs, the <code class="docutils literal notranslate"><span class="pre">finish()</span></code> function
<a class="reference external" href="../../../plams/started.html#running-plams">should be called at the
end</a>, if <code class="docutils literal notranslate"><span class="pre">init()</span></code> was
called at the beginning.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">finish</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">17.09</span><span class="o">|</span><span class="mi">09</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">07</span><span class="p">]</span> <span class="n">PLAMS</span> <span class="n">run</span> <span class="n">finished</span><span class="o">.</span> <span class="n">Goodbye</span>
</pre></div>
</div>
</div>
<div class="section" id="save-to-disk">
<span id="resultsimporterdemonstrationsavetodisk"></span><h2>3.7.10. Save to disk<a class="headerlink" href="#save-to-disk" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../../components/results_importer/api.html#scm.params.core.results_importer.ResultsImporter.store" title="scm.params.core.results_importer.ResultsImporter.store"><code class="xref py py-meth docutils literal notranslate"><span class="pre">store()</span></code></a> method saves</p>
<ul class="simple">
<li>the job collection to <code class="docutils literal notranslate"><span class="pre">job_collection.yaml</span></code> and
<code class="docutils literal notranslate"><span class="pre">job_collection.pkl</span></code></li>
<li>the training set to <code class="docutils literal notranslate"><span class="pre">training_set.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">training_set.pkl</span></code></li>
<li>any other data sets, e.g. <code class="docutils literal notranslate"><span class="pre">validation_set.yaml</span></code> and
<code class="docutils literal notranslate"><span class="pre">validation_set.pkl</span></code></li>
<li>the engine collection to <code class="docutils literal notranslate"><span class="pre">engine_collection.yaml</span></code></li>
<li>the settings used for the results importer to
<code class="docutils literal notranslate"><span class="pre">results_importer_settings.yaml</span></code></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> files are text based, and the <code class="docutils literal notranslate"><span class="pre">.pkl</span></code> files are binary.
The binary files are faster to load than the text files.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ri</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="s1">&#39;saved_files&#39;</span><span class="p">,</span> <span class="n">backup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;saved_files/job_collection.yaml&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/job_collection.pkl&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/engine_collection.yaml&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/results_importer_settings.yaml&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/training_set.yaml&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/training_set.pkl&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/validation_set.yaml&#39;</span><span class="p">,</span>
 <span class="s1">&#39;saved_files/validation_set.pkl&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can later load those files into another results importer in a
separate script. It is in general recommended to repeatedly extend a
data_set, rather than to create many small data_sets and try to merge
them all at once. This is because entries in the job_collection and
data_set need to be unique.</p>
<p>To load from files, initialize the results importer with</p>
<div class="code text highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_ri</span> <span class="o">=</span> <span class="n">ResultsImporter</span><span class="p">(</span><span class="n">job_collection</span><span class="o">=</span><span class="s1">&#39;/path/job_collection.pkl&#39;</span><span class="p">,</span>
                         <span class="n">data_set</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;training_set&#39;</span><span class="p">:</span> <span class="s1">&#39;/path/training_set.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_set&#39;</span><span class="p">:</span> <span class="s1">&#39;/path/validation_set.yaml&#39;</span><span class="p">},</span>
                         <span class="n">engine_collection</span><span class="o">=</span><span class="s1">&#39;/path/engine_collection.yaml&#39;</span><span class="p">,</span>
                         <span class="n">settings</span><span class="o">=</span><span class="s1">&#39;/path/results_importer_settings.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="more-resultsimporters">
<h2>3.7.11. More ResultsImporters<a class="headerlink" href="#more-resultsimporters" title="Permalink to this headline">¶</a></h2>
<p>This tutorial showed you the <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddsinglejob"><span class="std std-ref">add_singlejob</span></a>, <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddtrajectory"><span class="std std-ref">add_trajectory_singlepoints</span></a>, and <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddreactionenergy"><span class="std std-ref">add_reaction_energy</span></a> ResultsImporters. It is possible to set even more options than were shown here. For details, see the <a class="reference internal" href="../../components/results_importer/api.html#resultsimporters-api"><span class="std std-ref">ResultsImporters API</span></a>.</p>
<p>You can also use the <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddneb"><span class="std std-ref">add_neb_singlepoints</span></a>, <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddpesscan"><span class="std std-ref">add_pesscan_singlepoints</span></a> and <a class="reference internal" href="../../components/results_importer/overview.html#resultsimporteraddpesexploration"><span class="std std-ref">add_pesexploration_singlepoints</span></a> for AMS NEB, PES scans and PES exploration jobs. For details, see the documentation pages.</p>
</div>
</div>


           </div>
          </div>
          <!--STARTNOSOLR-->
<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dftb_zno/dftb_zno.html" class="btn btn-neutral float-right" title="3.8. SCC-DFTB repulsive potential for ZnO" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../lj_ar/lj_ar_python.html" class="btn btn-neutral" title="3.6. The params Python library" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/> 

<!-- start :: footer -->
		<footer class="site-footer block">
			<div class="container">
				<div class="row">
					<div class="footer-column" >
	<ul>
		<li id="nav_menu-2" class="widget widget_nav_menu "><h3>Application Areas</h3><div class="menu-application-areas-container"><ul id="menu-application-areas" class="menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/batteries/">Batteries &#038; PVs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/chemical-bonding-analysis/">Bonding Analysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/catalysis/">Catalysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/heavy-elements/">Heavy Elements</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/inorganic-chemistry/">Inorganic Chemistry</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/pharma/">Life Sciences</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/materials-science/">Materials Science</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/nanotechnology/">Nanotechnology</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/oil-and-gas/">Oil and Gas</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/organic-electronics/">Organic Electronics</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/polymers/">Polymers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/spectroscopy/">Spectroscopy</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/teaching/">Teaching</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-7" class="widget widget_nav_menu "><h3>Products</h3><div class="menu-product-navigation-container"><ul id="menu-product-navigation" class="menu">
<li id="menu-item-40263" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40263"><a href="https://www.scm.com/product/ams/">AMS Driver</a></li>
<li id="menu-item-7235" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7235"><a href="https://www.scm.com/product/adf/">ADF</a></li>
<li id="menu-item-7236" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7236"><a href="https://www.scm.com/product/band_periodicdft/">BAND</a></li>
<li id="menu-item-7237" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7237"><a href="https://www.scm.com/product/cosmo-rs/">COSMO-RS</a></li>
<li id="menu-item-7238" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7238"><a href="https://www.scm.com/product/dftb/">DFTB</a></li>
<li id="menu-item-7239" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7239"><a href="https://www.scm.com/product/gui/">GUI</a></li>
<li id="menu-item-44383" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-44383"><a href="https://www.scm.com/product/machine-learning-potentials/">MLPotential</a></li>
<li id="menu-item-7240" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7240"><a href="https://www.scm.com/product/mopac/">MOPAC</a></li>
<li id="menu-item-40262" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40262"><a href="https://www.scm.com/product/plams/">PLAMS</a></li>
<li id="menu-item-43701" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-43701"><a href="https://www.scm.com/product/quantum-espresso/">Quantum ESPRESSO</a></li>
<li id="menu-item-7241" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7241"><a href="https://www.scm.com/product/reaxff/">ReaxFF</a></li></ul></div></li><li id="nav_menu-26" class="widget widget_nav_menu "><div class="menu-licensing-container"><ul id="menu-licensing" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/">Pricing &#038; Licensing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/">Price Quote</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/calculate-your-price/">Price Calculator</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/consulting/">Scientific Consulting</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/adf-resellers/">Resellers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/scm-license-terms/">License Terms</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/ordering-procedure/">Ordering</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-6" class="widget widget_nav_menu "><h3>Support</h3><div class="menu-support-navigation-container"><ul id="menu-support-navigation" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/">Support Overview</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-installation-videos/">Installation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-tutorials-and-manuals/">Documentation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/doc/Tutorials/GUI_overview/GUI_overview_tutorials.html">GUI Tutorials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/downloads/">Downloads</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/faq/">FAQs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/adf-discussion-list/">Discussion List</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/documentation-previous-versions/release-notes/">Release Notes</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/adf-teaching-materials/">Teaching Materials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/adf-hands-on-workshops/">Workshops</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/web-presentations-by-adf-experts/">Webinars</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/videos-tutorials-and-web-presentations/">Videos</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/brochures/">Brochure</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/amsterdam-modeling-suite/research-papers-citing-adf/">Papers Citing ADF</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/highlights/">Literature Highlights</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-28" class="widget widget_nav_menu "><h3>About Us</h3><div class="menu-about-us-container"><ul id="menu-about-us" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/contact-us/">Contact Us</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/eu-projects/">EU Projects</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-authors/">Contributors</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-people/">The SCM Team</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/collaborations/">Collaborations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/careers/">Careers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/mission-vision/">Mission &#038; Vision</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/newsletters/">Newsletters</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/news/">News</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/">Events</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
			</ul>
</div>				</div>
			</div>
		</footer>
		<footer class="disclaimer-footer">
			<img src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="">
			<nav class="menu-service-navigation-container"><ul id="menu-service-navigation" class="menu-service navbar-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a href="https://www.scm.com/copyright/">Copyright</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-72"><a href="https://www.scm.com/terms-of-use/">Terms of Use</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-71"><a href="https://www.scm.com/privacy-policy/">Privacy Policy</a></li>
</ul></nav></footer>	
		<!-- end :: footer -->

<!--ENDNOSOLR-->
        </div>
      </div>

    </section>
  </div>
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2021.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NCRWHZZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/../../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<!-- https://stackoverflow.com/questions/2454577/sphinx-restructuredtext-show-hide-code-snippets/25543713 -->
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(200);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>