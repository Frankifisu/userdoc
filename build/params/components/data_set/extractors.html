

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
<META name="ROBOTS" content="NOINDEX, NOFOLLOW">
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.4. Extractors and Comparators &mdash; ParAMS 2021.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme_tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/panels-bootstrap.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ParAMS 2021.1 documentation" href="../../index.html"/>
        <link rel="up" title="5. Components" href="../components.html"/>
        <link rel="next" title="5.5. Data Set Evaluator" href="data_set_evaluator.html"/>
        <link rel="prev" title="5.3. Data Set" href="data_set.html"/> 

  
  <script src="../../_static/js/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/app.js"></script>
<script type="text/javascript">
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NCRWHZZ');</script>
<!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav" role="document">
  <!--STARTNOSOLR-->
  <header class="site-header navbar-fixed-top compact">
      <nav class="main navbar navbar-default">
        <div class="headerbar_container">
          <a role="button" href="/free-trial/" class="btn btn-sm btn-primary">Free trial</a>
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
              <a class="logo" href="https://www.scm.com">
                <img class="logo-small" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="Software for Chemistry &amp; Materials" />
                <img class="logo-full" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo.svg" alt="Software for Chemistry &amp; Materials" />
              </a>
            </div>
          </div>
          <div class="nav-wrapper">
            <div class="collapse navbar-collapse">
              <ul id="menu-primary-navigation" class="nav navbar-nav"><li id="menu-item-40077" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-40077"><a title="Applications" href="https://www.scm.com/applications/">Applications</a></li>
<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a title="Products" href="https://www.scm.com/amsterdam-modeling-suite/">Products</a></li>
<li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a title="Support" href="https://www.scm.com/support/">Support</a></li>
<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a title="About us" href="https://www.scm.com/about-us/">About us</a></li>
</ul>                           <span class="search"><a class="menu_search_link" href="https://www.scm.com/search.php"></a><span class="sr-only">Search</span></span>
            </div>
          </div>
        </div>
      </nav>
 </header>
    

   
  <div id="doc-wrapper">
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/params_logo_compact.svg" class="logo" />
          
          </a>

          
          
  <ul>
      <li class="wy-breadcrumbs-aside">
        
           
           
        
      </li>
  </ul>
 
<!--ENDNOSOLR-->
             <!--STARTNOSOLR-->
<div role="search">
  <form id="rtd-search-form" class="wy-form search-docs-form" action="https://www.scm.com/search.php" method="get">
  <div class="input-group">
    <input type="text" name="search" placeholder="Search ParAMS" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <input type="hidden" name="root" value="doctrunk" />


    <input type="hidden" name="cat" value="doc-ParAMS" />


    <span class="input-group-btn">
			<button type="submit" class="btn btn-primary"><span class="sr-only">Search</span><span class="fa fa-search"></span></button>
		</span>
	</div>
  </form>
</div>
<!--ENDNOSOLR-->
          

          
        </div>
<!--STARTNOSOLR-->
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#parameter-fitting-a-lennard-jones-example">1.1. Parameter Fitting: A Lennard-Jones Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#general-application">1.2. General Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">2. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#first-steps-with-params">2.1. First Steps with ParAMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#unit-tests">2.2. Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">3. Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html">3.1. Lennard-Jones Potential for Argon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#lennard-jones-parameters-engine-and-interface">3.1.1. Lennard-Jones Parameters, Engine, and Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#files">3.1.2. Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#run-the-example">3.1.3. Run the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-best-parameter-values">3.1.4. The best parameter values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#input-files">3.1.5. Input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-job-collection-yaml-file">3.1.5.1. The job_collection.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-training-set-yaml-file">3.1.5.2. The training_set.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-params-conf-py-file">3.1.5.3. The params.conf.py file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#creation-of-the-input-files">3.1.5.4. Creation of the input files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#output-files">3.1.6. Output files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#summary-txt">3.1.6.1. summary.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#detailed-results-correlation-plots-summary-statistics">3.1.6.2. Detailed results: correlation plots, summary statistics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html">3.2. Calculate reference values in training_set.yaml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#prerequisites">3.2.1. Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-input-files">3.2.2. The input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#training-set-yaml">3.2.2.1. training_set.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#reference-engines-yaml">3.2.2.2. reference_engines.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#job-collection-yaml">3.2.2.3. job_collection.yaml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#calculate-reference-values-with-params-genref">3.2.3. Calculate reference values with <code class="docutils literal notranslate"><span class="pre">params</span> <span class="pre">genref</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-reference-cache-folder">3.2.3.1. The reference.cache folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-training-set-ref-yaml-file">3.2.3.2. The training_set.ref.yaml file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html">3.3. Training and validation sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#an-explicit-validation-set-validation-set-yaml">3.3.1. An explicit validation set: <code class="docutils literal notranslate"><span class="pre">validation_set.yaml</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#run-the-optimization">3.3.1.1. Run the optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#training-and-validation-set-results">3.3.1.2. Training and validation set results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#random-split-of-a-data-set-into-training-and-validation-sets">3.3.2. Random split of a data_set into training and validation sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html">3.4. Restarting (continuing) an optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#restarting-with-the-cmaoptimizer">3.4.1. Restarting with the CMAOptimizer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#run-the-first-100-iterations">3.4.1.1. Run the first 100 iterations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#continue-for-another-100-iterations-with-a-restart-file">3.4.1.2. Continue for another 100 iterations with a restart file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#restart-with-other-optimizers-e-g-nelder-mead-from-scipy">3.4.2. Restart with other optimizers (e.g. Nelder-Mead from Scipy)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html">3.5. The params Python library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#run-an-optimization-with-the-python-library">3.5.1. Run an optimization with the Python library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#calculate-reference-values">3.5.2. Calculate reference values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#training-and-validation-sets-with-the-python-library">3.5.3. Training and validation sets with the Python library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/results_importer/results_importer.html">3.6. Create training sets with a ResultsImporter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#run-a-reference-job">3.6.1. Run a reference job</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#water-molecule-reference-data">3.6.2. Water molecule reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#initialize-the-resultsimporter">3.6.3. Initialize the ResultsImporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-singlepoint-calculation-on-the-optimized-geometry">3.6.4. Add a singlepoint calculation on the optimized geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle">3.6.5. Add a geometry optimization job extracting the bond length and bond angle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-trajectory">3.6.6. Add a trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-reaction-energy">3.6.7. Add a reaction energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#training-set-validation-set-and-other-data-sets">3.6.8. Training set, validation set, and other data sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#exit-plams">3.6.9. Exit PLAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#save-to-disk">3.6.10. Save to disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#more-resultsimporters">3.6.11. More ResultsImporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html">3.7. SCC-DFTB repulsive potential for ZnO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#job-collection-yaml-and-training-set-yaml">3.7.1. job_collection.yaml and training_set.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#background-znorg-0-1">3.7.2. Background: znorg-0-1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#parameter-interface">3.7.3. Parameter interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#run-the-parametrization">3.7.4. Run the parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#results">3.7.5. Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#modify-the-analytical-repulsive-potential">3.7.6. Modify the analytical repulsive potential</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/reaxff_water.html">3.8. Parameterization of a Water Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/reaxff_water.html#complete-example-script">3.8.1. Complete Example Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/reaxff_water.html#changing-the-example-script">3.8.2. Changing the Example Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html">3.9. Parameterization of a Simple Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#calculate-the-reference-data">3.9.1. Calculate the reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#import-the-reference-data-into-params">3.9.2. Import the reference data into ParAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#set-the-parameters-to-optimize">3.9.3. Set the parameters to optimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#run-the-reaxff-parametrization">3.9.4. Run the ReaxFF parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#visualize-the-results">3.9.5. Visualize the results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/hf_acks2.html">3.10. Refitting HF Charges with the ACKS2 Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#the-config-file">3.10.1. The Config File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#preparing-the-yaml-files-from-input">3.10.2. Preparing the YAML Files from Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#running-the-optimization">3.10.3. Running the Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#comparing-the-new-parameters">3.10.4. Comparing the new parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#playing-with-the-example">3.10.5. Playing with the example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html">3.11. Convert old ReaxFF training sets to ParAMS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-geo-to-job-collection-yaml">3.11.1. Convert <code class="docutils literal notranslate"><span class="pre">geo</span></code> to <code class="docutils literal notranslate"><span class="pre">job_collection.yaml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-trainset-in">3.11.2. Convert <code class="docutils literal notranslate"><span class="pre">trainset.in</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-the-old-params-file">3.11.3. Convert the old <code class="docutils literal notranslate"><span class="pre">params</span></code> file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mainscript/mainscript.html">4. ParAMS Main Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mainscript/mainscript.html#the-configuration-file">4.1. The Configuration File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#generate-a-template-config-file">4.1.1. Generate a template config file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#list-of-variables-in-params-conf-py">4.1.2. List of variables in <code class="docutils literal notranslate"><span class="pre">params.conf.py</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../components.html">5. Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture/architecture.html">5.1. Architecture Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collections/collections.html">5.2. Job and Engine Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#job-collection">5.2.1. Job Collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#adding-jobs">5.2.1.1. Adding Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#lookup">5.2.1.2. Lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#removing-entries">5.2.1.3. Removing Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#renaming-entries">5.2.1.4. Renaming Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#comparison">5.2.1.5. Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#saving-and-loading">5.2.1.6. Saving and loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#generating-amsjobs">5.2.1.7. Generating AMSJobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#running-collection-jobs">5.2.1.8. Running Collection Jobs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#engine-collection">5.2.2. Engine Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#collections-api">5.2.3. Collections API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#jcentry">5.2.3.1. JCEntry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#jobcollection">5.2.3.2. JobCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#engine">5.2.3.3. Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#enginecollection">5.2.3.4. EngineCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#collection-base-class">5.2.3.5. Collection Base Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_set.html">5.3. Data Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#an-example-dataset">5.3.1. An example DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#load-or-store-dataset">5.3.2. Load or store DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#adding-entries">5.3.3. Adding entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#demonstration-working-with-a-dataset">5.3.4. Demonstration: Working with a DataSet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#add-an-entry">5.3.4.1. Add an entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#datasetentry-attributes">5.3.4.2. DataSetEntry attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#accessing-the-dataset-entries">5.3.4.3. Accessing the DataSet entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#delete-a-dataset-entry">5.3.4.4. Delete a DataSet entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#split-a-dataset-into-subsets">5.3.4.5. Split a DataSet into subsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#dataset-header">5.3.4.6. DataSet header</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set.html#save-the-data-set">5.3.4.7. Save the data set</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#calculating-and-adding-reference-data-with-ams">5.3.5. Calculating and Adding Reference Data with AMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#calculating-the-loss-function-value">5.3.6. Calculating the Loss Function Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#checking-for-consistency-with-a-given-job-collection">5.3.7. Checking for Consistency with a given Job Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#sigma-vs-weight-what-is-the-difference">5.3.8. Sigma vs. weight: What is the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#data-set-entry-api">5.3.9. Data Set Entry API</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_set.html#data-set-api">5.3.10. Data Set API</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.4. Extractors and Comparators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-extractors">5.4.1. Available Extractors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#angle">5.4.1.1. Angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#average-distance">5.4.1.2. Average distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bulk-modulus">5.4.1.3. Bulk modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cell-angles">5.4.1.4. Cell angles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cell-lengths">5.4.1.5. Cell lengths</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cell-volume">5.4.1.6. Cell volume</a></li>
<li class="toctree-l4"><a class="reference internal" href="#charges">5.4.1.7. Charges</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dihedral">5.4.1.8. Dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="#distance">5.4.1.9. Distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#distance-vector">5.4.1.10. Distance vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energy">5.4.1.11. Energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#forces">5.4.1.12. Forces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hessian">5.4.1.13. Hessian</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pes">5.4.1.14. PES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pes-compared">5.4.1.15. PES compared</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pesscan-angle">5.4.1.16. PESScan angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pesscan-dihedral">5.4.1.17. PESScan dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pesscan-distance">5.4.1.18. PESScan distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rmsd">5.4.1.19. RMSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shear-modulus">5.4.1.20. Shear modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor">5.4.1.21. Stress tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-1d">5.4.1.22. Stress tensor 1D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-2d">5.4.1.23. Stress tensor 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-3d">5.4.1.24. Stress tensor 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-diagonal-2d">5.4.1.25. Stress tensor diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-diagonal-3d">5.4.1.26. Stress tensor diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-off-diagonal-2d">5.4.1.27. Stress tensor off-diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stress-tensor-off-diagonal-3d">5.4.1.28. Stress tensor off-diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vibrational-frequencies">5.4.1.29. Vibrational frequencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#young-modulus">5.4.1.30. Young modulus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#custom-extractors">5.4.2. Custom Extractors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-data-structures">5.4.3. Supported Data Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-comparators">5.4.4. Custom Comparators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_set_evaluator.html">5.5. Data Set Evaluator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_set_evaluator.html#datasetevaluator-class">5.5.1. DataSetEvaluator class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-datasetevaluator-calculate-reference">5.5.1.1. Example: DataSetEvaluator.calculate_reference()</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-datasetevaluator-run">5.5.1.2. Example: DataSetEvaluator.run()</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-load-a-saved-datasetevaluator">5.5.1.3. Example: Load a saved DataSetEvaluator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data_set_evaluator.html#datasetevaluator-api">5.5.2. DataSetEvaluator API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../results_importer/results_importer.html">5.6. Results Importer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/overview.html">5.6.1. ResultsImporter overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#resultsimporter-summary">5.6.1.1. ResultsImporter summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#resultsimporter-settings">5.6.1.2. ResultsImporter settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#training-set-validation-set-etc">5.6.1.3. Training set, validation set, etc.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#save-and-load-from-disk">5.6.1.4. Save and load from disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-singlejob">5.6.1.5. add_singlejob</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-trajectory-singlepoints">5.6.1.6. add_trajectory_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-reaction-energy">5.6.1.7. add_reaction_energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-pesscan-singlepoints">5.6.1.8. add_pesscan_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-neb-singlepoints">5.6.1.9. add_neb_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-pesexploration-singlepoints">5.6.1.10. add_pesexploration_singlepoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/reference_codes.html">5.6.2. AMS, VASP and Quantum ESPRESSO reference data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#ams">5.6.2.1. AMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#vasp">5.6.2.2. VASP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#quantum-espresso">5.6.2.3. Quantum ESPRESSO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/api.html">5.6.3. ResultsImporters API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/interfaces.html">5.7. Parameter Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#available-parameter-interfaces">5.7.1. Available Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/xtb.html">5.7.1.1. xTB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/reaxff.html">5.7.1.2. ReaxFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/dftbsplinerep.html">5.7.1.3. SCC-DFTB repulsive potential</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/lennardjones.html">5.7.1.4. Lennard Jones</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#parameter-interface-basics">5.7.2. Parameter Interface Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#working-with-parameters">5.7.3. Working with Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#the-active-parameters-subset">5.7.4. The Active Parameters Subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#storage">5.7.5. Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/interfaces.html#lossless-storage">5.7.5.1. Lossless Storage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#relation-to-plams-settings">5.7.6. Relation to PLAMS Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#parameter-api">5.7.7. Parameter API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#interface-base-class-api">5.7.8. Interface Base Class API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizers/optimizers.html">5.8. Optimizers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/cmaes.html">5.8.1. CMA-ES</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/cmaes.html#list-of-valid-cmasettings">5.8.1.1. List of valid <cite>cmasettings</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/cmaes.html#references">5.8.1.2. References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/scipy.html">5.8.2. Scipy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/nevergrad.html">5.8.3. Nevergrad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/armc.html">5.8.4. Adaptive Rate MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/grid.html">5.8.5. Simple Grid Optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/base.html">5.8.6. Optimizer Base Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/base.html#baseoptimizer-api">5.8.6.1. BaseOptimizer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/base.html#minimizeresult-api">5.8.6.2. MinimizeResult API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../runner/runner.html">5.9. Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../runner/runner.html#optimization-setup">5.9.1. Optimization Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/runner.html#optimization-api">5.9.2. Optimization API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../runner/parallellevels.html">5.10. Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../constraints/constraints.html">5.11. Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../callbacks/callbacks.html">5.12. Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#default-callbacks">5.12.1. Default callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#logger">5.12.2. Logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#timeout">5.12.3. Timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#target-value">5.12.4. Target Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#maximum-iterations">5.12.5. Maximum Iterations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#early-stopping">5.12.6. Early Stopping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#stopfile">5.12.7. Stopfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#time-per-evaluation">5.12.8. Time per Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#load-average">5.12.9. Load Average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#user-defined-callbacks">5.12.10. User-Defined Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#callback-api">5.12.11. Callback API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lossfunctions/lossfunctions.html">5.13. Loss Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#specifying-the-loss-function">5.13.1. Specifying the loss function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#technical-information">5.13.2. Technical information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#sum-of-squares-error">5.13.3. Sum of Squares Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#sum-of-absolute-errors">5.13.4. Sum of Absolute Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#mean-absolute-error">5.13.5. Mean Absolute Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#root-mean-square-error">5.13.6. Root-Mean-Square Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-function-api">5.13.7. Loss Function API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/utilities.html">5.14. Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utilities/converters.html">5.14.1. ParAMS Converters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../utilities/converters.html#ams-job-to-settings">5.14.1.1. AMS Job to Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/converters.html#ams-job-to-engine">5.14.1.2. AMS Job to Engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/history.html">5.14.2. Optimization History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/plotting.html">5.14.3. Plotting Funcitons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/public_helpers.html">5.14.4. Helper functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/weights_schemes.html">5.14.5. Weights schemes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#types-of-weights-schemes">5.14.5.1. Types of weights schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#examples-of-weight-schemes">5.14.5.2. Examples of weight schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#weights-schemes-api">5.14.5.3. Weights schemes API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../experimental/experimental.html">5.15. Experimental Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../experimental/parameter_interfaces.html">5.15.1. Working with Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../experimental/parameter_interfaces.html#active-parameter-search">5.15.1.1. Active Parameter Search</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../experimental/data_set.html">5.15.2. Working with Data Sets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../experimental/data_set.html#data-set-sensitivity">5.15.2.1. Data Set Sensitivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../experimental/data_set.html#normalization-of-data-set-weights">5.15.2.2. Normalization of Data Set Weights</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cite.html">6. Required Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">7. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">8. Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ParAMS</a>
      </nav>
<!--ENDNOSOLR-->

      
      <div class="wy-nav-content">
        <div class="rst-content">
        <!--STARTNOSOLR-->
<div class="header" role="navigation" aria-label="breadcrumbs navigation">
 
  <ul class="wy-breadcrumbs">
    <li><a href="../../ParAMS.html/../../Documentation/index.html">Documentation</a>/</li>
    <li><a href="../../index.html">ParAMS</a>/</li>
      
          <li><a href="../components.html">5. Components</a>/</li>
      
    <li class="orange-text">5.4. Extractors and Comparators</li>
  </ul>
  <p>
 
</div>
<!--ENDNOSOLR-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extractors-and-comparators">
<h1>5.4. Extractors and Comparators<a class="headerlink" href="#extractors-and-comparators" title="Permalink to this headline">¶</a></h1>
<div class="section" id="available-extractors">
<span id="availableextractors"></span><h2>5.4.1. Available Extractors<a class="headerlink" href="#available-extractors" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Extractor</th>
<th class="head">Name</th>
<th class="head">Default sigma</th>
<th class="head">Unit</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.angle.extract" title="scm.params.extractors.angle.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">angle</span></code></a></td>
<td>Angle</td>
<td>2.0</td>
<td>°</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.average_distance.extract" title="scm.params.extractors.average_distance.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">average_distance</span></code></a></td>
<td>Average distance</td>
<td>0.05</td>
<td>Å</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.bulkmodulus.extract" title="scm.params.extractors.bulkmodulus.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bulkmodulus</span></code></a></td>
<td>Bulk modulus</td>
<td>0.001</td>
<td>hartree/bohr³</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.cell_angles.extract" title="scm.params.extractors.cell_angles.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_angles</span></code></a></td>
<td>Cell angles</td>
<td>2.0</td>
<td>°</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.cell_lengths.extract" title="scm.params.extractors.cell_lengths.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_lengths</span></code></a></td>
<td>Cell lengths</td>
<td>0.05</td>
<td>Å</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.cell_volume.extract" title="scm.params.extractors.cell_volume.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_volume</span></code></a></td>
<td>Cell volume</td>
<td>50.0</td>
<td>Å³</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.charges.extract" title="scm.params.extractors.charges.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">charges</span></code></a></td>
<td>Charges</td>
<td>0.1</td>
<td>au</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.dihedral.extract" title="scm.params.extractors.dihedral.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dihedral</span></code></a></td>
<td>Dihedral</td>
<td>2.0</td>
<td>°</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.distance.extract" title="scm.params.extractors.distance.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">distance</span></code></a></td>
<td>Distance</td>
<td>0.05</td>
<td>Å</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.distance_vector.extract" title="scm.params.extractors.distance_vector.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">distance_vector</span></code></a></td>
<td>Distance vector</td>
<td>0.05</td>
<td>Å</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.energy.extract" title="scm.params.extractors.energy.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">energy</span></code></a></td>
<td>Energy</td>
<td>0.002</td>
<td>Ha</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.forces.extract" title="scm.params.extractors.forces.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">forces</span></code></a></td>
<td>Forces</td>
<td>0.003</td>
<td>Ha/bohr</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.hessian.extract" title="scm.params.extractors.hessian.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hessian</span></code></a></td>
<td>Hessian</td>
<td>1.0</td>
<td>Ha/bohr²</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.pes.extract" title="scm.params.extractors.pes.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pes</span></code></a></td>
<td>PES</td>
<td>0.002</td>
<td>Ha</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.pes_compared.extract" title="scm.params.extractors.pes_compared.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pes_compared</span></code></a></td>
<td>PES compared</td>
<td>0.002</td>
<td>Ha</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.pesscan_angle.extract" title="scm.params.extractors.pesscan_angle.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pesscan_angle</span></code></a></td>
<td>PESScan angle</td>
<td>2.0</td>
<td>°</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.pesscan_dihedral.extract" title="scm.params.extractors.pesscan_dihedral.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pesscan_dihedral</span></code></a></td>
<td>PESScan dihedral</td>
<td>2.0</td>
<td>°</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.pesscan_distance.extract" title="scm.params.extractors.pesscan_distance.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pesscan_distance</span></code></a></td>
<td>PESScan distance</td>
<td>0.05</td>
<td>bohr</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.rmsd.extract" title="scm.params.extractors.rmsd.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rmsd</span></code></a></td>
<td>RMSD</td>
<td>0.1</td>
<td>Å</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.shearmodulus.extract" title="scm.params.extractors.shearmodulus.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shearmodulus</span></code></a></td>
<td>Shear modulus</td>
<td>0.001</td>
<td>Ha/bohr³</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.stresstensor.extract" title="scm.params.extractors.stresstensor.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor</span></code></a></td>
<td>Stress tensor</td>
<td>0.0001</td>
<td>au</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_1d.extract" title="scm.params.extractors.stresstensor_1d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_1d</span></code></a></td>
<td>Stress tensor 1D</td>
<td>0.0001</td>
<td>hartree/bohr</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_2d.extract" title="scm.params.extractors.stresstensor_2d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_2d</span></code></a></td>
<td>Stress tensor 2D</td>
<td>0.0001</td>
<td>hartree/bohr²</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_3d.extract" title="scm.params.extractors.stresstensor_3d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_3d</span></code></a></td>
<td>Stress tensor 3D</td>
<td>0.0001</td>
<td>hartree/bohr³</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_diagonal_2d.extract" title="scm.params.extractors.stresstensor_diagonal_2d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_diagonal_2d</span></code></a></td>
<td>Stress tensor diagonal 2D</td>
<td>0.0001</td>
<td>hartree/bohr²</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_diagonal_3d.extract" title="scm.params.extractors.stresstensor_diagonal_3d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_diagonal_3d</span></code></a></td>
<td>Stress tensor diagonal 3D</td>
<td>0.0001</td>
<td>hartree/bohr³</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_offdiagonal_2d.extract" title="scm.params.extractors.stresstensor_offdiagonal_2d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_offdiagonal_2d</span></code></a></td>
<td>Stress tensor off-diagonal 2D</td>
<td>0.0001</td>
<td>hartree/bohr²</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.stresstensor_offdiagonal_3d.extract" title="scm.params.extractors.stresstensor_offdiagonal_3d.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stresstensor_offdiagonal_3d</span></code></a></td>
<td>Stress tensor off-diagonal 3D</td>
<td>0.0001</td>
<td>hartree/bohr³</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#scm.params.extractors.vibfreq.extract" title="scm.params.extractors.vibfreq.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">vibfreq</span></code></a></td>
<td>Vibrational frequencies</td>
<td>5.0</td>
<td>cm⁻¹</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#scm.params.extractors.youngmodulus.extract" title="scm.params.extractors.youngmodulus.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">youngmodulus</span></code></a></td>
<td>Young modulus</td>
<td>0.001</td>
<td>hartree/bohr³</td>
</tr>
</tbody>
</table>
<div class="section" id="angle">
<h3>5.4.1.1. Angle<a class="headerlink" href="#angle" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">angle</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.angle.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em>, <em>atom1: int</em>, <em>atom2: int</em>, <em>atom3: int</em>, <em>mic: bool = True</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.angle.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the angle between three atoms (atom2 is the central atom).
Atom indexing starts with 0.</p>
<p>mic: whether to use the minimum image convention for periodic systems.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>deg</cite></dd>
<dt>Sigma:</dt>
<dd>2.0</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="average-distance">
<h3>5.4.1.2. Average distance<a class="headerlink" href="#average-distance" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">average_distance</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.average_distance.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>atomList: list</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.average_distance.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the average interatomic distance between multiple atom pairs, defined
by their indices <cite>[p1a1, p1a2, p2a1, p2a2, …]</cite>, atom indexes zero based</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom</cite></dd>
<dt>Sigma:</dt>
<dd>0.05</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="bulk-modulus">
<h3>5.4.1.3. Bulk modulus<a class="headerlink" href="#bulk-modulus" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">bulkmodulus</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.bulkmodulus.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.bulkmodulus.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the bulk modulus.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite></dd>
<dt>Sigma:</dt>
<dd>1e-3 (about 30 GPa)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="cell-angles">
<h3>5.4.1.4. Cell angles<a class="headerlink" href="#cell-angles" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">cell_angles</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.cell_angles.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>index=None</em><span class="sig-paren">)</span> &#x2192; Union[float, numpy.ndarray]<a class="headerlink" href="#scm.params.extractors.cell_angles.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all or one angle between lattice vectors</p>
<p>index = <br>
<cite>0</cite>: alpha for 3D system, gamma for 2D system (degrees) <br>
<cite>1</cite>: beta for 3D system (degrees) <br>
<cite>2</cite>: gamma for 3D system (degrees) <br>
<cite>None</cite>: all of the above</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>degree</cite></dd>
<dt>Sigma:</dt>
<dd>2.0</dd>
<dt>Compared value type:</dt>
<dd><cite>np.ndarray</cite> if index is <cite>None</cite> else <cite>float</cite></dd>
</dl>
</dd></dl>

</div>
<div class="section" id="cell-lengths">
<h3>5.4.1.5. Cell lengths<a class="headerlink" href="#cell-lengths" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">cell_lengths</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.cell_lengths.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>index=None</em><span class="sig-paren">)</span> &#x2192; Union[float, numpy.ndarray]<a class="headerlink" href="#scm.params.extractors.cell_lengths.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lengths of all or one lattice vector.</p>
<p>index = <br>
<cite>0</cite>: a (angstrom) <br>
<cite>1</cite>: b (angstrom) <br>
<cite>2</cite>: c (angstrom) <br>
<cite>None</cite>: all of the above</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom</cite></dd>
<dt>Sigma:</dt>
<dd>0.05</dd>
<dt>Compared value type:</dt>
<dd><cite>np.ndarray</cite> if index is <cite>None</cite> else <cite>float</cite></dd>
</dl>
</dd></dl>

</div>
<div class="section" id="cell-volume">
<h3>5.4.1.6. Cell volume<a class="headerlink" href="#cell-volume" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">cell_volume</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.cell_volume.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.cell_volume.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the cell volume.
System must be periodic in 3D.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom^3</cite></dd>
<dt>Sigma:</dt>
<dd><ol class="first last arabic simple" start="50">
<li></li>
</ol>
</dd>
<dt>Compared value type:</dt>
<dd><cite>float</cite></dd>
</dl>
</dd></dl>

</div>
<div class="section" id="charges">
<h3>5.4.1.7. Charges<a class="headerlink" href="#charges" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">charges</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.charges.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em>, <em>atomindex: int = None</em><span class="sig-paren">)</span> &#x2192; Union[numpy.ndarray, float]<a class="headerlink" href="#scm.params.extractors.charges.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the atomic charges. <br>
Charges at one specific atom can be requested with <cite>atomindex</cite>
(atom indexing starts with 0).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>au</cite></dd>
<dt>Sigma:</dt>
<dd>0.1</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="dihedral">
<h3>5.4.1.8. Dihedral<a class="headerlink" href="#dihedral" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">dihedral</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.dihedral.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>atom1: int</em>, <em>atom2: int</em>, <em>atom3: int</em>, <em>atom4: int</em>, <em>mic: bool = True</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.dihedral.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the dihedral angle as defined by the four atom ids
(atom indexing starts with 0), i.e. the angle between the planes formed by
atom1-atom2-atom3 and atom2-atom3-atom4.</p>
<p>mic: whether to use the minimum image convention for periodic systems.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>deg</cite></dd>
<dt>Sigma:</dt>
<dd>2.0</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="distance">
<h3>5.4.1.9. Distance<a class="headerlink" href="#distance" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">distance</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.distance.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>atom1: int</em>, <em>atom2: int</em>, <em>mic: bool = True</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.distance.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the interatomic distance between two atoms, defined
by their indices <cite>atom1</cite> and <cite>atom2</cite> (atom indexing starts with 0).</p>
<p>If mic==True, the minimum image convention is used for periodic systems.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom</cite></dd>
<dt>Sigma:</dt>
<dd>0.05</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="distance-vector">
<h3>5.4.1.10. Distance vector<a class="headerlink" href="#distance-vector" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">distance_vector</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.distance_vector.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresults</em>, <em>atom1: int</em>, <em>atom2: int</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.distance_vector.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the distance vector between two atoms <cite>atom2 - atom1</cite>, defined
by their molecule indices (atom indexing starts with 0).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom</cite></dd>
<dt>Sigma:</dt>
<dd>0.05</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="energy">
<h3>5.4.1.11. Energy<a class="headerlink" href="#energy" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">energy</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.energy.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.energy.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the energy of the system.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree</cite></dd>
<dt>Sigma:</dt>
<dd>2e-3</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="forces">
<h3>5.4.1.12. Forces<a class="headerlink" href="#forces" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">forces</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.forces.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em>, <em>atindex: int = None</em>, <em>xyz: int = None</em><span class="sig-paren">)</span> &#x2192; Union[float, numpy.ndarray]<a class="headerlink" href="#scm.params.extractors.forces.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the atomic forces of a system (array),
or the specific component <cite>xyz</cite> at index <cite>atindex</cite> (float).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr</cite></dd>
<dt>Sigma:</dt>
<dd>0.01</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Properties:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>atindex <span class="classifier-delimiter">:</span> <span class="classifier">optional, int</span></dt>
<dd>Atom index, starting with 0</dd>
<dt>xyz <span class="classifier-delimiter">:</span> <span class="classifier">optional, 0 &lt;= int &lt;= 2</span></dt>
<dd>x(0), y(1) or z(2) component to be extracted.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="hessian">
<h3>5.4.1.13. Hessian<a class="headerlink" href="#hessian" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">hessian</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.hessian.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.hessian.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the Cartiesian Hessian matrix.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>Ha/bohr^2</cite></dd>
<dt>Sigma:</dt>
<dd>Undefined (defaults to 1.0)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pes">
<h3>5.4.1.14. PES<a class="headerlink" href="#pes" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">pes</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.pes.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em>, <em>relative_to='min'</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.pes.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the results of a <a class="reference external" href="../../../AMS/Tasks/PES_Scan.html">PES Scan</a>. <br></p>
<p>If <code class="docutils literal notranslate"><span class="pre">relative_to</span></code> is an integer, energies relative to that index (starting with 0) will be returned.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">relative_to</span></code> is a string and a valid attribute of a numpy array (e.g. ‘min’ or ‘max’), then
the return value of that function will be subtracted.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">relative_to</span></code> is None, the energies are returned unmodified.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>Ha</cite></dd>
<dt>Sigma:</dt>
<dd>2e-3</dd>
<dt>Compared value type:</dt>
<dd>ndarray</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pes-compared">
<h3>5.4.1.15. PES compared<a class="headerlink" href="#pes-compared" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">pes_compared</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.pes_compared.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.pes_compared.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts and compares the results of a <a class="reference external" href="../../../AMS/Tasks/PES_Scan.html">PES Scan</a>.
The return value <cite>r</cite> is calculated as</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\mu = \frac{1}{N} \sum_i^N y_i - \hat{y}_i\\r   = \sqrt{   \sum_i^N (\hat{y}_i - y_i + \mu)^2 }\end{aligned}\end{align} \]</div>
<p>where <cite>N</cite> is the number of points in the PES scan.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>au</cite></dd>
<dt>Sigma:</dt>
<dd>2e-3</dd>
<dt>Compared value type:</dt>
<dd>float</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pesscan-angle">
<h3>5.4.1.16. PESScan angle<a class="headerlink" href="#pesscan-angle" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">pesscan_angle</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.pesscan_angle.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em>, <em>A: int</em>, <em>B: int</em>, <em>C: int</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.extractors.pesscan_angle.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract an array of angles A-B-C for all frames in a
<a class="reference external" href="../../../AMS/Tasks/PES_Scan.html">PES Scan</a>
(atom indexing starts with 0).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>deg</cite></dd>
<dt>Sigma:</dt>
<dd>2.0</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pesscan-dihedral">
<h3>5.4.1.17. PESScan dihedral<a class="headerlink" href="#pesscan-dihedral" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">pesscan_dihedral</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.pesscan_dihedral.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em>, <em>A: int</em>, <em>B: int</em>, <em>C: int</em>, <em>D: int</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.pesscan_dihedral.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract an array of dihedral angles A-B-C-D for all frames in a
<a class="reference external" href="../../../AMS/Tasks/PES_Scan.html">PES Scan</a>
(atom indexing starts with 0).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>deg</cite></dd>
<dt>Sigma:</dt>
<dd>2.0</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pesscan-distance">
<h3>5.4.1.18. PESScan distance<a class="headerlink" href="#pesscan-distance" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">pesscan_distance</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.pesscan_distance.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em>, <em>A: int</em>, <em>B: int</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.pesscan_distance.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract an array of distances between two atoms for all frames in a
<a class="reference external" href="../../../AMS/Tasks/PES_Scan.html">PES Scan</a>
(atom indexing starts with 0).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>bohr</cite></dd>
<dt>Sigma:</dt>
<dd>0.05</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="rmsd">
<h3>5.4.1.19. RMSD<a class="headerlink" href="#rmsd" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">rmsd</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.rmsd.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.extractors.rmsd.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the
<a class="reference external" href="https://en.wikipedia.org/wiki/Kabsch_algorithm">Kabsch algorithm</a> to align and
calculate the root-mean-square deviation of the atomic positions given two systems.
Assumes all elements and their order is the same in both systems.
When providing an external reference value, the object must be a 2d numpy array
of the shape <cite>(Natoms, 3)</cite> (each element should store the atomic coordinates).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>angstrom</cite></dd>
<dt>Sigma:</dt>
<dd>0.1</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="shear-modulus">
<h3>5.4.1.20. Shear modulus<a class="headerlink" href="#shear-modulus" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">shearmodulus</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.shearmodulus.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.shearmodulus.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the shear modulus.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite></dd>
<dt>Sigma:</dt>
<dd>1e-3 (about 30 GPa)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor">
<h3>5.4.1.21. Stress tensor<a class="headerlink" href="#stress-tensor" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the stress tensor</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>au</cite>. For 3D systems this mean hartree/bohr^3, for 2D systems hartree/bohr^2 and for 1D systems hartree/bohr.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-1d">
<h3>5.4.1.22. Stress tensor 1D<a class="headerlink" href="#stress-tensor-1d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_1d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_1d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_1d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the stress tensor for a 1D system (1 element).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-2d">
<h3>5.4.1.23. Stress tensor 2D<a class="headerlink" href="#stress-tensor-2d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_2d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_2d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_2d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the stress tensor for a 2D system (4 elements).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^2</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-3d">
<h3>5.4.1.24. Stress tensor 3D<a class="headerlink" href="#stress-tensor-3d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_3d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_3d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_3d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the stress tensor for a 3D system (9 elements).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-diagonal-2d">
<h3>5.4.1.25. Stress tensor diagonal 2D<a class="headerlink" href="#stress-tensor-diagonal-2d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_diagonal_2d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_diagonal_2d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_diagonal_2d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the diagonal elements of the stress tensor for a 2D system (2 elements).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^2</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-diagonal-3d">
<h3>5.4.1.26. Stress tensor diagonal 3D<a class="headerlink" href="#stress-tensor-diagonal-3d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_diagonal_3d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_diagonal_3d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_diagonal_3d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the diagonal elements of the stress tensor for a 3D system (3 elements).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-off-diagonal-2d">
<h3>5.4.1.27. Stress tensor off-diagonal 2D<a class="headerlink" href="#stress-tensor-off-diagonal-2d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_offdiagonal_2d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_offdiagonal_2d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_offdiagonal_2d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the off-diagonal element of the stress tensor for a 2D system (1 element).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^2</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stress-tensor-off-diagonal-3d">
<h3>5.4.1.28. Stress tensor off-diagonal 3D<a class="headerlink" href="#stress-tensor-off-diagonal-3d" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">stresstensor_offdiagonal_3d</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.stresstensor_offdiagonal_3d.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.stresstensor_offdiagonal_3d.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the off-diagonal elements of the stress tensor for a 3D system (3 elements).</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite>.</dd>
<dt>Sigma:</dt>
<dd>1e-4</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="vibrational-frequencies">
<h3>5.4.1.29. Vibrational frequencies<a class="headerlink" href="#vibrational-frequencies" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">vibfreq</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.vibfreq.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>results</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#scm.params.extractors.vibfreq.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the vibrational frequencies.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>1/cm</cite></dd>
<dt>Sigma:</dt>
<dd>5.0</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="young-modulus">
<h3>5.4.1.30. Young modulus<a class="headerlink" href="#young-modulus" title="Permalink to this headline">¶</a></h3>
<p>Extractor: <code class="docutils literal notranslate"><span class="pre">youngmodulus</span></code></p>
<dl class="function">
<dt id="scm.params.extractors.youngmodulus.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>amsresult</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#scm.params.extractors.youngmodulus.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the Young’s modulus.</p>
<dl class="docutils">
<dt>Unit:</dt>
<dd><cite>hartree/bohr^3</cite></dd>
<dt>Sigma:</dt>
<dd>1e-3 (about 30 GPa)</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="custom-extractors">
<h2>5.4.2. Custom Extractors<a class="headerlink" href="#custom-extractors" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="data_set.html#data-set"><span class="std std-ref">DataSet section</span></a> described how an arbitrary linear combination
of properties extracted from jobs <span class="math notranslate nohighlight">\(P(J)\)</span> can be added to a Data Set for fitting.
In this chapter, we are going to describe what happens when entries are added and evaluated
by the Data Set and how the user can extend the number of properties that can be fitted with ParAMS.</p>
<p>We have briefly described the <em>extractors</em> in the <a class="reference internal" href="data_set.html#data-set"><span class="std std-ref">Data Set</span></a>:
They are a collection of Python code snippets available to the <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instance which define
how to extract an individual property <span class="math notranslate nohighlight">\(P\)</span> from a job.
The extractors available to each <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> can be checked with the <code class="xref py py-attr docutils literal notranslate"><span class="pre">extractors</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">extractors</span>
<span class="go">{&#39;angles&#39;, &#39;vibfreq&#39;, &#39;charges&#39;, &#39;distance&#39;, &#39;stresstensor&#39;, &#39;energy&#39;, &#39;forces&#39;, &#39;hessian&#39;, &#39;dihedral&#39;}</span>
</pre></div>
</div>
<p>Any expression passed to the <a class="reference internal" href="data_set.html#scm.params.core.dataset.DataSet.add_entry" title="scm.params.core.dataset.DataSet.add_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.add_entry()</span></code></a> method can be constructed from the available extractors,
for example <code class="docutils literal notranslate"><span class="pre">&quot;angles('myJob1')&quot;</span></code>.</p>
<p>The design of the Data Set allows for an easy extension of
the extractors to suit personal needs beyond what is already provided in the package.
Users are encouraged to define additional extractors whenever a new property becomes relevant for the fitting process.
In the following example, we will add the functionality to extract and evaluate elastic tensors to the Data Set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;elastictensor&#39;</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">extractors</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Start by creating an <cite>elastictensor.py</cite> in an empty directory of your choice with the following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">ndarray</span><span class="p">,</span> <span class="n">asarray</span>

<span class="n">sigma</span> <span class="o">=</span> <span class="mf">1e-2</span>
<span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">amsresults</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">asarray</span><span class="p">(</span><span class="n">amsresults</span><span class="o">.</span><span class="n">get_engine_results</span><span class="p">(</span><span class="s1">&#39;ElasticTensor&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>This is a minimal and complete definition of our extractor.
The code snippet can be saved under any accessible path and
used by providing <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> with the corresponding directory.
The base file name will be used as the extractor’s name
(make sure not include extractors with the same names).
Here, we have saved the above under <cite>path/to/extractors/</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">(</span><span class="n">more_extractors</span><span class="o">=</span><span class="s1">&#39;path/to/extractors/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;elastictensor&#39;</span> <span class="n">ds</span><span class="o">.</span><span class="n">extractors</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Because the Data Set natively works with <code class="xref py py-class docutils literal notranslate"><span class="pre">plams.AMSResults</span></code>,
we were able to take a shortcut in the creation of our extractor:
All we needed to do in this case is wrap a PLAMS method around the <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code> function.
Note that in addition to the function definition, we also provided a <cite>sigma</cite> variable.
This serves as a default value when a related entry is added with through <a class="reference internal" href="data_set.html#scm.params.core.dataset.DataSet.add_entry" title="scm.params.core.dataset.DataSet.add_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.add_entry()</span></code></a>
and should roughly be in the same order of magnitude as the “accepted accuracy” for this property.
ParAMS will evaluate all entries according to <span class="math notranslate nohighlight">\((w/\sigma)(y-\hat{y})\)</span>, where <span class="math notranslate nohighlight">\(w\)</span> is the weight.
Providing a sigma is not mandatory but highly recommended, any extractor without a sigma will set it’s value to 1.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>An extractor stored as <cite>basename.py</cite> will be available through the <cite>basename</cite> string at runtime</li>
<li>For every extractor, the <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code> function returns the property value from a job</li>
<li>ParAMS expects the first argument passed to any <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code> function to be a <code class="xref py py-class docutils literal notranslate"><span class="pre">plams.AMSResults</span></code> instance
(see <a class="reference external" href="../../../plams/interfaces/ams.html#amsresults-api">PLAMS documentation</a>)</li>
<li>It is recommended to define a <cite>sigma:float</cite> variable, which should be in the same order of magnitude as the
prediction accuracy for this property</li>
</ul>
</div>
<p>However, because the definition of <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code> is completely up to the user,
it can be made to read and process data from any other source as well.
Assuming that a property is stored in a text file, an extractor that is independent of
<code class="xref py py-class docutils literal notranslate"><span class="pre">plams.AMSResults</span></code> could look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
  <span class="c1"># AMSResults instance: `_` is ignored.</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="supported-data-structures">
<h2>5.4.3. Supported Data Structures<a class="headerlink" href="#supported-data-structures" title="Permalink to this headline">¶</a></h2>
<p>The above definition of our elastic tensor extractor returns a numpy array to the <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instance
when evaluated, however, in theory extractors can return an arbitrary data structure which calls for
additional processing to make all results consistent.
Internally, each time <a class="reference internal" href="data_set.html#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.evaluate()</span></code></a> is called, reference and predicted results are reduced
to one weighted vector of residuals
<span class="math notranslate nohighlight">\((\boldsymbol{w}/\boldsymbol{\sigma})(\boldsymbol{y} - \boldsymbol{\hat{y}})\)</span>,
which is then passed to a <a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-functions"><span class="std std-ref">loss function</span></a> and evaluated.
This implies that any two return values of the same extractor support subtraction and multiplication
(which is why we convert the the elastic tensor to a numpy array before returning).
For anything that does not, a custom <code class="xref py py-func docutils literal notranslate"><span class="pre">compare()</span></code> function has to be implemented
alongside <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code>.</p>
</div>
<div class="section" id="custom-comparators">
<h2>5.4.4. Custom Comparators<a class="headerlink" href="#custom-comparators" title="Permalink to this headline">¶</a></h2>
<p>There might be cases where an extractor either returns
a data type that does not support mathematical operations
or the quality of a reference and predicted value can not be measured
by a simple subtraction <span class="math notranslate nohighlight">\(y - \hat{y}\)</span>.
In such cases it is necessary to define an additional <code class="xref py py-func docutils literal notranslate"><span class="pre">compare()</span></code>
in the extractor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># dictextractor.py</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">amsresults</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">amsresults</span><span class="o">.</span><span class="n">some_dict_property</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">y</span><span class="p">:</span><span class="n">Dict</span><span class="p">,</span> <span class="n">yhat</span><span class="p">:</span><span class="n">Dict</span><span class="p">,</span> <span class="n">au_to_ref</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
  <span class="n">y</span>    <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
  <span class="n">yhat</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">yhat</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

  <span class="c1"># Unit conversion must be handled by the custom comparator:</span>
  <span class="n">yhat</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">au_to_ref</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">yhat</span><span class="p">]</span>

  <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">ihat</span>  <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">yhat</span><span class="p">):</span>
    <span class="o">...</span>
  <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<p>A custom comparator defined in such a way will automatically be used in combination
with the extractor.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>Whenever the <code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code> function returns a data type that does not support mathematical
operations, a <code class="xref py py-func docutils literal notranslate"><span class="pre">compare()</span></code> function must be additionally defined.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">compare()</span></code> <strong>always</strong> follows the signature
<code class="docutils literal notranslate"><span class="pre">compare(y:Any,</span> <span class="pre">yhat:Any,</span> <span class="pre">au_to_ref:float)</span> <span class="pre">-&gt;</span> <span class="pre">Union[ndarray,float,int]</span></code></li>
<li>Note that <code class="xref py py-func docutils literal notranslate"><span class="pre">compare()</span></code> should handle possible unit conversions by applying
the equivalent of <code class="docutils literal notranslate"><span class="pre">yhat</span> <span class="pre">=</span> <span class="pre">au_to_ref*yhat</span></code></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <!--STARTNOSOLR-->
<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data_set_evaluator.html" class="btn btn-neutral float-right" title="5.5. Data Set Evaluator" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data_set.html" class="btn btn-neutral" title="5.3. Data Set" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/> 

<!-- start :: footer -->
		<footer class="site-footer block">
			<div class="container">
				<div class="row">
					<div class="footer-column" >
	<ul>
		<li id="nav_menu-2" class="widget widget_nav_menu "><h3>Application Areas</h3><div class="menu-application-areas-container"><ul id="menu-application-areas" class="menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/batteries/">Batteries &#038; PVs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/chemical-bonding-analysis/">Bonding Analysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/catalysis/">Catalysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/heavy-elements/">Heavy Elements</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/inorganic-chemistry/">Inorganic Chemistry</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/pharma/">Life Sciences</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/materials-science/">Materials Science</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/nanotechnology/">Nanotechnology</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/oil-and-gas/">Oil and Gas</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/organic-electronics/">Organic Electronics</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/polymers/">Polymers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/spectroscopy/">Spectroscopy</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/teaching/">Teaching</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-7" class="widget widget_nav_menu "><h3>Products</h3><div class="menu-product-navigation-container"><ul id="menu-product-navigation" class="menu">
<li id="menu-item-40263" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40263"><a href="https://www.scm.com/product/ams/">AMS Driver</a></li>
<li id="menu-item-7235" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7235"><a href="https://www.scm.com/product/adf/">ADF</a></li>
<li id="menu-item-7236" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7236"><a href="https://www.scm.com/product/band_periodicdft/">BAND</a></li>
<li id="menu-item-7237" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7237"><a href="https://www.scm.com/product/cosmo-rs/">COSMO-RS</a></li>
<li id="menu-item-7238" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7238"><a href="https://www.scm.com/product/dftb/">DFTB</a></li>
<li id="menu-item-7239" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7239"><a href="https://www.scm.com/product/gui/">GUI</a></li>
<li id="menu-item-44383" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-44383"><a href="https://www.scm.com/product/machine-learning-potentials/">MLPotential</a></li>
<li id="menu-item-7240" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7240"><a href="https://www.scm.com/product/mopac/">MOPAC</a></li>
<li id="menu-item-40262" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40262"><a href="https://www.scm.com/product/plams/">PLAMS</a></li>
<li id="menu-item-43701" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-43701"><a href="https://www.scm.com/product/quantum-espresso/">Quantum ESPRESSO</a></li>
<li id="menu-item-7241" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7241"><a href="https://www.scm.com/product/reaxff/">ReaxFF</a></li></ul></div></li><li id="nav_menu-26" class="widget widget_nav_menu "><div class="menu-licensing-container"><ul id="menu-licensing" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/">Pricing &#038; Licensing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/">Price Quote</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/calculate-your-price/">Price Calculator</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/consulting/">Scientific Consulting</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/adf-resellers/">Resellers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/scm-license-terms/">License Terms</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/ordering-procedure/">Ordering</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-6" class="widget widget_nav_menu "><h3>Support</h3><div class="menu-support-navigation-container"><ul id="menu-support-navigation" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/">Support Overview</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-installation-videos/">Installation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-tutorials-and-manuals/">Documentation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/doc/Tutorials/GUI_overview/GUI_overview_tutorials.html">GUI Tutorials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/downloads/">Downloads</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/faq/">FAQs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/adf-discussion-list/">Discussion List</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/documentation-previous-versions/release-notes/">Release Notes</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/adf-teaching-materials/">Teaching Materials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/adf-hands-on-workshops/">Workshops</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/web-presentations-by-adf-experts/">Webinars</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/videos-tutorials-and-web-presentations/">Videos</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/brochures/">Brochure</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/amsterdam-modeling-suite/research-papers-citing-adf/">Papers Citing ADF</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/highlights/">Literature Highlights</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-28" class="widget widget_nav_menu "><h3>About Us</h3><div class="menu-about-us-container"><ul id="menu-about-us" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/contact-us/">Contact Us</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/eu-projects/">EU Projects</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-authors/">Contributors</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-people/">The SCM Team</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/collaborations/">Collaborations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/careers/">Careers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/mission-vision/">Mission &#038; Vision</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/newsletters/">Newsletters</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/news/">News</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/">Events</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
			</ul>
</div>				</div>
			</div>
		</footer>
		<footer class="disclaimer-footer">
			<img src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="">
			<nav class="menu-service-navigation-container"><ul id="menu-service-navigation" class="menu-service navbar-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a href="https://www.scm.com/copyright/">Copyright</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-72"><a href="https://www.scm.com/terms-of-use/">Terms of Use</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-71"><a href="https://www.scm.com/privacy-policy/">Privacy Policy</a></li>
</ul></nav></footer>	
		<!-- end :: footer -->

<!--ENDNOSOLR-->
        </div>
      </div>

    </section>
  </div>
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2021.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NCRWHZZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/../../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<!-- https://stackoverflow.com/questions/2454577/sphinx-restructuredtext-show-hide-code-snippets/25543713 -->
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(200);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>