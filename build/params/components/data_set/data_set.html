

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
<META name="ROBOTS" content="NOINDEX, NOFOLLOW">
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.3. Data Set &mdash; ParAMS 2021.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme_tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/panels-bootstrap.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ParAMS 2021.1 documentation" href="../../index.html"/>
        <link rel="up" title="5. Components" href="../components.html"/>
        <link rel="next" title="5.4. Extractors and Comparators" href="extractors.html"/>
        <link rel="prev" title="5.2. Job and Engine Collections" href="../collections/collections.html"/> 

  
  <script src="../../_static/js/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/app.js"></script>
<script type="text/javascript">
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NCRWHZZ');</script>
<!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav" role="document">
  <!--STARTNOSOLR-->
  <header class="site-header navbar-fixed-top compact">
      <nav class="main navbar navbar-default">
        <div class="headerbar_container">
          <a role="button" href="/free-trial/" class="btn btn-sm btn-primary">Free trial</a>
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
              <a class="logo" href="https://www.scm.com">
                <img class="logo-small" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="Software for Chemistry &amp; Materials" />
                <img class="logo-full" src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo.svg" alt="Software for Chemistry &amp; Materials" />
              </a>
            </div>
          </div>
          <div class="nav-wrapper">
            <div class="collapse navbar-collapse">
              <ul id="menu-primary-navigation" class="nav navbar-nav"><li id="menu-item-40077" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-40077"><a title="Applications" href="https://www.scm.com/applications/">Applications</a></li>
<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a title="Products" href="https://www.scm.com/amsterdam-modeling-suite/">Products</a></li>
<li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a title="Support" href="https://www.scm.com/support/">Support</a></li>
<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a title="About us" href="https://www.scm.com/about-us/">About us</a></li>
</ul>                           <span class="search"><a class="menu_search_link" href="https://www.scm.com/search.php"></a><span class="sr-only">Search</span></span>
            </div>
          </div>
        </div>
      </nav>
 </header>
    

   
  <div id="doc-wrapper">
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/params_logo_compact.svg" class="logo" />
          
          </a>

          
          
  <ul>
      <li class="wy-breadcrumbs-aside">
        
           
           
        
      </li>
  </ul>
 
<!--ENDNOSOLR-->
             <!--STARTNOSOLR-->
<div role="search">
  <form id="rtd-search-form" class="wy-form search-docs-form" action="https://www.scm.com/search.php" method="get">
  <div class="input-group">
    <input type="text" name="search" placeholder="Search ParAMS" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <input type="hidden" name="root" value="doctrunk" />


    <input type="hidden" name="cat" value="doc-ParAMS" />


    <span class="input-group-btn">
			<button type="submit" class="btn btn-primary"><span class="sr-only">Search</span><span class="fa fa-search"></span></button>
		</span>
	</div>
  </form>
</div>
<!--ENDNOSOLR-->
          

          
        </div>
<!--STARTNOSOLR-->
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#parameter-fitting-a-lennard-jones-example">1.1. Parameter Fitting: A Lennard-Jones Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#general-application">1.2. General Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">2. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#first-steps-with-params">2.1. First Steps with ParAMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#unit-tests">2.2. Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">3. Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html">3.1. Lennard-Jones Potential for Argon</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#lennard-jones-parameters-engine-and-interface">3.1.1. Lennard-Jones Parameters, Engine, and Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#files">3.1.2. Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#run-the-example">3.1.3. Run the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-best-parameter-values">3.1.4. The best parameter values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#input-files">3.1.5. Input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-job-collection-yaml-file">3.1.5.1. The job_collection.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-training-set-yaml-file">3.1.5.2. The training_set.yaml file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#the-params-conf-py-file">3.1.5.3. The params.conf.py file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#creation-of-the-input-files">3.1.5.4. Creation of the input files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#output-files">3.1.6. Output files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#summary-txt">3.1.6.1. summary.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar.html#detailed-results-correlation-plots-summary-statistics">3.1.6.2. Detailed results: correlation plots, summary statistics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html">3.2. Calculate reference values in training_set.yaml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#prerequisites">3.2.1. Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-input-files">3.2.2. The input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#training-set-yaml">3.2.2.1. training_set.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#reference-engines-yaml">3.2.2.2. reference_engines.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#job-collection-yaml">3.2.2.3. job_collection.yaml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#calculate-reference-values-with-params-genref">3.2.3. Calculate reference values with <code class="docutils literal notranslate"><span class="pre">params</span> <span class="pre">genref</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-reference-cache-folder">3.2.3.1. The reference.cache folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_no_reference_data.html#the-training-set-ref-yaml-file">3.2.3.2. The training_set.ref.yaml file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html">3.3. Training and validation sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#an-explicit-validation-set-validation-set-yaml">3.3.1. An explicit validation set: <code class="docutils literal notranslate"><span class="pre">validation_set.yaml</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#run-the-optimization">3.3.1.1. Run the optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#training-and-validation-set-results">3.3.1.2. Training and validation set results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#random-split-of-a-data-set-into-training-and-validation-sets">3.3.2. Random split of a data_set into training and validation sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html">3.4. Restarting (continuing) an optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#restarting-with-the-cmaoptimizer">3.4.1. Restarting with the CMAOptimizer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#run-the-first-100-iterations">3.4.1.1. Run the first 100 iterations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#continue-for-another-100-iterations-with-a-restart-file">3.4.1.2. Continue for another 100 iterations with a restart file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_restart.html#restart-with-other-optimizers-e-g-nelder-mead-from-scipy">3.4.2. Restart with other optimizers (e.g. Nelder-Mead from Scipy)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html">3.5. The params Python library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#run-an-optimization-with-the-python-library">3.5.1. Run an optimization with the Python library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#calculate-reference-values">3.5.2. Calculate reference values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/lj_ar/lj_ar_python.html#training-and-validation-sets-with-the-python-library">3.5.3. Training and validation sets with the Python library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/results_importer/results_importer.html">3.6. Create training sets with a ResultsImporter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#run-a-reference-job">3.6.1. Run a reference job</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#water-molecule-reference-data">3.6.2. Water molecule reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#initialize-the-resultsimporter">3.6.3. Initialize the ResultsImporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-singlepoint-calculation-on-the-optimized-geometry">3.6.4. Add a singlepoint calculation on the optimized geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-geometry-optimization-job-extracting-the-bond-length-and-bond-angle">3.6.5. Add a geometry optimization job extracting the bond length and bond angle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-trajectory">3.6.6. Add a trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#add-a-reaction-energy">3.6.7. Add a reaction energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#training-set-validation-set-and-other-data-sets">3.6.8. Training set, validation set, and other data sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#exit-plams">3.6.9. Exit PLAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#save-to-disk">3.6.10. Save to disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/results_importer/results_importer.html#more-resultsimporters">3.6.11. More ResultsImporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html">3.7. SCC-DFTB repulsive potential for ZnO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#job-collection-yaml-and-training-set-yaml">3.7.1. job_collection.yaml and training_set.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#background-znorg-0-1">3.7.2. Background: znorg-0-1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#parameter-interface">3.7.3. Parameter interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#run-the-parametrization">3.7.4. Run the parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#results">3.7.5. Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/dftb_zno/dftb_zno.html#modify-the-analytical-repulsive-potential">3.7.6. Modify the analytical repulsive potential</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/reaxff_water.html">3.8. Parameterization of a Water Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/reaxff_water.html#complete-example-script">3.8.1. Complete Example Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/reaxff_water.html#changing-the-example-script">3.8.2. Changing the Example Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html">3.9. Parameterization of a Simple Force Field with ReaxFF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#calculate-the-reference-data">3.9.1. Calculate the reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#import-the-reference-data-into-params">3.9.2. Import the reference data into ParAMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#set-the-parameters-to-optimize">3.9.3. Set the parameters to optimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#run-the-reaxff-parametrization">3.9.4. Run the ReaxFF parametrization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/new_reaxff_water/new_reaxff_water.html#visualize-the-results">3.9.5. Visualize the results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/hf_acks2.html">3.10. Refitting HF Charges with the ACKS2 Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#the-config-file">3.10.1. The Config File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#preparing-the-yaml-files-from-input">3.10.2. Preparing the YAML Files from Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#running-the-optimization">3.10.3. Running the Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#comparing-the-new-parameters">3.10.4. Comparing the new parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/hf_acks2.html#playing-with-the-example">3.10.5. Playing with the example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html">3.11. Convert old ReaxFF training sets to ParAMS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-geo-to-job-collection-yaml">3.11.1. Convert <code class="docutils literal notranslate"><span class="pre">geo</span></code> to <code class="docutils literal notranslate"><span class="pre">job_collection.yaml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-trainset-in">3.11.2. Convert <code class="docutils literal notranslate"><span class="pre">trainset.in</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/convert_old_reaxff_format.html#convert-the-old-params-file">3.11.3. Convert the old <code class="docutils literal notranslate"><span class="pre">params</span></code> file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mainscript/mainscript.html">4. ParAMS Main Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mainscript/mainscript.html#the-configuration-file">4.1. The Configuration File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#generate-a-template-config-file">4.1.1. Generate a template config file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mainscript/mainscript.html#list-of-variables-in-params-conf-py">4.1.2. List of variables in <code class="docutils literal notranslate"><span class="pre">params.conf.py</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../components.html">5. Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture/architecture.html">5.1. Architecture Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collections/collections.html">5.2. Job and Engine Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#job-collection">5.2.1. Job Collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#adding-jobs">5.2.1.1. Adding Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#lookup">5.2.1.2. Lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#removing-entries">5.2.1.3. Removing Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#renaming-entries">5.2.1.4. Renaming Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#comparison">5.2.1.5. Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#saving-and-loading">5.2.1.6. Saving and loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#generating-amsjobs">5.2.1.7. Generating AMSJobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#running-collection-jobs">5.2.1.8. Running Collection Jobs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#engine-collection">5.2.2. Engine Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/collections.html#collections-api">5.2.3. Collections API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#jcentry">5.2.3.1. JCEntry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#jobcollection">5.2.3.2. JobCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#engine">5.2.3.3. Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#enginecollection">5.2.3.4. EngineCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../collections/collections.html#collection-base-class">5.2.3.5. Collection Base Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.3. Data Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#an-example-dataset">5.3.1. An example DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-or-store-dataset">5.3.2. Load or store DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-entries">5.3.3. Adding entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#demonstration-working-with-a-dataset">5.3.4. Demonstration: Working with a DataSet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#add-an-entry">5.3.4.1. Add an entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#datasetentry-attributes">5.3.4.2. DataSetEntry attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accessing-the-dataset-entries">5.3.4.3. Accessing the DataSet entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-a-dataset-entry">5.3.4.4. Delete a DataSet entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#split-a-dataset-into-subsets">5.3.4.5. Split a DataSet into subsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dataset-header">5.3.4.6. DataSet header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save-the-data-set">5.3.4.7. Save the data set</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#calculating-and-adding-reference-data-with-ams">5.3.5. Calculating and Adding Reference Data with AMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calculating-the-loss-function-value">5.3.6. Calculating the Loss Function Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-for-consistency-with-a-given-job-collection">5.3.7. Checking for Consistency with a given Job Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sigma-vs-weight-what-is-the-difference">5.3.8. Sigma vs. weight: What is the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-set-entry-api">5.3.9. Data Set Entry API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-set-api">5.3.10. Data Set API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extractors.html">5.4. Extractors and Comparators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extractors.html#available-extractors">5.4.1. Available Extractors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#angle">5.4.1.1. Angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#average-distance">5.4.1.2. Average distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#bulk-modulus">5.4.1.3. Bulk modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#cell-angles">5.4.1.4. Cell angles</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#cell-lengths">5.4.1.5. Cell lengths</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#cell-volume">5.4.1.6. Cell volume</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#charges">5.4.1.7. Charges</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#dihedral">5.4.1.8. Dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#distance">5.4.1.9. Distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#distance-vector">5.4.1.10. Distance vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#energy">5.4.1.11. Energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#forces">5.4.1.12. Forces</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#hessian">5.4.1.13. Hessian</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#pes">5.4.1.14. PES</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#pes-compared">5.4.1.15. PES compared</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#pesscan-angle">5.4.1.16. PESScan angle</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#pesscan-dihedral">5.4.1.17. PESScan dihedral</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#pesscan-distance">5.4.1.18. PESScan distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#rmsd">5.4.1.19. RMSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#shear-modulus">5.4.1.20. Shear modulus</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor">5.4.1.21. Stress tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-1d">5.4.1.22. Stress tensor 1D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-2d">5.4.1.23. Stress tensor 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-3d">5.4.1.24. Stress tensor 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-diagonal-2d">5.4.1.25. Stress tensor diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-diagonal-3d">5.4.1.26. Stress tensor diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-off-diagonal-2d">5.4.1.27. Stress tensor off-diagonal 2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#stress-tensor-off-diagonal-3d">5.4.1.28. Stress tensor off-diagonal 3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#vibrational-frequencies">5.4.1.29. Vibrational frequencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="extractors.html#young-modulus">5.4.1.30. Young modulus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="extractors.html#custom-extractors">5.4.2. Custom Extractors</a></li>
<li class="toctree-l3"><a class="reference internal" href="extractors.html#supported-data-structures">5.4.3. Supported Data Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="extractors.html#custom-comparators">5.4.4. Custom Comparators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_set_evaluator.html">5.5. Data Set Evaluator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_set_evaluator.html#datasetevaluator-class">5.5.1. DataSetEvaluator class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-datasetevaluator-calculate-reference">5.5.1.1. Example: DataSetEvaluator.calculate_reference()</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-datasetevaluator-run">5.5.1.2. Example: DataSetEvaluator.run()</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_set_evaluator.html#example-load-a-saved-datasetevaluator">5.5.1.3. Example: Load a saved DataSetEvaluator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data_set_evaluator.html#datasetevaluator-api">5.5.2. DataSetEvaluator API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../results_importer/results_importer.html">5.6. Results Importer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/overview.html">5.6.1. ResultsImporter overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#resultsimporter-summary">5.6.1.1. ResultsImporter summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#resultsimporter-settings">5.6.1.2. ResultsImporter settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#training-set-validation-set-etc">5.6.1.3. Training set, validation set, etc.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#save-and-load-from-disk">5.6.1.4. Save and load from disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-singlejob">5.6.1.5. add_singlejob</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-trajectory-singlepoints">5.6.1.6. add_trajectory_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-reaction-energy">5.6.1.7. add_reaction_energy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-pesscan-singlepoints">5.6.1.8. add_pesscan_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-neb-singlepoints">5.6.1.9. add_neb_singlepoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/overview.html#add-pesexploration-singlepoints">5.6.1.10. add_pesexploration_singlepoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/reference_codes.html">5.6.2. AMS, VASP and Quantum ESPRESSO reference data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#ams">5.6.2.1. AMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#vasp">5.6.2.2. VASP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../results_importer/reference_codes.html#quantum-espresso">5.6.2.3. Quantum ESPRESSO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../results_importer/api.html">5.6.3. ResultsImporters API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/interfaces.html">5.7. Parameter Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#available-parameter-interfaces">5.7.1. Available Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/xtb.html">5.7.1.1. xTB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/reaxff.html">5.7.1.2. ReaxFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/dftbsplinerep.html">5.7.1.3. SCC-DFTB repulsive potential</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/lennardjones.html">5.7.1.4. Lennard Jones</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#parameter-interface-basics">5.7.2. Parameter Interface Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#working-with-parameters">5.7.3. Working with Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#the-active-parameters-subset">5.7.4. The Active Parameters Subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#storage">5.7.5. Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interfaces/interfaces.html#lossless-storage">5.7.5.1. Lossless Storage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#relation-to-plams-settings">5.7.6. Relation to PLAMS Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#parameter-api">5.7.7. Parameter API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interfaces/interfaces.html#interface-base-class-api">5.7.8. Interface Base Class API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizers/optimizers.html">5.8. Optimizers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/cmaes.html">5.8.1. CMA-ES</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/cmaes.html#list-of-valid-cmasettings">5.8.1.1. List of valid <cite>cmasettings</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/cmaes.html#references">5.8.1.2. References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/scipy.html">5.8.2. Scipy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/nevergrad.html">5.8.3. Nevergrad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/armc.html">5.8.4. Adaptive Rate MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/grid.html">5.8.5. Simple Grid Optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/base.html">5.8.6. Optimizer Base Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/base.html#baseoptimizer-api">5.8.6.1. BaseOptimizer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../optimizers/base.html#minimizeresult-api">5.8.6.2. MinimizeResult API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../runner/runner.html">5.9. Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../runner/runner.html#optimization-setup">5.9.1. Optimization Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/runner.html#optimization-api">5.9.2. Optimization API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../runner/parallellevels.html">5.10. Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../constraints/constraints.html">5.11. Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../callbacks/callbacks.html">5.12. Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#default-callbacks">5.12.1. Default callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#logger">5.12.2. Logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#timeout">5.12.3. Timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#target-value">5.12.4. Target Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#maximum-iterations">5.12.5. Maximum Iterations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#early-stopping">5.12.6. Early Stopping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#stopfile">5.12.7. Stopfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#time-per-evaluation">5.12.8. Time per Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#load-average">5.12.9. Load Average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#user-defined-callbacks">5.12.10. User-Defined Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../callbacks/callbacks.html#callback-api">5.12.11. Callback API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lossfunctions/lossfunctions.html">5.13. Loss Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#specifying-the-loss-function">5.13.1. Specifying the loss function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#technical-information">5.13.2. Technical information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#sum-of-squares-error">5.13.3. Sum of Squares Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#sum-of-absolute-errors">5.13.4. Sum of Absolute Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#mean-absolute-error">5.13.5. Mean Absolute Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#root-mean-square-error">5.13.6. Root-Mean-Square Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-function-api">5.13.7. Loss Function API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/utilities.html">5.14. Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utilities/converters.html">5.14.1. ParAMS Converters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../utilities/converters.html#ams-job-to-settings">5.14.1.1. AMS Job to Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/converters.html#ams-job-to-engine">5.14.1.2. AMS Job to Engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/history.html">5.14.2. Optimization History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/plotting.html">5.14.3. Plotting Funcitons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/public_helpers.html">5.14.4. Helper functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/weights_schemes.html">5.14.5. Weights schemes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#types-of-weights-schemes">5.14.5.1. Types of weights schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#examples-of-weight-schemes">5.14.5.2. Examples of weight schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/weights_schemes.html#weights-schemes-api">5.14.5.3. Weights schemes API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../experimental/experimental.html">5.15. Experimental Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../experimental/parameter_interfaces.html">5.15.1. Working with Parameter Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../experimental/parameter_interfaces.html#active-parameter-search">5.15.1.1. Active Parameter Search</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../experimental/data_set.html">5.15.2. Working with Data Sets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../experimental/data_set.html#data-set-sensitivity">5.15.2.1. Data Set Sensitivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../experimental/data_set.html#normalization-of-data-set-weights">5.15.2.2. Normalization of Data Set Weights</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cite.html">6. Required Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">7. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">8. Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ParAMS</a>
      </nav>
<!--ENDNOSOLR-->

      
      <div class="wy-nav-content">
        <div class="rst-content">
        <!--STARTNOSOLR-->
<div class="header" role="navigation" aria-label="breadcrumbs navigation">
 
  <ul class="wy-breadcrumbs">
    <li><a href="../../ParAMS.html/../../Documentation/index.html">Documentation</a>/</li>
    <li><a href="../../index.html">ParAMS</a>/</li>
      
          <li><a href="../components.html">5. Components</a>/</li>
      
    <li class="orange-text">5.3. Data Set</li>
  </ul>
  <p>
 
</div>
<!--ENDNOSOLR-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-set">
<span id="dataset"></span><h1>5.3. Data Set<a class="headerlink" href="#data-set" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents-of-this-page">
<p class="topic-title first">Contents of this Page</p>
<ul class="simple">
<li><a class="reference internal" href="#an-example-dataset" id="id1">An example DataSet</a></li>
<li><a class="reference internal" href="#load-or-store-dataset" id="id2">Load or store DataSet</a></li>
<li><a class="reference internal" href="#adding-entries" id="id3">Adding entries</a></li>
<li><a class="reference internal" href="#demonstration-working-with-a-dataset" id="id4">Demonstration: Working with a DataSet</a><ul>
<li><a class="reference internal" href="#add-an-entry" id="id5">Add an entry</a></li>
<li><a class="reference internal" href="#datasetentry-attributes" id="id6">DataSetEntry attributes</a></li>
<li><a class="reference internal" href="#accessing-the-dataset-entries" id="id7">Accessing the DataSet entries</a></li>
<li><a class="reference internal" href="#delete-a-dataset-entry" id="id8">Delete a DataSet entry</a></li>
<li><a class="reference internal" href="#split-a-dataset-into-subsets" id="id9">Split a DataSet into subsets</a></li>
<li><a class="reference internal" href="#dataset-header" id="id10">DataSet header</a></li>
<li><a class="reference internal" href="#save-the-data-set" id="id11">Save the data set</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calculating-and-adding-reference-data-with-ams" id="id12">Calculating and Adding Reference Data with AMS</a></li>
<li><a class="reference internal" href="#calculating-the-loss-function-value" id="id13">Calculating the Loss Function Value</a></li>
<li><a class="reference internal" href="#checking-for-consistency-with-a-given-job-collection" id="id14">Checking for Consistency with a given Job Collection</a></li>
<li><a class="reference internal" href="#sigma-vs-weight-what-is-the-difference" id="id15">Sigma vs. weight: What is the difference?</a></li>
<li><a class="reference internal" href="#data-set-entry-api" id="id16">Data Set Entry API</a></li>
<li><a class="reference internal" href="#data-set-api" id="id17">Data Set API</a></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="an-example-dataset">
<h2><a class="toc-backref" href="#id1">5.3.1. An example DataSet</a><a class="headerlink" href="#an-example-dataset" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> class contains expressions that are evaluated during the parameter optimization.
For each new parameter set, the expressions are evaluated, and the results are compared to
reference values.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> class contains a series of <a class="reference internal" href="#scm.params.core.dataset.DataSetEntry" title="scm.params.core.dataset.DataSetEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetEntry</span></code></a>. For example, a <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instance
with 3 entries might look like this, when stored on disk in the text-based YAML format:</p>
<div class="highlight-yaml notranslate" id="cfyaml"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">Comment</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">An example dataset</span>
<span class="l l-Scalar l-Scalar-Plain">Date</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">21-May-2001</span>
<span class="l l-Scalar l-Scalar-Plain">dtype</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DataSet</span>
<span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.5.1</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">Expression</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">angle(&#39;H2O&#39;, 0, 1, 2)</span>
<span class="l l-Scalar l-Scalar-Plain">Weight</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.333</span>
<span class="l l-Scalar l-Scalar-Plain">Sigma</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="l l-Scalar l-Scalar-Plain">Unit</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">degree, 1.0</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">Expression</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)</span>
<span class="l l-Scalar l-Scalar-Plain">Weight</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="l l-Scalar l-Scalar-Plain">Sigma</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="l l-Scalar l-Scalar-Plain">ReferenceValue</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">-241.8</span>
<span class="l l-Scalar l-Scalar-Plain">Unit</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">kJ/mol, 2625.15</span>
<span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Hydrogen combustion (gasphase) per mol H2</span>
<span class="l l-Scalar l-Scalar-Plain">Source</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">NIST Chemistry WebBook</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">Expression</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">forces(&#39;distorted_H2O&#39;)</span>
<span class="l l-Scalar l-Scalar-Plain">Weight</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="l l-Scalar l-Scalar-Plain">ReferenceValue</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
   <span class="no">array([[ 0.0614444 , -0.11830478,  0.03707212],</span>
          <span class="no">[-0.05000567,  0.09744271, -0.03291899],</span>
          <span class="no">[-0.01143873,  0.02086207, -0.00415313]])</span>
<span class="l l-Scalar l-Scalar-Plain">Unit</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Ha/bohr, 1.0</span>
<span class="l l-Scalar l-Scalar-Plain">Source</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Calculated_with_DFT</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Comment</span></code>, <code class="docutils literal notranslate"><span class="pre">Date</span></code>, <code class="docutils literal notranslate"><span class="pre">dtype</span></code>, and <code class="docutils literal notranslate"><span class="pre">version</span></code> are part of the <a class="reference internal" href="#dataset-header"><span class="std std-ref">header</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">H2O</span></code>, <code class="docutils literal notranslate"><span class="pre">O2</span></code>, <code class="docutils literal notranslate"><span class="pre">H2</span></code>, and <code class="docutils literal notranslate"><span class="pre">distorted_H2O</span></code> are jobs that appear in the <a class="reference internal" href="../collections/collections.html#job-collection"><span class="std std-ref">Job Collection</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">energy</span></code>, <code class="docutils literal notranslate"><span class="pre">forces</span></code>, and <code class="docutils literal notranslate"><span class="pre">angle</span></code> are <a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">extractors</span></a> that extract some result from a finished job.</li>
<li><em>Expression</em> and <em>Weight</em> are required for each data_set entry</li>
<li><em>ReferenceValue</em> is the reference value expressed in <em>Unit</em>. If no <em>Unit</em> is given, the unit must equal the <a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">default unit for the given extractor</span></a>. If no <em>ReferenceValue</em> is given, it can be calculated by the <a class="reference internal" href="../../mainscript/mainscript.html#params-main-script"><span class="std std-ref">ParAMS Main Script</span></a> or with the <a class="reference internal" href="data_set_evaluator.html#datasetevaluator"><span class="std std-ref">Data Set Evaluator</span></a> class.</li>
<li><em>Sigma</em> is the sigma value expressed in <em>Unit</em>. If no <em>Sigma</em> is given, it will equal the <a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">default sigma for the given extractor</span></a>. For details, see <a class="reference internal" href="#sigmavsweight"><span class="std std-ref">Sigma vs. weight: What is the difference?</span></a>.</li>
<li><em>Source</em> and <em>Description</em> are optional metadata keys. Arbitrary metadata keys can be used.</li>
</ul>
<p>During the parameter optimization you may use both a <strong>training set</strong> and <strong>validation set</strong>. In that case you would have
two separate <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instances: one for the training set, and one for the validation set. See the tutorial <a class="reference internal" href="../../examples/lj_ar/lj_ar_validation_set.html#lj-ar-validationset"><span class="std std-ref">Training and validation sets</span></a>.</p>
<p>Use the <a class="reference internal" href="data_set_evaluator.html#datasetevaluator"><span class="std std-ref">Data Set Evaluator</span></a> class to evaluate the data_set
expressions with any engine settings and to compare the results to the <em>ReferenceValues</em>.</p>
<p>For more details, see</p>
<ul class="simple">
<li><a class="reference internal" href="#datasetloadorstore"><span class="std std-ref">Load or store DataSet</span></a></li>
<li><a class="reference internal" href="#datasetaddentry"><span class="std std-ref">Adding entries</span></a></li>
<li><a class="reference internal" href="#datasetdemonstration"><span class="std std-ref">Demonstration: Working with a DataSet</span></a></li>
<li><a class="reference internal" href="#sigmavsweight"><span class="std std-ref">Sigma vs. weight: What is the difference?</span></a></li>
<li><a class="reference internal" href="#datasetentryapi"><span class="std std-ref">Data Set Entry API</span></a></li>
<li><a class="reference internal" href="#datasetapi"><span class="std std-ref">Data Set API</span></a>.</li>
</ul>
</div>
<div class="section" id="load-or-store-dataset">
<span id="datasetloadorstore"></span><h2><a class="toc-backref" href="#id2">5.3.2. Load or store DataSet</a><a class="headerlink" href="#load-or-store-dataset" title="Permalink to this headline">¶</a></h2>
<p>Save the above text block with the name <code class="docutils literal notranslate"><span class="pre">data_set.yaml</span></code>. You can then load it into a <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instance with</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scm.params</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">data_set</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">(</span><span class="s1">&#39;data_set.yaml&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">)</span>
</pre></div>
</div>
<p>To save it to a new .yaml file, call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">store()</span></code> method:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="s1">&#39;new_file.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also store the DataSet in a binary (pickled) format:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">pickle_dump</span><span class="p">(</span><span class="s1">&#39;data_set.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The binary .pkl format is faster to read than the text-based .yaml file, especially for large DataSets.</p>
<p>To load a .pkl file:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">(</span><span class="s1">&#39;data_set.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="adding-entries">
<span id="datasetaddentry"></span><h2><a class="toc-backref" href="#id3">5.3.3. Adding entries</a><a class="headerlink" href="#adding-entries" title="Permalink to this headline">¶</a></h2>
<p>Add entries with the <a class="reference internal" href="#scm.params.core.dataset.DataSet.add_entry" title="scm.params.core.dataset.DataSet.add_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_entry()</span></code></a> method.</p>
<p>The arguments are:</p>
<ul class="simple">
<li><em>expression</em> (<strong>required</strong>): The expression to be evaluated. The <em>expression</em> must be unique.</li>
<li><em>weight</em> (<strong>required</strong>): The weight of the entry. A larger weight will give a bigger contribution to the overall loss function. A larger weight thus indicate a more important data_set entry. The <em>weight</em> can either be a scalar or a numpy array with the same dimensions as <em>reference</em>. If <em>weight</em> is a scalar but <em>reference</em> is an array, then <strong>every</strong> component of the <em>reference</em> will be weighted with <em>weight</em>. See also <a class="reference internal" href="#sigmavsweight"><span class="std std-ref">Sigma vs. weight: What is the difference?</span></a>.</li>
<li><em>reference</em> (<strong>recommended</strong>): The reference value, expressed in <em>unit</em>. If no reference value is given, it is possible to calculate it before the parametrization using the <a class="reference internal" href="../../mainscript/mainscript.html#params-main-script"><span class="std std-ref">params main script</span></a>. Can either be a scalar or a numpy array, depending on the extractor in <em>expression</em>.</li>
<li><em>sigma</em> (<strong>recommended</strong>): A value to normalize the <em>expression</em> (see <a class="reference internal" href="#sigmavsweight"><span class="std std-ref">Sigma vs. weight: What is the difference?</span></a>). If no <em>sigma</em> value is given, a default one will be used depending on the <a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">extractor</span></a> in the <em>expression</em>. If the <em>expression</em> contains more than one unique extractor, <em>sigma</em> is required. <em>Sigma</em> has the same <em>unit</em> as <em>reference</em>.</li>
<li><em>unit</em> (<strong>recommended</strong>): The unit of <em>reference</em> and <em>sigma</em>. Should be expressed as a 2-tuple <code class="docutils literal notranslate"><span class="pre">('label',</span> <span class="pre">conversion_ratio_float)</span></code>, where the ‘label’ is not used other than for being printed to the output, and <code class="docutils literal notranslate"><span class="pre">conversion_ratio_float</span></code> is a floating point number which is used to convert the <a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">default unit</span></a> to the new unit. For example, <em>unit</em> for an energy might equal <code class="docutils literal notranslate"><span class="pre">('eV',</span> <span class="pre">27.211)</span></code> which will convert the default unit <code class="docutils literal notranslate"><span class="pre">('hartree',</span> <span class="pre">1.0)</span></code> to eV. The <em>reference</em> and <em>sigma</em> values should then be expressed in eV. NOTE: If you specify a <em>unit</em> you <strong>must</strong> also specify a <em>sigma</em> value, otherwise the default <em>sigma</em> will have the wrong unit.</li>
<li><em>metadata</em> (<strong>optional</strong>): A dictionary containing arbitrary metadata (for example sources for experimental reference data, or other metadata to help with postprocessing).</li>
</ul>
</div>
<div class="section" id="demonstration-working-with-a-dataset">
<span id="datasetdemonstration"></span><h2><a class="toc-backref" href="#id4">5.3.4. Demonstration: Working with a DataSet</a><a class="headerlink" href="#demonstration-working-with-a-dataset" title="Permalink to this headline">¶</a></h2>
<p>Download <a class="reference download internal" download="" href="../../_downloads/c3d27170f97406d3886f357a79e9f9ee/data_set_demo.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">data_set_demo.ipynb</span></code></a> or <a class="reference download internal" download="" href="../../_downloads/39e0d67dec1b35034f1d1af0671c2f02/data_set_demo.py"><code class="xref download docutils literal notranslate"><span class="pre">data_set_demo.py</span></code></a></p>
<div class="section" id="add-an-entry">
<h3><a class="toc-backref" href="#id5">5.3.4.1. Add an entry</a><a class="headerlink" href="#add-an-entry" title="Permalink to this headline">¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scm.params</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">data_set</span> <span class="o">=</span> <span class="n">DataSet</span><span class="p">()</span>
<span class="n">data_set</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">0.333</span><span class="p">)</span>
</pre></div>
</div>
<p>To <strong>access the last added element</strong>, use <code class="docutils literal notranslate"><span class="pre">data_set[-1]</span></code></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;String representation of data_set[-1]&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Type: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>String representation of data_set[-1]
---
Expression: angle(&#39;H2O&#39;, 0, 1, 2)
Weight: 0.333
Unit: degree, 1.0

Type: &lt;class &#39;scm.params.core.data_set.DataSetEntry&#39;&gt;
</pre></div>
</div>
<p>You can also <strong>change it after you’ve added it</strong>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">0.333</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">3.0</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">degree</span><span class="p">,</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>We recommend to always specify the <em>reference value</em>, the <em>unit</em>, and
the <em>sigma</em> value when adding an entry, and also to specify any
meaningful <em>metadata</em> about the data set entry.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">,</span>
                  <span class="n">weight</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
                  <span class="n">reference</span><span class="o">=-</span><span class="mf">241.8</span><span class="p">,</span>
                  <span class="n">unit</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;kJ/mol&#39;</span><span class="p">,</span> <span class="mf">2625.15</span><span class="p">),</span>
                  <span class="n">sigma</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                  <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
                      <span class="s1">&#39;Source&#39;</span><span class="p">:</span> <span class="s1">&#39;NIST Chemistry WebBook&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Description&#39;</span><span class="p">:</span> <span class="s1">&#39;Hydrogen combustion (gasphase) per mol H2&#39;</span>
                  <span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">10.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">-</span><span class="mf">241.8</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kJ</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">2625.15</span>
<span class="n">Description</span><span class="p">:</span> <span class="n">Hydrogen</span> <span class="n">combustion</span> <span class="p">(</span><span class="n">gasphase</span><span class="p">)</span> <span class="n">per</span> <span class="n">mol</span> <span class="n">H2</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">NIST</span> <span class="n">Chemistry</span> <span class="n">WebBook</span>
</pre></div>
</div>
<p>All <em>expressions</em> in a single DataSet <strong>must be unique</strong>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">data_set</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Caught the following exception: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</pre></div>
</div>
<pre class="literal-block">
Caught the following exception: Expression <cite>energy('H2O')-0.5*energy('O2')-energy('H2')</cite> already in DataSet.
</pre>
<p>The <strong>reference values can also be numpy arrays</strong>, for example when
extracting forces or charges:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">forces</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.0614444</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.11830478</span><span class="p">,</span>  <span class="mf">0.03707212</span><span class="p">],</span>
                  <span class="p">[</span><span class="o">-</span><span class="mf">0.05000567</span><span class="p">,</span>  <span class="mf">0.09744271</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03291899</span><span class="p">],</span>
                  <span class="p">[</span><span class="o">-</span><span class="mf">0.01143873</span><span class="p">,</span>  <span class="mf">0.02086207</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00415313</span><span class="p">]])</span>
<span class="n">data_set</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">,</span>
                  <span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                  <span class="n">reference</span><span class="o">=</span><span class="n">forces</span><span class="p">,</span>
                  <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Source&#39;</span><span class="p">:</span> <span class="s1">&#39;Calculated_with_DFT&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">forces</span><span class="p">(</span><span class="s1">&#39;distorted_H2O&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">array</span><span class="p">([[</span> <span class="mf">0.0614444</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.11830478</span><span class="p">,</span>  <span class="mf">0.03707212</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.05000567</span><span class="p">,</span>  <span class="mf">0.09744271</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03291899</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.01143873</span><span class="p">,</span>  <span class="mf">0.02086207</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00415313</span><span class="p">]])</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">Ha</span><span class="o">/</span><span class="n">bohr</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">Calculated_with_DFT</span>
</pre></div>
</div>
</div>
<div class="section" id="datasetentry-attributes">
<h3><a class="toc-backref" href="#id6">5.3.4.2. DataSetEntry attributes</a><a class="headerlink" href="#datasetentry-attributes" title="Permalink to this headline">¶</a></h3>
<p>A DataSetEntry has the following attributes:</p>
<ul class="simple">
<li><strong>expression</strong> : str</li>
<li><strong>weight</strong> : float or numpy array</li>
<li><strong>unit</strong> : 2-tuple (str, float)</li>
<li><strong>reference</strong> : float or numpy array</li>
<li><strong>sigma</strong> : float</li>
<li><strong>jobids</strong> : set of str (read-only). The job ids that appear in the
expression.</li>
<li><strong>extractors</strong> : set of str (read-only). The extractors that appear
in the expression.</li>
</ul>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reference</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="mf">2.0</span>
<span class="p">(</span><span class="s1">&#39;kJ/mol&#39;</span><span class="p">,</span> <span class="mf">2625.15</span><span class="p">)</span>
<span class="o">-</span><span class="mf">241.8</span>
<span class="mf">10.0</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">jobids</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;H2&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">,</span> <span class="s1">&#39;H2O&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">extractors</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;energy&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-the-dataset-entries">
<h3><a class="toc-backref" href="#id7">5.3.4.3. Accessing the DataSet entries</a><a class="headerlink" href="#accessing-the-dataset-entries" title="Permalink to this headline">¶</a></h3>
<p>Above, <code class="docutils literal notranslate"><span class="pre">data_set[-1]</span></code> was used to access the last added element, and
<code class="docutils literal notranslate"><span class="pre">data_set[-2]</span></code> to access the second to last added element. More
generally, the DataSet can be <strong>indexed either as a</strong> <code class="docutils literal notranslate"><span class="pre">list</span></code> <strong>or as
a</strong> <code class="docutils literal notranslate"><span class="pre">dict</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reference</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">reference</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="o">-</span><span class="mf">241.8</span>
<span class="o">-</span><span class="mf">241.8</span>
</pre></div>
</div>
<p><strong>Get the number of entries</strong> in the DataSet with <code class="docutils literal notranslate"><span class="pre">len()</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_set</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span>
</pre></div>
</div>
<p><strong>Get all of the expressions</strong> with <code class="xref py py-meth docutils literal notranslate"><span class="pre">get('expression')</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">keys</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expression&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code> method also works for all other <cite>DataSetEntry</cite> attirbutes, <em>e.g.</em>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;extractors&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">0.333</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="p">[{</span><span class="s1">&#39;angle&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;energy&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;forces&#39;</span><span class="p">}]</span>
</pre></div>
</div>
<p><strong>Loop over DataSet entries</strong>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ds_entry</span> <span class="ow">in</span> <span class="n">data_set</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds_entry</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;distorted_H2O&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code> method:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">data_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expression&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;distorted_H2O&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Use the <strong>DataSet.index()</strong> method to get the index of a DataSetEntry:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds_entry</span> <span class="o">=</span> <span class="n">data_set</span><span class="p">[</span><span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ds_entry</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-a-dataset-entry">
<h3><a class="toc-backref" href="#id8">5.3.4.4. Delete a DataSet entry</a><a class="headerlink" href="#delete-a-dataset-entry" title="Permalink to this headline">¶</a></h3>
<p><strong>Remove</strong> an entry with <code class="docutils literal notranslate"><span class="pre">del</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;energy(&#39;some_job&#39;)&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_set</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
<span class="k">del</span> <span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># or del data_set[&quot;energy(&#39;some_job&#39;)&quot;]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_set</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">4</span>
<span class="n">energy</span><span class="p">(</span><span class="s1">&#39;some_job&#39;</span><span class="p">)</span>
<span class="mi">3</span>
<span class="n">forces</span><span class="p">(</span><span class="s1">&#39;distorted_H2O&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">del</span></code> can also be used to delete multiple entries at once, as in
<code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">data_set[0,2]</span></code> to remove the first and third entries.</p>
</div>
<div class="section" id="split-a-dataset-into-subsets">
<h3><a class="toc-backref" href="#id9">5.3.4.5. Split a DataSet into subsets</a><a class="headerlink" href="#split-a-dataset-into-subsets" title="Permalink to this headline">¶</a></h3>
<p>The following methods return a new <a class="reference internal" href="#scm.params.core.dataset.DataSet" title="scm.params.core.dataset.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>:</p>
<ul class="simple">
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">split</span></code> to get a list of nonoverlapping subsets.</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">maxjobs</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">random</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_expressions</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_jobids</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_extractors</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_metadata</span></code></li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">For all of the above methods,
modifying entries in a subset will also modify the entries in the original data_set, and vice versa!
If you do not want this behavior, apply the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">copy</span></code> method to the created subsets.</p>
</div>
<p><strong>Subset from a list of given expressions</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_expressions</span><span class="p">([</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span>
                                   <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Modifying entries in a subset will also modify the entries in the original data_set, and vice versa!</p>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span>
<span class="n">original_sigma</span> <span class="o">=</span> <span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;For expression </span><span class="si">{}</span><span class="s2"> the original sigma value is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">original_sigma</span><span class="p">))</span>

<span class="n">subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="mi">1234</span> <span class="c1"># this modifies the entry in the original data_set</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>

<span class="c1"># restore the original value, this modifies the subset!</span>
<span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="n">original_sigma</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">For</span> <span class="n">expression</span> <span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">the</span> <span class="n">original</span> <span class="n">sigma</span> <span class="n">value</span> <span class="ow">is</span><span class="p">:</span> <span class="mf">3.0</span>
<span class="mi">1234</span>
<span class="mi">1234</span>
<span class="mf">3.0</span>
<span class="mf">3.0</span>
</pre></div>
</div>
<p><strong>To modify a subset without modifying the original DataSet</strong>, you must
create a <code class="docutils literal notranslate"><span class="pre">copy</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_subset</span> <span class="o">=</span> <span class="n">subset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="mi">2345</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2345</span>
<span class="mf">3.0</span>
<span class="mf">3.0</span>
</pre></div>
</div>
<p><strong>Subset from a list of job ids</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_jobids</span><span class="p">([</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">,</span> <span class="s1">&#39;H2&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Subset from metadata key-value pairs</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_metadata</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;NIST Chemistry WebBook&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">DataSet</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">10.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">-</span><span class="mf">241.8</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kJ</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">2625.15</span>
<span class="n">Description</span><span class="p">:</span> <span class="n">Hydrogen</span> <span class="n">combustion</span> <span class="p">(</span><span class="n">gasphase</span><span class="p">)</span> <span class="n">per</span> <span class="n">mol</span> <span class="n">H2</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">NIST</span> <span class="n">Chemistry</span> <span class="n">WebBook</span>
<span class="o">...</span>
</pre></div>
</div>
<p>You can also match using <strong>regular expressions</strong>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_metadata</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;^N[iI]ST\s+Che\w&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Subset from extractors</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_extractors</span><span class="p">(</span><span class="s1">&#39;forces&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expression&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>A subset from multiple extractors can be generated by passing a list:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">from_extractors</span><span class="p">([</span><span class="s1">&#39;angle&#39;</span><span class="p">,</span><span class="s1">&#39;forces&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expression&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Random subset with N entries</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">314</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Split the data_set into random nonoverlapping subsets</strong></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subset_list</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">314</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;forces(&#39;distorted_H2O&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;energy(&#39;H2O&#39;)-0.5*energy(&#39;O2&#39;)-energy(&#39;H2&#39;)&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="s2">&quot;angle(&#39;H2O&#39;, 0, 1, 2)&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-header">
<h3><a class="toc-backref" href="#id10">5.3.4.6. DataSet header</a><a class="headerlink" href="#dataset-header" title="Permalink to this headline">¶</a></h3>
<p>The header can be used to store comments about a data_set. When storing
as a .yaml file, the header is printed as a separate YAML entry at the
top of the file.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Comment&#39;</span><span class="p">:</span> <span class="s1">&#39;An example data_set&#39;</span><span class="p">,</span> <span class="s1">&#39;Date&#39;</span><span class="p">:</span> <span class="s1">&#39;21-May-2001&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_set</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">Comment</span><span class="p">:</span> <span class="n">An</span> <span class="n">example</span> <span class="n">data_set</span>
<span class="n">Date</span><span class="p">:</span> <span class="mi">21</span><span class="o">-</span><span class="n">May</span><span class="o">-</span><span class="mi">2001</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">DataSet</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">0.5</span><span class="o">.</span><span class="mi">1</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">angle</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">0.333</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">3.0</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">degree</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span><span class="o">-</span><span class="n">energy</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="n">Sigma</span><span class="p">:</span> <span class="mf">10.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">-</span><span class="mf">241.8</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">kJ</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="mf">2625.15</span>
<span class="n">Description</span><span class="p">:</span> <span class="n">Hydrogen</span> <span class="n">combustion</span> <span class="p">(</span><span class="n">gasphase</span><span class="p">)</span> <span class="n">per</span> <span class="n">mol</span> <span class="n">H2</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">NIST</span> <span class="n">Chemistry</span> <span class="n">WebBook</span>
<span class="o">---</span>
<span class="n">Expression</span><span class="p">:</span> <span class="n">forces</span><span class="p">(</span><span class="s1">&#39;distorted_H2O&#39;</span><span class="p">)</span>
<span class="n">Weight</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="n">ReferenceValue</span><span class="p">:</span> <span class="o">|</span>
   <span class="n">array</span><span class="p">([[</span> <span class="mf">0.0614444</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.11830478</span><span class="p">,</span>  <span class="mf">0.03707212</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.05000567</span><span class="p">,</span>  <span class="mf">0.09744271</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03291899</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="mf">0.01143873</span><span class="p">,</span>  <span class="mf">0.02086207</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00415313</span><span class="p">]])</span>
<span class="n">Unit</span><span class="p">:</span> <span class="n">Ha</span><span class="o">/</span><span class="n">bohr</span><span class="p">,</span> <span class="mf">1.0</span>
<span class="n">Source</span><span class="p">:</span> <span class="n">Calculated_with_DFT</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="save-the-data-set">
<h3><a class="toc-backref" href="#id11">5.3.4.7. Save the data set</a><a class="headerlink" href="#save-the-data-set" title="Permalink to this headline">¶</a></h3>
<p>See also <a class="reference internal" href="#datasetloadorstore"><span class="std std-ref">Load or store DataSet</span></a></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_set</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="s1">&#39;data_set.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="calculating-and-adding-reference-data-with-ams">
<span id="calculatingandaddingreferencedatawithams"></span><h2><a class="toc-backref" href="#id12">5.3.5. Calculating and Adding Reference Data with AMS</a><a class="headerlink" href="#calculating-and-adding-reference-data-with-ams" title="Permalink to this headline">¶</a></h2>
<p>If some reference values are not yet available in the Data Set, the user can
run AMS calculations to calculate them. This is done with the <a class="reference internal" href="data_set_evaluator.html#datasetevaluator"><span class="std std-ref">Data Set Evaluator</span></a> class.</p>
</div>
<hr class="docutils" />
<div class="section" id="calculating-the-loss-function-value">
<h2><a class="toc-backref" href="#id13">5.3.6. Calculating the Loss Function Value</a><a class="headerlink" href="#calculating-the-loss-function-value" title="Permalink to this headline">¶</a></h2>
<p>The value of the loss function can be calculated with the <a class="reference internal" href="data_set_evaluator.html#datasetevaluator"><span class="std std-ref">Data Set Evaluator</span></a> class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The execution of jobs and evaluation of the Data Set is handled automatically during the <a class="reference internal" href="../runner/runner.html#optimization"><span class="std std-ref">Optimization</span></a>.
In most cases the user does not need to manually calculate the loss function value.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The loss function value can only be calculated if each entry in the data set has a reference value.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="checking-for-consistency-with-a-given-job-collection">
<h2><a class="toc-backref" href="#id14">5.3.7. Checking for Consistency with a given Job Collection</a><a class="headerlink" href="#checking-for-consistency-with-a-given-job-collection" title="Permalink to this headline">¶</a></h2>
<p>Data Set entries are tied to a <a class="reference internal" href="../collections/collections.html#scm.params.core.jobcollection.JobCollection" title="scm.params.core.jobcollection.JobCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobCollection</span></code></a> by a common <cite>jobID</cite>.
The consistency of every <cite>DataSet</cite> instance can be checked with the <a class="reference internal" href="#scm.params.core.dataset.DataSet.check_consistency" title="scm.params.core.dataset.DataSet.check_consistency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.check_consistency()</span></code></a> method.
It will check if any <a class="reference internal" href="#scm.params.core.dataset.DataSetEntry" title="scm.params.core.dataset.DataSetEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetEntry</span></code></a> has <code class="xref py py-attr docutils literal notranslate"><span class="pre">jobids</span></code> that are not included in a <a class="reference internal" href="../collections/collections.html#scm.params.core.jobcollection.JobCollection" title="scm.params.core.jobcollection.JobCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobCollection</span></code></a> instance
and if so, return a list of indices with entries that can not be calculated given the Job Collection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DataSet() in ds, JobCollection() in jc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bad_ids</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">check_consistency</span><span class="p">(</span><span class="n">jc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bad_ids</span> <span class="c1"># `ds` entries with these indices could not be calculated given `jc`, meaning the property for the calculation of these entries requires a chemical system which is not present in `jc`</span>
<span class="go">[1,10,13]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ds</span><span class="p">[</span><span class="n">bad_ids</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="go">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">check_consistency</span><span class="p">(</span><span class="n">jc</span><span class="p">)</span> <span class="c1"># No more issues</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#scm.params.core.dataset.DataSet.check_consistency" title="scm.params.core.dataset.DataSet.check_consistency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.check_consistency()</span></code></a> method is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bad_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span><span class="p">,</span><span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">jc</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">jobids</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="section" id="sigma-vs-weight-what-is-the-difference">
<span id="sigmavsweight"></span><h2><a class="toc-backref" href="#id15">5.3.8. Sigma vs. weight: What is the difference?</a><a class="headerlink" href="#sigma-vs-weight-what-is-the-difference" title="Permalink to this headline">¶</a></h2>
<p><em>Sigma</em> (σ) and <em>weight</em> both affect how much a given data_set entry contributes to the loss function.</p>
<p>For example, the loss function might be a sum-of-squared-errors (SSE) function:</p>
<div class="math notranslate nohighlight">
\[\textrm{SSE} = \sum_{i=1}^N w_i\left(\frac{y_i - \hat{y}_i}{\sigma _i}\right)^2\]</div>
<p>where the sum runs over all data_set entries, <span class="math notranslate nohighlight">\(w_i\)</span> is the <em>weight</em> for data_set entry <span class="math notranslate nohighlight">\(i\)</span>, <span class="math notranslate nohighlight">\(y_i\)</span>
is the reference value, <span class="math notranslate nohighlight">\(\hat{y}_i\)</span> is the predicted value, and <span class="math notranslate nohighlight">\(\sigma\)</span> is the <em>sigma</em>.</p>
<p>The interpretation for <em>sigma</em> is that it corresponds to an “acceptable prediction error”. <em>Sigma</em>
has the same unit as the reference value, and its magnitude therefore depends on which unit the
reference value is expressed in. The purpose of <em>sigma</em> is to normalize the residual <span class="math notranslate nohighlight">\((y_i-\hat{y}_i)\)</span>,
no matter which unit <span class="math notranslate nohighlight">\(y_i\)</span> and <span class="math notranslate nohighlight">\(\hat{y}_i\)</span> are expressed in. In this way, it is possible
to mix different physical quantities (energies, forces, charges, etc.) in the same training set.</p>
<p>The interpretation for <em>weight</em> is that it corresponds to how important one thinks a datapoint is.
It has no unit.</p>
<p>For array reference values, like forces, the <em>sigma</em> value is the same for each force component, but the
<em>weight</em> can <a class="reference internal" href="../utilities/weights_schemes.html#weightsschemes"><span class="std std-ref">vary for different force components in the same structure</span></a>.
If there are <span class="math notranslate nohighlight">\(M_i\)</span> force components for the structure <span class="math notranslate nohighlight">\(i\)</span>, then</p>
<div class="math notranslate nohighlight">
\[\textrm{SSE} = \sum_{i=1}^N\sum_{j=1}^{M_i} w_{i,j}\left(\frac{y_{i,j} - \hat{y}_{i,j}}{\sigma _i}\right)^2\]</div>
<p>Summary table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Sigma</th>
<th class="head">Weight</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Unit</td>
<td>Same as the reference value</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Interpretation</td>
<td>Acceptable prediction error</td>
<td>Importance of this data_set entry</td>
</tr>
<tr class="row-even"><td>Default value</td>
<td><a class="reference internal" href="extractors.html#availableextractors"><span class="std std-ref">Extractor</span></a>-dependent</td>
<td>None (must be set explicitly)</td>
</tr>
<tr class="row-odd"><td>Element-dependent for arrays</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="data-set-entry-api">
<span id="datasetentryapi"></span><h2><a class="toc-backref" href="#id16">5.3.9. Data Set Entry API</a><a class="headerlink" href="#data-set-entry-api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="scm.params.core.dataset.DataSetEntry">
<em class="property">class </em><code class="descname">DataSetEntry</code><span class="sig-paren">(</span><em>expression</em>, <em>weight</em>, <em>reference=None</em>, <em>unit=None</em>, <em>sigma=None</em>, <em>metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSetEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper class representing a single entry in the <a class="reference internal" href="#scm.params.core.dataset.DataSet" title="scm.params.core.dataset.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This class is not public in this module, as it is not possible to create these entries on their own.
They can only be managed by an instance of a <a class="reference internal" href="#scm.params.core.dataset.DataSet" title="scm.params.core.dataset.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> class.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>weight <span class="classifier-delimiter">:</span> <span class="classifier">float or ndarray</span></dt>
<dd>The weight <span class="math notranslate nohighlight">\(w\)</span>, denoting the relative ‘importance’ of a single entry.
See <a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-functions"><span class="std std-ref">Loss Functions</span></a> for more information on how this parameter affects
the overall loss.</dd>
<dt>reference <span class="classifier-delimiter">:</span> <span class="classifier">Any</span></dt>
<dd>Reference value of the entry.
Consecutive <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.evaluate()</span></code></a> calls will compare to this value.</dd>
<dt>unit <span class="classifier-delimiter">:</span> <span class="classifier">Tuple[str,float]</span></dt>
<dd><p class="first">Whenever the reference needs to be stored in any other unit
than the default (atomic units),
use this argument to provide a tuple where the first element
is the string name of the unit and the second is the conversion
factor from atomic units to the desired unit.
The weighted residual will be calculated as
<span class="math notranslate nohighlight">\((w/\sigma)(y-c\hat{y})\)</span>, where <span class="math notranslate nohighlight">\(c\)</span> is
the unit conversion factor.</p>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Unit conversion will not be applied to <code class="xref py py-attr docutils literal notranslate"><span class="pre">sigma</span></code>.
Adjust manually if needed.</p>
</div>
</dd>
<dt>sigma <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>To calculate the loss function value, each entry’s residuals
are calculated as <span class="math notranslate nohighlight">\((w/\sigma)(y-\hat{y})\)</span>.
Ideally, sigma represents the accepted ‘accuracy’ the user expects
from a particular entry. <br>
Default values differ depending on the property and are
stored in individual extractor files. If the extractor
file has no <cite>sigma</cite> defined, will default to 1
(see <a class="reference internal" href="extractors.html#extractors-and-comparators"><span class="std std-ref">Extractors and Comparators</span></a> for more details).</dd>
<dt>expression <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The expression that will be evaluated during an <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataSet.evaluate()</span></code></a> call.
A combination of extractors and jobids.</dd>
<dt>jobids <span class="classifier-delimiter">:</span> <span class="classifier">set, read-only</span></dt>
<dd>All Job IDs needed for the calculation of this entry</dd>
<dt>extractors <span class="classifier-delimiter">:</span> <span class="classifier">set, read-only</span></dt>
<dd>All extractors needed for the calculation of this entry</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="data-set-api">
<span id="datasetapi"></span><h2><a class="toc-backref" href="#id17">5.3.10. Data Set API</a><a class="headerlink" href="#data-set-api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="scm.params.core.dataset.DataSet">
<em class="property">class </em><code class="descname">DataSet</code><span class="sig-paren">(</span><em>file=None</em>, <em>more_extractors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>A class representing the data set <span class="math notranslate nohighlight">\(DS\)</span>.</p>
<p>Attributes:</p>
<dl class="docutils">
<dt>extractors_folder <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Default extractors location.</dd>
<dt>extractors <span class="classifier-delimiter">:</span> <span class="classifier">set</span></dt>
<dd>Set of all extractors available to this instance. <br>
See <a class="reference internal" href="extractors.html#extractors-and-comparators"><span class="std std-ref">Extractors and Comparators</span></a> for more information.</dd>
<dt>jobids <span class="classifier-delimiter">:</span> <span class="classifier">set</span></dt>
<dd>Set of all jobIDs in this instance.</dd>
<dt>header <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>A dictionary with global metadata that will be printed at the beginning of the file
when <a class="reference internal" href="#scm.params.core.dataset.DataSet.store" title="scm.params.core.dataset.DataSet.store"><code class="xref py py-meth docutils literal notranslate"><span class="pre">store()</span></code></a> is called. Will always contain the ParAMS version number and class name.</dd>
</dl>
<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>file=None</em>, <em>more_extractors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a new <code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code> instance.</p>
<p>Parameters:</p>
<dl class="docutils">
<dt>file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Load a a previously saved DataSet from this path.</dd>
<dt>more_extractors <span class="classifier-delimiter">:</span> <span class="classifier">str or List[str]</span></dt>
<dd>Path to a user-defined extractors folder. <br>
See <a class="reference internal" href="extractors.html#extractors-and-comparators"><span class="std std-ref">Extractors and Comparators</span></a> for more information.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.add_entry">
<code class="descname">add_entry</code><span class="sig-paren">(</span><em>expression</em>, <em>weight=1.0</em>, <em>reference=None</em>, <em>unit=None</em>, <em>sigma=None</em>, <em>metadata=None</em>, <em>dupe_check=True</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new entry to the cost function, given the <cite>expression</cite>, the desired <cite>weight</cite> and (optionally) the
external reference value. <br>
Skips checking the expression for duplicates if <cite>dupe_check</cite> is <cite>False</cite>. This is recommended for large cost functions &gt;20k entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>expression: str</dt>
<dd>The string representation of the extractor and jobid to be evaluated.
See <a class="reference internal" href="#adding-entries"><span class="std std-ref">Adding entries</span></a> and
<a class="reference internal" href="extractors.html#extractors-and-comparators"><span class="std std-ref">Extractors and Comparators</span></a>
for more details.</dd>
<dt>weight: float, 1d array</dt>
<dd>Relatie weight of this entry.
See <a class="reference internal" href="#adding-entries"><span class="std std-ref">Adding entries</span></a> for more details,
see <a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-functions"><span class="std std-ref">Loss Functions</span></a> to check how weights influence the overall value.</dd>
<dt>reference: optional, Any</dt>
<dd>External reference values can be provided through this argument.</dd>
<dt>unit <span class="classifier-delimiter">:</span> <span class="classifier">optional, Tuple[str, float]</span></dt>
<dd><p class="first">Whenever the reference needs to be stored in any other unit
than the default (atomic units),
use this argument to provide a tuple where the first element
is the string name of the unit and the second is the conversion
factor from atomic units to the desired unit.
The weighted residual will be calculated as
<span class="math notranslate nohighlight">\((w/\sigma)(y-c\hat{y})\)</span>, where <span class="math notranslate nohighlight">\(c\)</span> is
the unit conversion factor.</p>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Unit conversion will not be applied to <code class="xref py py-attr docutils literal notranslate"><span class="pre">sigma</span></code>.
Adjust manually if needed.</p>
</div>
</dd>
<dt>sigma <span class="classifier-delimiter">:</span> <span class="classifier">optional, float</span></dt>
<dd>To calculate the loss function value, each entry’s residuals
are calculated as <span class="math notranslate nohighlight">\((w/\sigma)(y-\hat{y})\)</span>.
Ideally, sigma represents the accepted ‘accuracy’ the user expects
from a particular entry. <br>
Default values differ depending on the property and are
stored in individual extractor files. If the extractor
file has no <cite>sigma</cite> defined, will default to 1
(see <a class="reference internal" href="extractors.html#extractors-and-comparators"><span class="std std-ref">Extractors and Comparators</span></a> for more details).</dd>
<dt>metadata: optional, dict</dt>
<dd>Optional metadata, will be printed when <a class="reference internal" href="#scm.params.core.dataset.DataSet.store" title="scm.params.core.dataset.DataSet.store"><code class="xref py py-meth docutils literal notranslate"><span class="pre">store()</span></code></a> is called,
can be accessed through each entry’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code> argument.</dd>
<dt>dupe_check: True</dt>
<dd>If <cite>True</cite>, will check that every <cite>expression</cite> is unique per Data Set instance.
Disable if working with large data sets. <br>
Rather than adding an entry multiple times, consider increasing its <cite>weight</cite>.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.calculate_reference">
<code class="descname">calculate_reference</code><span class="sig-paren">(</span><em>results</em>, <em>overwrite=True</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.calculate_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the reference values for every entry, based on <cite>results</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>results <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first">A <code class="docutils literal notranslate"><span class="pre">{jobid</span> <span class="pre">:</span> <span class="pre">AMSResults}</span></code> dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">job</span> <span class="o">=</span> <span class="n">AMSJob</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">job</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DataSet</span><span class="o">.</span><span class="n">calculate_reference</span><span class="p">({</span><span class="n">job</span><span class="o">.</span><span class="n">name</span><span class="p">:</span><span class="n">job</span><span class="o">.</span><span class="n">results</span><span class="p">})</span>
</pre></div>
</div>
<p class="last">Can be ‘sparse’ (or empty == <cite>{}</cite>), as long as the respective entry
(or all) alrady has a <code class="xref py py-attr docutils literal notranslate"><span class="pre">reference</span></code> value defined.</p>
</dd>
<dt>overwrite <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>By default, when this method is called,
possibly present reference values will be overwritten with the ones extracted from the <cite>results</cite> dictionary.
Set this to <cite>False</cite> if you want to override this behavior.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>results</em>, <em>loss: Type[scm.params.core.lossfunctions.Loss] = 'sse'</em>, <em>return_residuals=False</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares the optimized results with the respective <code class="xref py py-attr docutils literal notranslate"><span class="pre">reference</span></code>.
Returns a single cost function value based on the <a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-functions"><span class="std std-ref">loss function</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>results <span class="classifier-delimiter">:</span> <span class="classifier">dict or DataSet</span></dt>
<dd>Same as <a class="reference internal" href="#scm.params.core.dataset.DataSet.calculate_reference" title="scm.params.core.dataset.DataSet.calculate_reference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_reference()</span></code></a>.
Alternatively, a second <a class="reference internal" href="#scm.params.core.dataset.DataSet" title="scm.params.core.dataset.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> instance can be used for an evaluation.
In this case, the second instance’s reference values will be compared.</dd>
<dt>loss <span class="classifier-delimiter">:</span> <span class="classifier">Loss, str</span></dt>
<dd>A subclass of <a class="reference internal" href="../lossfunctions/lossfunctions.html#loss-functions"><span class="std std-ref">Loss</span></a>, holding the mathematical definition of the
loss function to be applied to every entry, or a registered string shortcut.</dd>
<dt>return_residuals <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether to return <cite>residuals</cite>, <cite>contributions</cite> and <cite>predictions</cite> in addition to <cite>fx</cite>.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>fx <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The overall cost function value after the evaluation of <cite>results</cite>.</dd>
<dt>residuals <span class="classifier-delimiter">:</span> <span class="classifier">List[1d-array]</span></dt>
<dd>List of <em>unweighted</em> per-entry residuals
(or the return values of <code class="docutils literal notranslate"><span class="pre">compare(y,yhat)</span></code> in the case of
<a class="reference internal" href="extractors.html#custom-comparators"><span class="std std-ref">custom comparators</span></a>)
<br> Only returned when <cite>return_residuals</cite> is <cite>True</cite>.</dd>
<dt>contributions <span class="classifier-delimiter">:</span> <span class="classifier">List[float]</span></dt>
<dd>List of relative per-entry contributions to <cite>fx</cite>
<br> Only returned when <cite>return_residuals</cite> is <cite>True</cite>.</dd>
<dt>predictions <span class="classifier-delimiter">:</span> <span class="classifier">List[Any]</span></dt>
<dd><p class="first">List of raw predictions extracted from the results. Note: the elements of this list do not necessarily have the same size as the elements of residuals.
<br> Only returned when <cite>return_residuals</cite> is <cite>True</cite>.</p>
<p class="last">…</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of per-entry attributes,
where <cite>key</cite> determines the attribute, equivalent to: <br>
<code class="docutils literal notranslate"><span class="pre">[getattr(i,key)</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">self]</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>key: str</em>, <em>values: Sequence</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch-set the <cite>key</cite> attribute of every entry to a value from <cite>values</cite>.
<cite>values</cite> must be the same length als the number of entries in
the DataSet instance. <br>
Equivalent to <code class="docutils literal notranslate"><span class="pre">[setattr(e,key,v)</span> <span class="pre">for</span> <span class="pre">e,v</span> <span class="pre">in</span> <span class="pre">zip(self,values)]</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>yamlfile='data_set.yaml'</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a DataSet from a (compressed) YAML file.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.store">
<code class="descname">store</code><span class="sig-paren">(</span><em>yamlfile='data_set.yaml'</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the DataSet to a (compressed) YAML file. <br>
The file will be automatically compressed when the file ending is <cite>.gz</cite> or <cite>.gzip</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.pickle_load">
<code class="descname">pickle_load</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.pickle_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a DataSet from a pickled file.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.pickle_dump">
<code class="descname">pickle_dump</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.pickle_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the DataSet to a (compressed) pickled file. <br>
The file will be automatically compressed when the file ending is <cite>.gz</cite> or <cite>.gzip</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a deep copy of the instance.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__contains__">
<code class="descname">__contains__</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>Key</cite> should be a full expression (for jobids  only, iterate over <a class="reference internal" href="#scm.params.core.dataset.DataSet.jobids" title="scm.params.core.dataset.DataSet.jobids"><code class="xref py py-attr docutils literal notranslate"><span class="pre">jobids</span></code></a>)!</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__getitem__">
<code class="descname">__getitem__</code><span class="sig-paren">(</span><em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict-like behavior if <cite>idx</cite> is a string, list-like if an int</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__delitem__">
<code class="descname">__delitem__</code><span class="sig-paren">(</span><em>idx: Union[int, Sequence[int]]</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__delitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete one entry at index <cite>idx</cite>.
Can either be an index (int) or an expression (str).
In both cases a sequence can be passed to delete multiple elements at once</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <a class="reference internal" href="#scm.params.core.dataset.DataSetEntry" title="scm.params.core.dataset.DataSetEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetEntry</span></code></a> instance from this Data Set</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.index">
<code class="descname">index</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the index of a <a class="reference internal" href="#scm.params.core.dataset.DataSetEntry" title="scm.params.core.dataset.DataSetEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetEntry</span></code></a> instance in this Data Set</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <code class="docutils literal notranslate"><span class="pre">DataSet.get('expression')</span></code></p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__len__">
<code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the length of this Data Set</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__iter__">
<code class="descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterare over all <a class="reference internal" href="#scm.params.core.dataset.DataSetEntry" title="scm.params.core.dataset.DataSetEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSetEntries</span></code></a> in this Data Set</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#scm.params.core.dataset.DataSet.__getitem__" title="scm.params.core.dataset.DataSet.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__eq__">
<code class="descname">__eq__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if two Data Sets are equal.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__ne__">
<code class="descname">__ne__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self!=value.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__add__">
<code class="descname">__add__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add two Data Sets, returning a new instance.
Does not check for duplicates.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__sub__">
<code class="descname">__sub__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Substract two Data Sets, returning a new instance.
Does not check for duplicates.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.__str__">
<code class="descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string representation of this instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="scm.params.core.dataset.DataSet.jobids">
<code class="descname">jobids</code><a class="headerlink" href="#scm.params.core.dataset.DataSet.jobids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of all jobIDs necessary for the <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluation</span></code></a> of this instance.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.check_consistency">
<code class="descname">check_consistency</code><span class="sig-paren">(</span><em>jc: scm.params.core.jobcollection.JobCollection</em><span class="sig-paren">)</span> &#x2192; Sequence<a class="headerlink" href="#scm.params.core.dataset.DataSet.check_consistency" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this instance is consistent with <cite>jc</cite>, <em>i.e.</em>
if all entries can be calculated from the given JobCollection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>jc <span class="classifier-delimiter">:</span> <span class="classifier">JobCollection</span></dt>
<dd>The Job Collection to check against</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>List of entry indices that contain <cite>jobID</cite>s not present in <cite>jc</cite>. <br>
Use <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">self[i]</span></code> to delete the entry at index <cite>i</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_extractors">
<code class="descname">from_extractors</code><span class="sig-paren">(</span><em>extractors: Union[str, List[str]]</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_extractors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new Data Set instance that only contains entries with the
requested <cite>extractors</cite>.
For a single extractor, a string matching any of the ones in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">extractors</span></code> attribute can be passed.
Otherwise a list of strings is expected.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.maxjobs">
<code class="descname">maxjobs</code><span class="sig-paren">(</span><em>njobs</em>, <em>seed=None</em>, <em>_patience=100</em>, <em>_warn=True</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.maxjobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a random subset of <code class="docutils literal notranslate"><span class="pre">self</span></code>, reduced to <code class="docutils literal notranslate"><span class="pre">len(DataSet.jobids)</span> <span class="pre">&lt;=</span> <span class="pre">njobs</span></code> AMS jobs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Can result in a subset with a lower (or zero) number
of jobs than specified.
This happens when the data set consists of entries that are computed
from multiple jobs and adding any single entry would result in
a data set with more jobs than requested. <br>
Will warn if a smaller subset is generated and raise a <cite>ValueError</cite> if
the return value would be an empty data set.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.split">
<code class="descname">split</code><span class="sig-paren">(</span><em>*percentages</em>, <em>seed=None</em><span class="sig-paren">)</span> &#x2192; Tuple[scm.params.core.dataset.DataSet]<a class="headerlink" href="#scm.params.core.dataset.DataSet.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">N=len(percentages)</span></code> random subsets of <code class="docutils literal notranslate"><span class="pre">self</span></code>, where every <cite>percentage</cite> is the relative
number of entries per new instance returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># len(a) == 5 , len(b) == 2, len(c) == 3, no overlap</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Shallow copies will be created, meaning that
changes to the entries in the child instances will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned objects.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.random">
<code class="descname">random</code><span class="sig-paren">(</span><em>N</em>, <em>seed=None</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new subset of self with <code class="docutils literal notranslate"><span class="pre">len(subset)==N</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_jobids">
<code class="descname">from_jobids</code><span class="sig-paren">(</span><em>jobids: Set[str]</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_jobids" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a subset only containing the provided <cite>jobids</cite></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_metadata">
<code class="descname">from_metadata</code><span class="sig-paren">(</span><em>key</em>, <em>value</em>, <em>regex=False</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a subset for which the metadata key is equal to value. If regex, value can be a regular expression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>key <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Metadata key</dd>
<dt>value <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Metadata value</dd>
<dt>regex <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether value should be matched as a regular expression.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_expressions">
<code class="descname">from_expressions</code><span class="sig-paren">(</span><em>expressions: Sequence</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_expressions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a subset data_set from the given expressions.</p>
<dl class="docutils">
<dt>expressions: Sequence of str</dt>
<dd>The expressions that will form the new data_set.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_data_set_entries">
<code class="descname">from_data_set_entries</code><span class="sig-paren">(</span><em>entries: Sequence[scm.params.core.dataset.DataSetEntry]</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_data_set_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a subset data_set from the given data_set entries.</p>
<dl class="docutils">
<dt>entries <span class="classifier-delimiter">:</span> <span class="classifier">sequence of DataSetEntry</span></dt>
<dd>The data_set entries that will make up the new data_set.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.from_weights">
<code class="descname">from_weights</code><span class="sig-paren">(</span><em>min_val=1.0</em>, <em>max_val=None</em>, <em>tol=1e-08</em><span class="sig-paren">)</span> &#x2192; scm.params.core.dataset.DataSet<a class="headerlink" href="#scm.params.core.dataset.DataSet.from_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a subset for which the weights are in the interval [min_val, max_val]. If no max_val is given, max_val is set to equal min_val.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A shallow copy will be created, meaning that
changes to the entries in the child instance will also affect
the parent instance.
If you do not want this behavior, use the <a class="reference internal" href="#scm.params.core.dataset.DataSet.copy" title="scm.params.core.dataset.DataSet.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> method on the returned object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.print_contributions">
<code class="descname">print_contributions</code><span class="sig-paren">(</span><em>contribs</em>, <em>fname</em>, <em>sort=True</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.print_contributions" title="Permalink to this definition">¶</a></dt>
<dd><p>Print <cite>contribs</cite> to <cite>fname</cite>, assuming the former has the same ordering
as the return value of <a class="reference internal" href="#scm.params.core.dataset.DataSet.get" title="scm.params.core.dataset.DataSet.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>contribs <span class="classifier-delimiter">:</span> <span class="classifier">List</span></dt>
<dd>Return value of <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate()</span></code></a></dd>
<dt>fname <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>File location for printing</dd>
<dt>sort <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Sort the contributions from max to min.
Original order if disabled.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.print_residuals">
<code class="descname">print_residuals</code><span class="sig-paren">(</span><em>residuals</em>, <em>fname</em>, <em>weigh=True</em>, <em>extractors: List[str] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.print_residuals" title="Permalink to this definition">¶</a></dt>
<dd><p>Print <cite>residuals</cite> to <cite>fname</cite>, assuming the former has the same ordering
as the return value of <a class="reference internal" href="#scm.params.core.dataset.DataSet.get" title="scm.params.core.dataset.DataSet.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>.
Entries can be limited to certain extractors with the respective keyword argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>residuals <span class="classifier-delimiter">:</span> <span class="classifier">List</span></dt>
<dd>Return value of <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate()</span></code></a></dd>
<dt>fname <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>File location for printing</dd>
<dt>weigh <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether or not to apply the weights when printing the residuals</dd>
<dt>extractors <span class="classifier-delimiter">:</span> <span class="classifier">optional, List[str]</span></dt>
<dd>If provided, will limit the extractors to only the ones in the list.
Defaults to all extractors.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.get_predictions">
<code class="descname">get_predictions</code><span class="sig-paren">(</span><em>residuals: List</em>, <em>extractors: List = None</em>, <em>fpath: str = None</em>, <em>return_reference=False</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.get_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute predicted values for each data set entry based on the residuals vector
as returned by <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate()</span></code></a>,
optionally print reference and predicted values for each entry to file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>residuals <span class="classifier-delimiter">:</span> <span class="classifier">List</span></dt>
<dd>Return value of <a class="reference internal" href="#scm.params.core.dataset.DataSet.evaluate" title="scm.params.core.dataset.DataSet.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate()</span></code></a></dd>
<dt>extractors: optional, Sequence of strings</dt>
<dd>A list of extractors to be included in the output.
Includes all by default.</dd>
<dt>fpath <span class="classifier-delimiter">:</span> <span class="classifier">optional, str</span></dt>
<dd>If provided, will print
EXPRESSION, SIGMA, WEIGHT, REFERENCE, PREDICTION to file.</dd>
<dt>return_reference <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>If true, will return  a 2-tuple (preds, reference) where each item is a List.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>preds <span class="classifier-delimiter">:</span> <span class="classifier">List of 2-Tuples</span></dt>
<dd>Returns a list where each element is a tuple of <cite>(expression, predicted value)</cite>.</dd>
<dt>reference <span class="classifier-delimiter">:</span> <span class="classifier">List of 2-tuples</span></dt>
<dd>Returns a list where each element is a tuple of <cite>(expression, reference value)</cite>.
NOTE: this reference value is an “effective” reference value (np.zeros_like(preds)) if
a comparator is used.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.get_unique_metadata_values">
<code class="descname">get_unique_metadata_values</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.get_unique_metadata_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of all unique values for metadata entries.</p>
<p>Example for a data_set with 4 entries, the third lacks the “Group” metadata:</p>
<p>Group: a
Group: b
-
Group: b</p>
<p>get_unique_metadata_values(‘Group’) then returns {None, ‘a’, ‘b’}</p>
<dl class="docutils">
<dt>key <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The metadata key.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.group_by_metadata">
<code class="descname">group_by_metadata</code><span class="sig-paren">(</span><em>key: str</em>, <em>key2: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.group_by_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of data_sets grouped by the metadata key.</p>
<p>If key2 is given, return a nested dictionary grouped first by key and then by key2.</p>
<p>Example for a data_set with 4 entries, the third lacks the “Group” metadata:</p>
<p>Group: a, SubGroup: d
Group: a, SubGroup: d
-, SubGroup: f
Group: b, SubGroup: d
Group: b, SubGroup: e</p>
<p>if key == ‘Group’ and key2 == None, returns {‘a’: DataSet[dsentry1,dsentry2], None: DataSet[dsentry3], ‘b’: DataSet[dsentry4, dsentry5]}</p>
<p>If key == ‘Group’ and key2 == ‘SubGroup’, returns {‘a’: {‘d’: DataSet[dsentry1, dsentry2]}, None: {‘f’: DataSet[dsentry3]}, ‘b’: {‘d’: DataSet[dsentry4], ‘e’: DataSet[dsentry5]}}</p>
<dl class="docutils">
<dt>key <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The first metadata key</dd>
<dt>key2 <span class="classifier-delimiter">:</span> <span class="classifier">str or None</span></dt>
<dd>The second metadata key</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scm.params.core.dataset.DataSet.apply_weights_scheme">
<code class="descname">apply_weights_scheme</code><span class="sig-paren">(</span><em>weights_scheme: scm.params.common.weights_schemes.WeightsScheme</em><span class="sig-paren">)</span><a class="headerlink" href="#scm.params.core.dataset.DataSet.apply_weights_scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply weights scheme to all entries in data_set having ReferenceValues
(entries without ReferenceValues are skipped)</p>
<dl class="docutils">
<dt>weights_scheme <span class="classifier-delimiter">:</span> <span class="classifier">WeightsScheme</span></dt>
<dd>Weights scheme to apply</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <!--STARTNOSOLR-->
<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extractors.html" class="btn btn-neutral float-right" title="5.4. Extractors and Comparators" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../collections/collections.html" class="btn btn-neutral" title="5.2. Job and Engine Collections" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/> 

<!-- start :: footer -->
		<footer class="site-footer block">
			<div class="container">
				<div class="row">
					<div class="footer-column" >
	<ul>
		<li id="nav_menu-2" class="widget widget_nav_menu "><h3>Application Areas</h3><div class="menu-application-areas-container"><ul id="menu-application-areas" class="menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/batteries/">Batteries &#038; PVs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/chemical-bonding-analysis/">Bonding Analysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/catalysis/">Catalysis</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/heavy-elements/">Heavy Elements</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/inorganic-chemistry/">Inorganic Chemistry</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/pharma/">Life Sciences</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/materials-science/">Materials Science</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/nanotechnology/">Nanotechnology</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/oil-and-gas/">Oil and Gas</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/organic-electronics/">Organic Electronics</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/polymers/">Polymers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/spectroscopy/">Spectroscopy</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/applications/teaching/">Teaching</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-7" class="widget widget_nav_menu "><h3>Products</h3><div class="menu-product-navigation-container"><ul id="menu-product-navigation" class="menu">
<li id="menu-item-40263" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40263"><a href="https://www.scm.com/product/ams/">AMS Driver</a></li>
<li id="menu-item-7235" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7235"><a href="https://www.scm.com/product/adf/">ADF</a></li>
<li id="menu-item-7236" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7236"><a href="https://www.scm.com/product/band_periodicdft/">BAND</a></li>
<li id="menu-item-7237" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7237"><a href="https://www.scm.com/product/cosmo-rs/">COSMO-RS</a></li>
<li id="menu-item-7238" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7238"><a href="https://www.scm.com/product/dftb/">DFTB</a></li>
<li id="menu-item-7239" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7239"><a href="https://www.scm.com/product/gui/">GUI</a></li>
<li id="menu-item-44383" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-44383"><a href="https://www.scm.com/product/machine-learning-potentials/">MLPotential</a></li>
<li id="menu-item-7240" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7240"><a href="https://www.scm.com/product/mopac/">MOPAC</a></li>
<li id="menu-item-40262" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-40262"><a href="https://www.scm.com/product/plams/">PLAMS</a></li>
<li id="menu-item-43701" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-43701"><a href="https://www.scm.com/product/quantum-espresso/">Quantum ESPRESSO</a></li>
<li id="menu-item-7241" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-7241"><a href="https://www.scm.com/product/reaxff/">ReaxFF</a></li></ul></div></li><li id="nav_menu-26" class="widget widget_nav_menu "><div class="menu-licensing-container"><ul id="menu-licensing" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/">Pricing &#038; Licensing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/">Price Quote</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/price-quote/calculate-your-price/">Price Calculator</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/consulting/">Scientific Consulting</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/adf-resellers/">Resellers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/scm-license-terms/">License Terms</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/pricing-licensing/ordering-procedure/">Ordering</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-6" class="widget widget_nav_menu "><h3>Support</h3><div class="menu-support-navigation-container"><ul id="menu-support-navigation" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/">Support Overview</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-installation-videos/">Installation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/ams-tutorials-and-manuals/">Documentation</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/doc/Tutorials/GUI_overview/GUI_overview_tutorials.html">GUI Tutorials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/downloads/">Downloads</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/faq/">FAQs</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/adf-discussion-list/">Discussion List</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/support/documentation-previous-versions/release-notes/">Release Notes</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/support/adf-teaching-materials/">Teaching Materials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/adf-hands-on-workshops/">Workshops</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/web-presentations-by-adf-experts/">Webinars</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/videos-tutorials-and-web-presentations/">Videos</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/amsterdam-modeling-suite/brochures/">Brochure</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/amsterdam-modeling-suite/research-papers-citing-adf/">Papers Citing ADF</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/highlights/">Literature Highlights</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
		<li id="nav_menu-28" class="widget widget_nav_menu "><h3>About Us</h3><div class="menu-about-us-container"><ul id="menu-about-us" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/contact-us/">Contact Us</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/eu-projects/">EU Projects</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-authors/">Contributors</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/our-people/">The SCM Team</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/collaborations/">Collaborations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/careers/">Careers</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/mission-vision/">Mission &#038; Vision</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/newsletters/">Newsletters</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.scm.com/category/news/">News</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.scm.com/about-us/news-agenda/">Events</a></li>
</ul></div></li>	</ul>
</div><div class="footer-column" >
	<ul>
			</ul>
</div>				</div>
			</div>
		</footer>
		<footer class="disclaimer-footer">
			<img src="https://www.scm.com/wp-content/themes/scm/images/logos/scm-logo-compact.svg" alt="">
			<nav class="menu-service-navigation-container"><ul id="menu-service-navigation" class="menu-service navbar-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a href="https://www.scm.com/copyright/">Copyright</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-72"><a href="https://www.scm.com/terms-of-use/">Terms of Use</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-71"><a href="https://www.scm.com/privacy-policy/">Privacy Policy</a></li>
</ul></nav></footer>	
		<!-- end :: footer -->

<!--ENDNOSOLR-->
        </div>
      </div>

    </section>
  </div>
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2021.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NCRWHZZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/../../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<!-- https://stackoverflow.com/questions/2454577/sphinx-restructuredtext-show-hide-code-snippets/25543713 -->
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(200);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>